<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
	SQL File Name : ResSiteDaoImpl.xml
	Description : 자원(사이트)을 담담
-->
<mapper namespace="com.kbrainc.plum.rte.model.ResSiteDao">
	
    <!-- 사이트정보를 가지고 온다. -->
    <select id="selectSiteInfo" resultType="SiteInfoVo" parameterType="java.util.Map">
	    /* ResSiteDao.selectSiteInfo */
		SELECT 
            SITEID,
			SITE_NM,
            SYS_SE_CD,
            SYS_KND_CD,
            INSTID,
            LOGO_FILEID,
            CPYRHT,				   
			#{p_dmn} AS DMN,
            (SELECT FILE_IDNTFC_KEY FROM TB_CMM_FILE WHERE FILEID = S.LOGO_FILEID) AS LOGO_FILE_IDNTFC_KEY
        FROM 
            TB_CMM_SITE S
		WHERE
            SITEID = (SELECT SITEID FROM TB_CMM_SITE_DMN WHERE DMN = #{p_dmn})
		AND USE_YN = 'Y'
	</select>
	
	<!-- 사용중인 사이트아이디 목록을 가지고 온다. -->
	<select id="selectSiteidList" resultType="SiteInfoVo">
		 /* ResSiteDao.selectSiteidList */
		 SELECT SITEID
		 FROM TB_CMM_SITE
		 WHERE USE_YN = 'Y'
	</select>
</mapper>