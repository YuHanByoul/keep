<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
    SQL File Name : EduInstDaoImpl.xml
    Description : 사회환경교육기관 지정
-->
<mapper namespace="com.kbrainc.plum.front.eduInst.model.EduInstDao">

    <!-- 신청정보 조회 -->
    <select id="selectAplyInfoForm" parameterType="front.EduInstVo" resultType="front.EduInstVo">
        /* EduInstDao.selectAplyInfoForm*/
        SELECT
            A.USERID    AS APLCNTID
          , A.NM        AS APLCNT_NM
          , A.TELNO     AS APLY_TELNO
          , A.EML       AS APLCNT_EML
          , A.MOBLPHON  AS APLCNT_MOBLPHON
          , A.INSTID
          , B.RGN_CD
          , SUBSTR(B.RGN_CD,1,2)    AS CTPRVN_CD
          , B.INST_NM
          , B.INST_TYPE_CD
          , TYPE_CD.CD_NM
          , B.RPRSV_NM
          , B.TELNO      AS INST_CNTCT
          , B.BRNO
          , B.ADDR
          , B.ADDR_DTL
          , A.REG_DT
        FROM TB_CMM_USER A
        LEFT OUTER JOIN TB_CMM_INST B ON A.INSTID =B.INSTID
        LEFT OUTER JOIN TB_CMM_ADDR_CTPRVN ADDR ON B.RGN_CD = ADDR.CTPRVN_CD
        LEFT OUTER JOIN TB_CMM_CD TYPE_CD ON B.INST_TYPE_CD = TYPE_CD.CD
        WHERE A.USERID = #{aplcntid}
    </select>

    <!-- 신청정보 조회 -->
    <select id="getRcpno" parameterType="front.EduInstVo" resultType="String">
        /* EduInstDao.getRcpno*/
        SELECT CASE WHEN MAX(A.RCPTNO) IS NULL THEN CONCAT(DATE_FORMAT(NOW(),'%Y'),'-',#{ctprvnCd},'-0001')
              ELSE CONCAT(SUBSTR(MAX(A.RCPTNO),1,8), LPAD (CAST ( REGEXP_REPLACE( SUBSTR(MAX(A.RCPTNO),9,4),0,'') AS INTEGER)+1 ,4,'0'))
              END    AS RCPTNO
            FROM TB_SEE_ENV_EDU_INST A
            WHERE A.INSTID = #{instid}
            AND A.CTPRVN_CD = #{ctprvnCd}
    </select>

    <!-- 환경교육기관 상세 조회 -->
    <select id="selectEnvEduInst" parameterType="front.EduInstVo" resultType="front.EduInstVo">
        /* EduInstDao.selectAplyInfoForm*/
         SELECT
            A.APLYID             /*신청아이디*/
          , A.RCPTNO             /*접수번호*/
          , A.INSTID             /*기관아이디*/
          , A.APLCNTID           /*신청자아이디*/
          , A.APLCNT_NM          /*신청자_이름*/
          , A.APLCNT_EML         /*신청자_이메일*/
          , A.APLCNT_MOBLPHON    /*신청자_휴대폰*/
          , A.INST_NM            /*기관_이름*/
          , A.INST_EML           /*기관_이메일*/
          , A.INST_CNTCT         /*기관_연락처*/
          , A.CTPRVN_CD          /*시도_코드*/
          , A.RPRSV_BRDT         /*대표자_생년월일*/
          , A.ATCH_FILEGRPID     /*첨부_파일그룹아이디*/
          , A.DSGNNO             /*지정번호*/
          , A.DSGN_DE            /*지정_일자*/
          , A.AUTZRID            /*승인자아이디*/
          , A.ISSU_DE            /*발급_일자*/
          , A.ISGN_DE            /*재발급_일자*/
          , A.STTS_CD            /*상태_코드*/
          , A.MDFCN_DT           /*수정_일시*/
          , A.MDFRID             /*수정자아이디*/
          , A.REG_DT             /*등록_일시*/
          , A.RGTRID             /*등록자아이디*/
          , B.RGN_CD
          , SUBSTR(B.RGN_CD,1,2)    AS CTPRVN_CD
          , B.INST_TYPE_CD
          , B.TELNO      AS INST_CNTCT
          , B.ADDR
          , B.ADDR_DTL
          , B.BRNO
          , TYPE_CD.CD_NM
        FROM TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN TB_CMM_INST B ON A.INSTID =B.INSTID
        LEFT OUTER JOIN TB_CMM_ADDR_CTPRVN ADDR ON B.RGN_CD = ADDR.CTPRVN_CD
        LEFT OUTER JOIN TB_CMM_CD TYPE_CD ON B.INST_TYPE_CD = TYPE_CD.CD
        WHERE A.APLYID = #{aplyid}

    </select>

    <!-- 환경교육기관 목록 조회 -->
    <select id="selectEnvEduInstList" parameterType="front.EduInstVo" resultType="front.EduInstVo">
        /* EduInstDao.selectEnvEduInstList*/
         SELECT
            A.APLYID             /*신청아이디*/
          , A.RCPTNO             /*접수번호*/
          , A.INSTID             /*기관아이디*/
          , A.APLCNTID           /*신청자아이디*/
          , A.APLCNT_NM          /*신청자_이름*/
          , A.APLCNT_EML         /*신청자_이메일*/
          , A.APLCNT_MOBLPHON    /*신청자_휴대폰*/
          , A.INST_NM            /*기관_이름*/
          , A.INST_EML           /*기관_이메일*/
          , A.INST_CNTCT         /*기관_연락처*/
          , A.CTPRVN_CD          /*시도_코드*/
          , A.RPRSV_BRDT         /*대표자_생년월일*/
          , A.ATCH_FILEGRPID     /*첨부_파일그룹아이디*/
          , A.DSGNNO             /*지정번호*/
          , A.DSGN_DE            /*지정_일자*/
          , A.AUTZRID            /*승인자아이디*/
          , A.ISSU_DE            /*발급_일자*/
          , A.ISGN_DE            /*재발급_일자*/
          , A.STTS_CD            /*상태_코드*/
          , A.MDFCN_DT           /*수정_일시*/
          , A.MDFRID             /*수정자아이디*/
          , A.REG_DT             /*등록_일시*/
          , A.RGTRID             /*등록자아이디*/
          , B.RGN_CD
          , SUBSTR(B.RGN_CD,1,2)    AS CTPRVN_CD
          , B.INST_TYPE_CD
          , B.TELNO      AS INST_CNTCT
          , B.ADDR
          , B.ADDR_DTL
          , B.BRNO
          , TYPE_CD.CD_NM
        FROM TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN TB_CMM_INST B ON A.INSTID =B.INSTID
        LEFT OUTER JOIN TB_CMM_ADDR_CTPRVN ADDR ON B.RGN_CD = ADDR.CTPRVN_CD
        LEFT OUTER JOIN TB_CMM_CD TYPE_CD ON B.INST_TYPE_CD = TYPE_CD.CD
        WHERE A.APLCNTID = #{aplcntid}
        AND A.STTS_CD    = '248101'    /*작성중*/
        ORDER BY A.REG_DT DESC


    </select>

    <!-- 환경교육기관 등록 -->
    <insert id="insertEnvEduInst" parameterType="front.EduInstVo" useGeneratedKeys="true" keyProperty="aplyid">
    /* EduInstDao.insertEnvEduInst*/
    INSERT INTO TB_SEE_ENV_EDU_INST
        (
            RCPTNO
          , INSTID
          , APLCNTID
          , APLCNT_NM
          , APLCNT_EML
          , APLCNT_MOBLPHON
          , INST_NM
          , INST_EML
          , INST_CNTCT
          , CTPRVN_CD
          , RPRSV_BRDT
          , ATCH_FILEGRPID
          , DSGNNO
          , DSGN_DE
          , AUTZRID
          , ISSU_DE
          , ISGN_DE
          , STTS_CD
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
        ) VALUES(
            #{rcptno        }
          , #{instid        }
          , #{aplcntid      }
          , #{aplcntNm      }
          , #{aplcntEml     }
          , #{aplcntMoblphon}
          , #{instNm        }
          , #{instEml       }
          , #{instCntct     }
          , #{ctprvnCd      }
          , #{rprsvBrdt     }
          , #{atchFilegrpid }
          , #{dsgnno        }
          , #{dsgnDe        }
          , #{autzrid       }
          , #{issuDe        }
          , #{isgnDe        }
          , #{sttsCd        }
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid}
    )
    </insert>

    <!-- 환경교육기관 수정 -->
    <update id="updateEnvEduInst" parameterType="front.EduInstVo" keyProperty="aplyid">
        /* EduInstDao.updateEnvEduInst*/
        UPDATE
            TB_SEE_ENV_EDU_INST
        SET
            RCPTNO             = #{rcptno        }
          , INSTID             = #{instid        }
          , APLCNTID           = #{aplcntid      }
          , APLCNT_NM          = #{aplcntNm      }
          , APLCNT_EML         = #{aplcntEml     }
          , APLCNT_MOBLPHON    = #{aplcntMoblphon}
          , INST_NM            = #{instNm        }
          , INST_EML           = #{instEml       }
          , INST_CNTCT         = #{instCntct     }
          , CTPRVN_CD          = #{ctprvnCd      }
          , RPRSV_BRDT         = #{rprsvBrdt     }
          , ATCH_FILEGRPID     = #{atchFilegrpid }
          , DSGNNO             = #{dsgnno        }
          , DSGN_DE            = #{dsgnDe        }
          , AUTZRID            = #{autzrid       }
          , ISSU_DE            = #{issuDe        }
          , ISGN_DE            = #{isgnDe        }
          , STTS_CD            = #{sttsCd        }
          , MDFCN_DT           = NOW()
          , MDFRID             = #{user.userid   }
        WHERE
            APLYID = #{aplyid}
    </update>

    <!-- 운영계획 개요 조회 -->
    <select id="selectOperPlan" parameterType="front.EduInstVo" resultType="front.EduInstVo">
        /* EduInstDao.selectOperPlan*/
        SELECT
            A.APLYID            /*신청아이디*/
          , B.APLYID    AS PLAN_KEY
          , B.MAIN_BSNS         /*주요_사업*/
          , B.OPER_MTHD         /*운영_방법*/
          , B.OPER_PLAN         /*운영_계획*/
          , B.MNG_PLAN          /*관리_계획*/
          , B.BGT_PLAN          /*예산_계획*/
          , B.EXPC_EFFECT       /*기대_효과*/
          , B.ETC_DTA           /*기타_자료*/
          , B.ATCH_FILEGRPID    /*첨부_파일그룹아이디*/
          , B.MDFCN_DT          /*수정_일시*/
          , B.MDFRID            /*수정자아이디*/
          , B.REG_DT            /*등록_일시*/
          , B.RGTRID            /*등록자아이디*/
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_OPER_PLAN B ON A.APLYID = B.APLYID
        WHERE A.APLYID =#{aplyid}
    </select>

     <!-- 운영계획 등록 -->
    <insert id="insertOperPlan" parameterType="front.EduInstVo" useGeneratedKeys="true" keyProperty="aplyid">
        /* EduInstDao.insertOperPlan*/
        INSERT INTO TB_SEE_OPER_PLAN
        (
            APLYID
          , MAIN_BSNS
          , OPER_MTHD
          , OPER_PLAN
          , MNG_PLAN
          , BGT_PLAN
          , EXPC_EFFECT
          , ETC_DTA
          , ATCH_FILEGRPID
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
        ) VALUES
        (
            #{aplyid       }
          , #{mainBsns     }
          , #{operMthd     }
          , #{operPlan     }
          , #{mngPlan      }
          , #{bgtPlan      }
          , #{expcEffect   }
          , #{etcDta       }
          , #{atchFilegrpid}
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid}
        )
    </insert>

    <!-- 운영계획 수정 -->
    <update id="updateOperPlan" parameterType="front.EduInstVo" useGeneratedKeys="true" keyProperty="aplyid">
        /* EduInstDao.updateOperPlan*/
        UPDATE TB_SEE_OPER_PLAN SET
              MAIN_BSNS      = #{mainBsns}       /*주요사업*/
            , OPER_MTHD      = #{operMthd}       /*운영방법*/
            , OPER_PLAN      = #{operPlan}       /*운영계획*/
            , MNG_PLAN       = #{mngPlan}        /*관리계획*/
            , BGT_PLAN       = #{bgtPlan}        /*예산계획*/
            , EXPC_EFFECT    = #{expcEffect}     /*기대효과*/
            , ETC_DTA        = #{etcDta}         /*기타자료*/
            , ATCH_FILEGRPID = #{atchFilegrpid}  /*첨부파일그룹아이디*/
            , MDFCN_DT       = NOW()             /*수정일시*/
            , MDFRID         = #{user.userid}    /*수정자아이디*/
        WHERE APLYID = #{aplyid}    /*신청아이디*/
    </update>

    <!-- 추진일정 목록 조회 -->
    <select id="selectSchdlList" parameterType="front.EduInstVo" resultType="front.SchdlVo">
        /* EduInstDao.selectSchdlList*/
        SELECT
            A.APLYID
          , B.SCHDLID     /*일정아이디*/
          , B.DE          /*일자*/
          , B.HR          /*시간*/
          , B.EDU_CRS     /*교육_과정*/
          , B.DTL_CN      /*세부_내용*/
          , B.EDU_TRGT    /*교육_대상*/
          , B.MDFCN_DT    /*수정_일시*/
          , B.MDFRID      /*수정자아이디*/
          , B.REG_DT      /*등록_일시*/
          , B.RGTRID      /*등록자아이디*/
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_SCHDL B ON A.APLYID = B.APLYID
        WHERE A.APLYID = #{aplyid}
    </select>

    <!-- 추진일정 등록 -->
    <insert id="insertPropSchdl" parameterType="front.EduInstVo">
        /* EduInstDao.insertPropSchdl*/
        INSERT INTO TB_SEE_SCHDL
        (
            APLYID
          , DE
          , HR
          , EDU_CRS
          , DTL_CN
          , EDU_TRGT
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
        )VALUES(
            #{aplyid }
          , #{de     }
          , #{hr     }
          , #{eduCrs }
          , #{dtlCn  }
          , #{eduTrgt}
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid}
        )
    </insert>

    <!-- 추진일정 목록 삭제 -->
    <delete id="deletePropSchdl" parameterType="front.EduInstVo" >
        /* EduInstDao.deletePropSchdl*/
        DELETE FROM
            TB_SEE_SCHDL
        WHERE APLYID = #{aplyid}
    </delete>

    <!-- 추진일정 목록 조회 -->
    <select id="selectEduExprtList" parameterType="front.EduInstVo" resultType="front.EduExprtVo">
        /* EduInstDao.selectExprtList*/
        SELECT
            A.APLYID          /* 신청아이디 */
          , B.EXPRTID         /* 전문가아이디 */
          , B.SE_CD           /* 구분_코드 */
          , B.NM              /* 이름 */
          , B.BRDT            /* 생년월일 */
          , B.CHRGTASK        /* 담당업무 */
          , B.CRTFCT          /* 자격증 */
          , B.HDOF_BGNG_DE    /* 재직_시작_일자 */
          , B.HDOF_END_DE     /* 재직_종료_일자 */
          , B.CAREER          /* 경력 */
          , B.ATCH_FILEGRPID  /* 첨부_파일그룹아이디 */
          , B.MDFCN_DT        /* 수정_일시 */
          , B.MDFRID          /* 수정자아이디 */
          , B.REG_DT          /* 등록_일시 */
          , B.RGTRID          /* 등록자아이디 */
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_EXPRT B ON A.APLYID  =B.APLYID
        WHERE A.APLYID = #{aplyid}
    </select>

    <!-- 교육전문인력 등록 -->
    <insert id="insertEduExprt" parameterType="front.EduExprtVo">
        /* EduInstDao.insertEduExprt*/
        INSERT INTO TB_SEE_EXPRT
        (
            APLYID
          , SE_CD
          , NM
          , BRDT
          , CHRGTASK
          , CRTFCT
          , HDOF_BGNG_DE
          , HDOF_END_DE
          , CAREER
          , ATCH_FILEGRPID
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
        ) VALUES
        (
            #{aplyid       }
          , #{seCd         }
          , #{nm           }
          , #{brdt         }
          , #{chrgtask     }
          , #{crtfct       }
          , #{hdofBgngDe   }
          , #{hdofEndDe    }
          , #{career       }
          , #{atchFilegrpid}
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid}
        )
    </insert>

    <!-- 추진일정 목록 삭제 -->
    <delete id="deleteEduExprt" parameterType="front.EduInstVo" >
        /* EduInstDao.deleteEduExprt*/
        DELETE FROM
            TB_SEE_EXPRT
        WHERE APLYID = #{aplyid}
    </delete>

    <!-- 교육프로그램 목록 조회 -->
    <select id="selectSeePrgrmList" parameterType="front.EduInstVo" resultType="front.SeePrgrmVo">
        /* EduInstDao.selectSeePrgrmList*/
        SELECT
            A.APLYID
          , B.PRGRMID
          , B.PRGRM_NM
          , B.RFRNC_PRGRMID
          , B.EDU_SBJCT
          , B.EDU_TRGT
          , B.EDU_NOPE
          , B.EDU_MTHD
          , B.EDU_RND
          , B.EDU_PLC
          , B.ETRFEE
          , B.PRGRM_STTS_CD
          , B.MDFCN_DT
          , B.MDFRID
          , B.REG_DT
          , B.RGTRID
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_PRGRM B ON A.APLYID = B.APLYID
        WHERE  1=1
        AND A.APLYID = #{aplyid}
    </select>

    <!-- 교육프로그램 등록 -->
    <insert id="insertSeePrgrm" parameterType="front.SeePrgrmVo">
        /* EduInstDao.insertSeePrgrm */
        INSERT INTO TB_SEE_PRGRM
        (
             APLYID
           , PRGRM_NM
           , RFRNC_PRGRMID
           , EDU_SBJCT
           , EDU_TRGT
           , EDU_NOPE
           , EDU_MTHD
           , EDU_RND
           , EDU_PLC
           , ETRFEE
           , PRGRM_STTS_CD
           , MDFCN_DT
           , MDFRID
           , REG_DT
           , RGTRID
        )VALUES
        (
             #{aplyid      }
           , #{prgrmNm     }
           , #{rfrncPrgrmid}
           , #{eduSbjct    }
           , #{eduTrgt     }
           , #{eduNope     }
           , #{eduMthd     }
           , #{eduRnd      }
           , #{eduPlc      }
           , #{etrfee      }
           , #{prgrmSttsCd }
           , NOW()
           , #{user.userid}
           , NOW()
           , #{user.userid}

        )
    </insert>

    <!-- 교육프로그램 삭제 -->
    <delete id="deleteSeePrgrm" parameterType="front.SeePrgrmVo" >
        /* EduInstDao.deleteSeePrgrm */
        DELETE FROM
            TB_SEE_PRGRM
        WHERE APLYID = #{aplyid}
    </delete>

    <!-- 지정프로그램 목록 조회 -->
    <select id="selectDsgnPrgrmList" parameterType="front.EduInstVo" resultType="front.SeePrgrmVo">
        /* EduInstDao.selectDsgnPrgrmList*/
        <include refid="PaginationMapper.header"/>
        SELECT
            A.PRGRMID     AS RFRNC_PRGRMID
          , A.PRGRM_NM    AS RFRNC_PRGRM_NM
          , A.DSGN_NO
          , A.MDFCN_DT
        FROM TB_ASS_PRGRM A
        INNER JOIN TB_ASS_DSGN_HSTRY B ON A.PRGRMID = B.PRGRMID
        INNER JOIN TB_SEE_ENV_EDU_INST C ON A.INSTID = C.INSTID
        WHERE C.APLCNTID = ${aplcntid}
        <if test="searchPrgrmNm!= null and searchPrgrmNm != '' ">
            AND A.PRGRM_NM LIKE CONCAT('%',#{searchPrgrmNm},'%')
        </if>
        <if test="searchDsgnNo!= null and searchDsgnNo != '' ">
            AND A.DSGN_NO LIKE CONCAT('%',#{searchDsgnNo},'%')
        </if>
        GROUP BY A.PRGRMID
        <include refid="PaginationMapper.footer"/>
    </select>

    <!-- 교육시설 조회-->
    <select id="selectSeeFclt" parameterType="front.EduInstVo" resultType="front.EduInstVo">
        /* EduInstDao.selectSeeFclt*/
        SELECT
            A.APLYID
          , A.STTS_CD
          , B.APLYID    AS FCLT_KEY
          , B.RENT_YN
          , B.RENT_PRD
          , B.TOTAR
          , B.STY_FCLT_HOLD_YN
          , B.STY_FCLT_AR
          , B.STY_FCLT_NOPE
          , B.MDFCN_DT
          , B.MDFRID
          , B.REG_DT
          , B.RGTRID
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_FCLT B ON A.APLYID = B.APLYID
        WHERE 1=1
        AND A.APLYID = #{aplyid}
    </select>

    <!-- 시설 강의실 목록 조회-->
    <select id="selectLctrumList" parameterType="front.EduInstVo" resultType="front.LctrumVo">
        /* EduInstDao.selectLctrumList*/
        SELECT
            A.APLYID
          , B.LCTRUMID
          , B.APLYID
          , B.SE_CD
          , B.NM
          , B.AR
          , B.NOPE
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_FCLT_LCTRUM  B
            ON A.APLYID = B.APLYID
            <if test="seCd!= null and seCd != '' ">
                AND B.SE_CD = #{seCd}
            </if>
        WHERE 1=1
        AND A.APLYID = #{aplyid}

    </select>

    <!-- 시설 강의실 등록 -->
    <insert id="insertFcltLctrum" parameterType="front.LctrumVo">
        /* EduInstDao.insertFcltLctrum */
        INSERT INTO TB_SEE_FCLT_LCTRUM
        (
            APLYID
          , SE_CD
          , NM
          , AR
          , NOPE
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
          ) VALUES (
            #{aplyid }
          , #{seCd   }
          , #{nm     }
          , #{ar     }
          , #{nope   }
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid }
          )
    </insert>

    <!-- 시설 강의실 삭제 -->
    <delete id="deleteFcltLctrum" parameterType="front.EduInstVo">
        DELETE FROM TB_SEE_FCLT_LCTRUM
        WHERE APLYID = #{aplyid}
    </delete>

    <!-- 교육시설 설비 목록 조회-->
    <select id="selectFcltEqpList" parameterType="front.EduInstVo" resultType="front.EqpVo">
        /* EduInstDao.selectFcltEqpList*/
        SELECT
            A.APLYID
          , B.EQPID
          , B.APLYID
          , B.NM
          , B.QNTY
          , B.PRCUSE_MTHD
          , B.RMRK
          , B.MDFCN_DT
          , B.MDFRID
          , B.REG_DT
          , B.RGTRID
        FROM
            TB_SEE_ENV_EDU_INST A
        LEFT OUTER JOIN
            TB_SEE_FCLT_EQP B ON A.APLYID = B.APLYID
        WHERE 1=1
        AND   A.APLYID = #{aplyid}
    </select>

    <!-- 시설 설비 등록 -->
    <insert id="insertFcltEqp" parameterType="front.EqpVo">
        /* EduInstDao.insertFcltEqp*/
        INSERT INTO TB_SEE_FCLT_EQP
        (
            APLYID
          , NM
          , QNTY
          , PRCUSE_MTHD
          , RMRK
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
        ) VALUES (
            #{aplyid    }
          , #{nm        }
          , #{qnty      }
          , #{prcuseMthd}
          , #{rmrk      }
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid }
        )
    </insert>

    <!-- 교육프로그램 삭제 -->
    <delete id="deleteFcltEqp" parameterType="front.EduInstVo" >
        /* EduInstDao.deleteFcltEqp */
        DELETE FROM
            TB_SEE_FCLT_EQP
        WHERE APLYID = #{aplyid}
    </delete>

    <!-- 시설 설비 등록 -->
    <insert id="insertSeeFclt" parameterType="front.EduInstVo">
        INSERT INTO TB_SEE_FCLT(
            APLYID
          , RENT_YN
          , RENT_PRD
          , TOTAR
          , STY_FCLT_HOLD_YN
          , STY_FCLT_AR
          , STY_FCLT_NOPE
          , MDFCN_DT
          , MDFRID
          , REG_DT
          , RGTRID
        )VALUES(
            #{aplyid       }
          , #{rentYn       }
          , #{rentPrd      }
          , #{totar        }
          , #{styFcltHoldYn}
          , #{styFcltAr    }
          , #{styFcltNope  }
          , NOW()
          , #{user.userid}
          , NOW()
          , #{user.userid}
        )
    </insert>

    <!-- 시설 설비 수정 -->
    <update id="updateSeeFclt" parameterType="front.EduInstVo">
        /* EduInstDao.updateSeeFclt*/
        UPDATE TB_SEE_FCLT SET
            RENT_YN             = #{rentYn       }
          , RENT_PRD            = #{rentPrd      }
          , TOTAR               = #{totar        }
          , STY_FCLT_HOLD_YN    = #{styFcltHoldYn}
          , STY_FCLT_AR         = #{styFcltAr    }
          , STY_FCLT_NOPE       = #{styFcltNope  }
          , MDFCN_DT            = NOW()
          , MDFRID              = #{user.userid}
        WHERE 1=1
        AND APLYID = #{aplyid}
    </update>



</mapper>
