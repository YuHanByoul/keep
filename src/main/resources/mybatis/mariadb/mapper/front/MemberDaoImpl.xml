<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
	SQL File Name : MemberDaoImpl.xml
	Description : 회원정보
-->
<mapper namespace="com.kbrainc.plum.front.member.model.MemberDao">

    <!-- 회원 등록 -->
    <insert id="insertMember" parameterType="front.MemberVo"  useGeneratedKeys="true"  keyProperty ="userid">
        /* MemberDao.insertMember */
        INSERT INTO TB_CMM_USER (
			ACNT
			,PSWD
			,NM
			,MOBNO
			,EMAIL
			,TOS_AGRE_YN
			,STTS_CD
			,USER_SE_CD
			,MDFCN_DT
			,MDFRID
			,REG_DT
			,RGTRID
        ) VALUES (
        	 #{acnt         }
			,#{pswd          }
			,#{nm           }
			,#{mobNo       }
			,#{email        }
			,#{tosAgreYn  }
			,#{sttsCd      }
			,#{userSeCd   }
			,NOW()
			,#{user.userid  }
			,NOW()
			,#{user.userid  }
        )
    </insert>
    
    <!-- 회원 정보 수정 -->
    <update id="updateMember" parameterType="front.MemberVo">
      /* MemberDao.updateMember */
      UPDATE TB_CMM_USER 
       SET
       	ACNT          = #{acnt         }  
		,PSWD          = #{pswd          } 
		,NM           = #{nm           } 
		,MOBNO        = #{mobNo       } 
		,EMAIL        = #{email        } 
		,USER_SE_CD   = #{userSeCd} 
		,MDFCN_DT      = NOW()
		,MDFRID   = #{userid } 
	  WHERE  USERID = #{userid  }
    </update>
    
    <select id="chekcDuplicationUser" parameterType="front.MemberVo" resultType="int">
    /* MemberDao.chekcDuplicationUser */
     SELECT 
	   COUNT(*)
	 FROM 
	   TB_CMM_USER
	 WHERE 1=1
	   AND ACNT = #{acnt}
    </select>
    
    
</mapper>