<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" 
	layout:decorator="layout/gateLayout" 
>
	<body>
		<div layout:fragment="content">
			<script type="text/javascript" charset="utf-8" src="/js/common/jquery/jquery.cookie.js"></script>
			<script type="text/javascript">
			
				jQuery(document).ready(function(){		
					var f = document.login_form;
					if(jQuery.cookie != null)
					{			
						if(jQuery.cookie('userid') && jQuery.cookie('userid') != 'undefined' && jQuery.cookie('userid') != 'null'){
							f.p_userid.value =jQuery.cookie('userid');
						}
					}
					if(f.p_userid.value == ""){
						jQuery("#p_userid").focus();
					}else if(f.p_pwd.value == ""){
						jQuery("#p_pwd").focus();
					}
					
					validateLogin();
				});
				
				// 유효성검증기(로그인)
				var validator;
			    function validateLogin(){
			        validator = $("#login_form").validate({
			            onsubmit: false,
			            rules: {
			                p_userid: {
                                required: true
                               ,maxlength: 40
                            },
			                p_pwd: {
			                    required: true
			                   ,maxlength: 40
			                }
			            },
			            messages: { 
			                p_userid: {
			                    required: "아이디를 입력해주십시오"
			                   ,maxlength: "아이디는 40자를 넘을 수 없습니다."
			                },
			                p_pwd: {
			                    required: "비밀번호를 입력해주십시오"
			                   ,maxlength: "비밀번호는 40자를 넘을 수 없습니다."
			                }
			            }
			        });
			    }
			
				function login(){			    
					var f = document.login_form;
					if(!$('#login_form').valid()) return false;
					if(f.p_userid.value){
						jQuery.cookie('userid', f.p_userid.value, {expires:30});
					}
					return true;;
				}
				
			</script>

			<form name="login_form" id="login_form" th:action="@{/login}" method="post" onsubmit="return login();">
				<div id="box" class="animated bounceIn">
					<div id="top_header">
						<a>
							<img class="logo" src="/images/mng/logo.png" alt="logo">
						</a>
						<h5>
							Sign in to continue to your<br />
							Account.
						</h5>
					</div>
					<di id="inputs">
						<div class="form-control">
							<input type="text" name="p_userid" id="p_userid" placeholder="Id">
							<i class="fa fa-user"></i>
						</div>
						<div class="form-control">
							<input type="password" name="p_pwd" id="p_pwd" placeholder="Password">
							<i class="fa fa-key"></i>
						</div>
						<input type="submit" value="Sign In">
					</di>
					<div id="bottom">
						<div class="cb-label">
							<th:block th:if="${param.error}"><strong>아이디 또는 비밀번호를 다시 확인해 주십시오.</strong></th:block>
							<th:block th:if="${param.timeout}"><strong>세션이 유효하지 않습니다.<br>다시 로그인 해주십시오.</strong></th:block>
						</div>
					</div>
				</div>
			</form>
		</div>
	</body>
</html>