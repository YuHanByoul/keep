<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/front/nolnbSubLayout">
<body>
<div layout:fragment="content">
    <form class="block toggleParent" name="searchCondForm" id="searchCondForm">
        <input type="hidden" name="gtype" id="gtype" th:value="${search.gtype}" />
        <input type="hidden" name="chkSort" id="chkSort" th:value="${search.chkSort}" />
        <div class="search-filter search-filter-suggest mb10">
            <div class="form-input mo-flex-wrap">
                <div class="form-input">
                    <div class="form-input search-suggest-position pb0">
                        <input type="search" title="검색어" class="mr0" placeholder="검색어를 입력해 주세요." th:value="${search.keyword}" name="keyword" id="keyword" onkeyup="searchDetailEnterkey()">
                    </div>
                </div>
                <div class="search-filter-submit mo-flex-wrap">
                    <div class="form-input">
                        <button type="button" class="btn-medium btn-green btn-before-search" onclick="searchDetail('all')">검색</button>
                        <button type="button" class="btn-medium btn-green btn-after-toggle toggleTrigger">상세검색</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="toggleTarget">
            <div class="search-filter">
                <div class="form-input-wrap">
                    <div class="form-row">
                        <div class="form-header"><strong class="label">검색기간</strong></div>
                        <div class="form-body">
                            <div class="form-input">
                                <input type="date" title="시작일" name="startDt" id="startDt" th:value="${search.startDt}">
                                <div class="bul">~</div>
                                <input type="date" title="종료일" name="endDt" id="endDt" th:value="${search.endDt}">
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-header"><strong class="label">검색 제외 단어</strong></div>
                        <div class="form-body">
                            <div class="form-input mo-flex-wrap">
                                <input type="text" title="검색 제외 단어" data-width="290" class="mo-flex-auto" name="keywordNot" id="keywordNot" th:value="${search.keywordNot}">
                                <div class="bul fc-black6">특정단어 제외 후 검색</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-header"><strong class="label">주제</strong></div>
                        <div class="form-body">
                            <span kattr:check_code="sbjctCd" grpCd="155" upprCd="155101,155102,155103,155104" th:attr="selectedCd=${search.sbjctCd}" />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-header"><strong class="label">대상</strong></div>
                        <div class="form-body">
                            <span kattr:check_code="trgtCd" grpCd="185" th:attr="selectedCd=${search.trgtCd}" />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-header"><strong class="label">유형</strong></div>
                        <div class="form-body">
                            <span kattr:check_code="typeCd" grpCd="164" upprCd="164101" th:attr="selectedCd=${search.typeCd}" />
                            <span kattr:check_code="typeCd" grpCd="164" upprCd="164102" th:attr="selectedCd=${search.typeCd}" />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-header"><strong class="label">지역</strong></div>
                        <div class="form-body">
                            <div class="form-check-list">
                                <label class="inp"><input type="checkbox" name="rgnCd" value="11" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'11')}"><b>서울특별시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="26" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'26')}"><b>부산광역시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="27" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'27')}"><b>대구광역시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="28" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'28')}"><b>인천광역시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="29" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'29')}"><b>광주광역시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="30" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'30')}"><b>대전광역시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="31" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'31')}"><b>울산광역시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="36" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'36')}"><b>세종특별자치시</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="50" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'50')}"><b>제주특별자치도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="41" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'41')}"><b>경기도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="42" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'42')}"><b>강원도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="43" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'43')}"><b>충청북도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="44" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'44')}"><b>충청남도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="45" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'45')}"><b>전라북도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="46" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'46')}"><b>전라남도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="47" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'47')}"><b>경상북도</b></label>
                                <label class="inp"><input type="checkbox" name="rgnCd" value="48" th:checked="${search.rgnCd != null and #strings.contains(search.rgnCd,'48')}"><b>경상남도</b></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="search-filter-submit">
                    <button type="button" class="btn-medium btn-gray btn-before-refresh" onclick="initSearchForm()">초기화</button>
                    <button type="button" class="btn-medium btn-green btn-before-search" onclick="searchDetail('all')">검색</button>
                </div>
            </div>
            
        </div>

        
    </form>
    
    <div class="pc-only">
        <div class="rank-list rank-tab-list mt45">
            <div class="tab-content" style="height:144px;">
                <dl>
                    <dt>인기검색어</dt>
                    <dd>
                        <ul class="tab-list tab-text-list" role="tablist">
                            <li class="active"><button type="button" role="tab" aria-controls="tab-rank1" id="rank-tab1" aria-selected="true">일간</button></li>
                            <li><button type="button" role="tab" aria-controls="tab-rank2" id="rank-tab2" aria-selected="false">주간</button></li>
                            <li><button type="button" role="tab" aria-controls="tab-rank3" id="rank-tab3" aria-selected="false">월간</button></li>
                        </ul>
                    </dd>
                </dl>
                <div id="tab-rank1" class="tabpanel" role="tabpanel" aria-labelledby="rank-tab1">
                    <div class="list-inner" id="tabRank1">
                    </div>
                </div>
                <div id="tab-rank2" class="tabpanel" role="tabpanel" aria-labelledby="rank-tab2">
                    <div class="list-inner" id="tabRank2">
                    </div>
                </div>
                <div id="tab-rank3" class="tabpanel" role="tabpanel" aria-labelledby="rank-tab3">
                    <div class="list-inner" id="tabRank3">
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="table-caption flex-nowrap table-border-bottom">
        <div class="left">
            <p><b>&lsquo;[[${search.keyword}]]&rsquo;</b>에 대한 검색 결과입니다. (총 <b>[[${#numbers.formatInteger(countInfo.all,1,'COMMA')}]]</b> 건)</p>
        </div>
        <div class="right">
            <div class="sort-tab">
                <ul role="tablist">
                    <li th:class="${search.chkSort == 'asc' ? 'active' : ''}"><a href="javascript:searchSort('asc')" role="tab" aria-selected="true">정확도순</a></li>
                    <li th:class="${search.chkSort == 'desc' ? 'active' : ''}"><a href="javascript:searchSort('desc')" role="tab">최신순</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="tab-content tab-sub dropDown">
        <button type="button" class="tab-mobile-trigger trigger" aria-haspopup="listbox" aria-expanded="true">전체 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.all,1,'COMMA')}]])</span></button>
        <ul class="tab-list target" role="tablist">
            <li th:class="${search.gtype == 'all' ? 'tab active' : 'tab'}"><a href="javascript:searchGtype('all')" role="tab">전체 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.all,1,'COMMA')}]])</span></a></li>
            <li th:class="${search.gtype == '50' ? 'tab active' : 'tab'}"><a href="javascript:searchGtype('50')" role="tab">메뉴 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.cnt50,1,'COMMA')}]])</span></a></li>
            <li th:class="${search.gtype == '10' ? 'tab active' : 'tab'}"><a href="javascript:searchGtype('10')" role="tab">게시물 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.cnt10,1,'COMMA')}]])</span></a></li>
            <li th:class="${search.gtype == '20' ? 'tab active' : 'tab'}"><a href="javascript:searchGtype('20')" role="tab">환경교육 및 자원 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.cnt20,1,'COMMA')}]])</span></a></li>
            <li th:class="${search.gtype == '30' ? 'tab active' : 'tab'}"><a href="javascript:searchGtype('30')" role="tab">기관 및 시설 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.cnt30,1,'COMMA')}]])</span></a></li>
            <li th:class="${search.gtype == '40' ? 'tab active' : 'tab'}"><a href="javascript:searchGtype('40')" role="tab">첨부파일 <span class="fw-400 ml5">([[${#numbers.formatInteger(countInfo.cnt40,1,'COMMA')}]])</span></a></li>
        </ul>
        <div class="tabpanel active" role="tabpanel" th:if="${search.gtype == 'all'}">

            <div class="search-page-result" th:if="${countInfo.all == 0}">
                <div class="nodata bg3">
                    <p class="fc-black6"><span class="icon icon-notice bg-black6"></span>검색된 내용이 없습니다.</p>
                </div>
            </div>
            <div class="search-page-result" th:if="${countInfo.all > 0}">
                <div class="table-caption" th:if="${countInfo.cnt50 > 0}">
                    <div class="left">
                        <h3 class="sub-title">메뉴 ([[${#numbers.formatInteger(countInfo.cnt50,1,'COMMA')}]])</h3>
                    </div>
                    <div class="right">
                        <a href="javascript:searchGtype('50')" class="btn-small btn-outline-black" th:if="${countInfo.cnt50 > 3}">검색결과 더보기</a>
                    </div>
                </div>

                <ul th:if="${countInfo.cnt50 > 0}">
                    <li th:each="item : ${gtype50}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${#strings.startsWith(item.URL,'http') ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:if="${#strings.startsWith(item.URL,'http')}" th:text="${item.URL}"></span>
                    </li>
                </ul>
                
                <div class="table-caption" th:if="${countInfo.cnt10 > 0}">
                    <div class="left">
                        <h3 class="sub-title">게시물 ([[${#numbers.formatInteger(countInfo.cnt10,1,'COMMA')}]])</h3>
                    </div>
                    <div class="right">
                        <a href="javascript:searchGtype('10')" class="btn-small btn-outline-black" th:if="${countInfo.cnt10 > 3}">검색결과 더보기</a>
                    </div>
                </div>
                
                <ul th:if="${countInfo.cnt10 > 0}">
                    <li th:each="item : ${gtype10}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${item.ETYPE == '11' ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:if="${item.ETYPE == '11'}" th:text="${item.URL}"></span>
                        <span class="text" th:unless="${item.ETYPE == '11'}" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                    </li>
                </ul>
            
                <div class="table-caption" th:if="${countInfo.cnt20 > 0}">
                    <div class="left">
                        <h3 class="sub-title">환경교육 및 자원 ([[${#numbers.formatInteger(countInfo.cnt20,1,'COMMA')}]])</h3>
                    </div>
                    <div class="right">
                        <a href="javascript:searchGtype('20')" class="btn-small btn-outline-black" th:if="${countInfo.cnt20 > 3}">검색결과 더보기</a>
                    </div>
                </div>

                <ul th:if="${countInfo.cnt20 > 0}">
                    <li th:each="item : ${gtype20}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                    </li>
                </ul>

                <div class="table-caption" th:if="${countInfo.cnt30 > 0}">
                    <div class="left">
                        <h3 class="sub-title">기관 및 시설 ([[${#numbers.formatInteger(countInfo.cnt30,1,'COMMA')}]])</h3>
                    </div>
                    <div class="right">
                        <a href="javascript:searchGtype('30')" class="btn-small btn-outline-black" th:if="${countInfo.cnt30 > 3}">검색결과 더보기</a>
                    </div>
                </div>

                <ul th:if="${countInfo.cnt30 > 0}">
                    <li th:each="item : ${gtype30}">
                    <th:choose>
                        <th:when th:if="${item.ETYPE == '1' OR item.ETYPE == '2' OR item.ETYPE == '3'}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${item.URL != '' ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:text="${item.URL}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                        </th:when>
                        <th:when th:if="${item.ETYPE == '4' OR item.ETYPE == '5'}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${item.URL != '' ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.INST_NM),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.ADDR),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="text" th:text="${item.URL}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                        </th:when>
                        <th:when th:if="${item.ETYPE == '6'}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                        </th:when>
                    </th:choose>
                    </li>
                </ul>

                <div class="table-caption" th:if="${countInfo.cnt40 > 0}">
                    <div class="left">
                        <h3 class="sub-title">첨부파일 ([[${#numbers.formatInteger(countInfo.cnt40,1,'COMMA')}]])</h3>
                    </div>
                    <div class="right">
                        <a href="javascript:searchGtype('40')" class="btn-small btn-outline-black" th:if="${countInfo.cnt40 > 3}">검색결과 더보기</a>
                    </div>
                </div>

                <ul th:if="${countInfo.cnt40 > 0}">
                    <li th:each="item : ${gtype40}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                    </li>
                </ul>

            </div>

            

        </div>
        
        <div class="tabpanel active" th:if="${search.gtype == '50'}">
            
            <div class="search-page-result" th:if="${countInfo.cnt50 == 0}">
                <div class="nodata bg3">
                    <p class="fc-black6"><span class="icon icon-notice bg-black6"></span>검색된 내용이 없습니다.</p>
                </div>
            </div>
            <div class="search-page-result" th:if="${countInfo.cnt50 > 0}">
                <div class="table-caption">
                    <div class="left">
                        <h3 class="sub-title">메뉴 ([[${#numbers.formatInteger(countInfo.cnt50,1,'COMMA')}]])</h3>
                    </div>
                </div>

                <ul>
                    <li th:each="item : ${gtype50}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${#strings.startsWith(item.URL,'http') ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:if="${#strings.startsWith(item.URL,'http')}" th:text="${item.URL}"></span>
                    </li>
                </ul>
            </div>

            <th:block kattr:pagination="list" onclick="goPage" th:if="${countInfo.cnt50 > 0}" />

        </div>
        <div class="tabpanel active" role="tabpanel" th:if="${search.gtype == '10'}">
            
            <div class="search-page-result" th:if="${countInfo.cnt10 == 0}">
                <div class="nodata bg3">
                    <p class="fc-black6"><span class="icon icon-notice bg-black6"></span>검색된 내용이 없습니다.</p>
                </div>
            </div>
            <div class="search-page-result" th:if="${countInfo.cnt10 > 0}">
                <div class="table-caption">
                    <div class="left">
                        <h3 class="sub-title">게시물 ([[${#numbers.formatInteger(countInfo.cnt10,1,'COMMA')}]])</h3>
                    </div>
                </div>
                
                <ul>
                    <li th:each="item : ${gtype10}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${item.ETYPE == '11' ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:if="${item.ETYPE == '11'}" th:text="${item.URL}"></span>
                        <span class="text" th:unless="${item.ETYPE == '11'}" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                    </li>
                </ul>
            </div>
            
            <th:block kattr:pagination="list" onclick="goPage" th:if="${countInfo.cnt10 > 0}" />

        </div>
        <div class="tabpanel active" role="tabpanel" th:if="${search.gtype == '20'}">
            
            <div class="search-page-result" th:if="${countInfo.cnt20 == 0}">
                <div class="nodata bg3">
                    <p class="fc-black6"><span class="icon icon-notice bg-black6"></span>검색된 내용이 없습니다.</p>
                </div>
            </div>
            <div class="search-page-result" th:if="${countInfo.cnt20 > 0}">
            
                <div class="table-caption">
                    <div class="left">
                        <h3 class="sub-title">환경교육 및 자원 ([[${#numbers.formatInteger(countInfo.cnt20,1,'COMMA')}]])</h3>
                    </div>
                </div>

                <ul>
                    <li th:each="item : ${gtype20}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                    </li>
                </ul>
            </div>

            <th:block kattr:pagination="list" onclick="goPage" th:if="${countInfo.cnt20 > 0}" />

        </div>
        <div class="tabpanel active" role="tabpanel" th:if="${search.gtype == '30'}">
            
            <div class="search-page-result" th:if="${countInfo.cnt30 == 0}">
                <div class="nodata bg3">
                    <p class="fc-black6"><span class="icon icon-notice bg-black6"></span>검색된 내용이 없습니다.</p>
                </div>
            </div>
            <div class="search-page-result" th:if="${countInfo.cnt30 > 0}">
                <div class="table-caption">
                    <div class="left">
                        <h3 class="sub-title">기관 및 시설 ([[${#numbers.formatInteger(countInfo.cnt30,1,'COMMA')}]])</h3>
                    </div>
                </div>

                <ul>
                    <li th:each="item : ${gtype30}">
                    <th:choose>
                        <th:when th:if="${item.ETYPE == '1' OR item.ETYPE == '2' OR item.ETYPE == '3'}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${item.URL != '' ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:text="${item.URL}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                        </th:when>
                        <th:when th:if="${item.ETYPE == '4' OR item.ETYPE == '5'}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline" th:target="${item.URL != '' ? '_blank' : ''}">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.INST_NM),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.ADDR),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="text" th:text="${item.URL}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                        </th:when>
                        <th:when th:if="${item.ETYPE == '6'}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="text" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.CN),search.keyword,'<i>' + search.keyword +'</i>')}"></span>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                        </th:when>
                    </th:choose>
                    </li>
                </ul>

            </div>

            <th:block kattr:pagination="list" onclick="goPage" th:if="${countInfo.cnt30 > 0}" />

        </div>
        <div class="tabpanel active" role="tabpanel" th:if="${search.gtype == '40'}">
            
            <div class="search-page-result" th:if="${countInfo.cnt40 == 0}">
                <div class="nodata bg3">
                    <p class="fc-black6"><span class="icon icon-notice bg-black6"></span>검색된 내용이 없습니다.</p>
                </div>
            </div>
            <div class="search-page-result" th:if="${countInfo.cnt40 > 0}">
                <div class="table-caption">
                    <div class="left">
                        <h3 class="sub-title">첨부파일 ([[${#numbers.formatInteger(countInfo.cnt40,1,'COMMA')}]])</h3>
                    </div>
                </div>

                <ul>
                    <li th:each="item : ${gtype40}">
                        <a th:href="${T(com.kbrainc.plum.front.search.controller.SearchController).getLink(item)}" class="underline">
                            <strong class="title" th:utext="${#strings.replace(T(com.kbrainc.plum.rte.util.StringUtil).removeHTMLTag(item.TTL),search.keyword,'<i>' + search.keyword +'</i>')}"></strong>
                        </a>
                        <span class="info">
                            <span class="loc" th:text="${T(com.kbrainc.plum.front.search.controller.SearchController).getPath(item)}"></span>
                            <span class="date" th:text="${#temporals.createDate(item.REG_DT, 'yyyyMMdd')}"></span>
                        </span>
                    </li>
                </ul>
            </div>

            <th:block kattr:pagination="list" onclick="goPage" th:if="${countInfo.cnt40 > 0}" />

        </div>
    </div>

<script type="text/javascript">

    $(function() {
        // 인기검색어 조회
        if(displayWorkProgress(true)){
            $.ajax({
                url : "/search/trndKeyword",
                cache : false,
                dataType: 'json',
                success : function (data){
                    $("#tabRank1").empty();
                    $("#tabRank2").empty();
                    $("#tabRank3").empty();
                    
                    if (data.DAY.length == 0){
                        $("#tabRank1").html('<p>일간 인기 검색어가 없습니다.</p>');
                    }else{
                        var html = '';
                        html += '<ul>';
                        for(var i = 0; i < data.DAY.length; i++){
                            html += `<li><a href="javascript:searchDetailKeyword('${data.DAY[i]._KEYWORD}')">${data.DAY[i]._KEYWORD}</a></li>`;            
                        }
                        html += '</ul>';
                        $("#tabRank1").append(html);
                    }
                    
                    if (data.WEEK.length == 0){
                        $("#tabRank2").html('<p>주간 인기 검색어가 없습니다.</p>');
                    }else{
                        var html = '';
                        html += '<ul>';
                        for(var i = 0; i < data.WEEK.length; i++){
                            html += `<li><a href="javascript:searchDetailKeyword('${data.WEEK[i]._KEYWORD}')">${data.WEEK[i]._KEYWORD}</a></li>`;            
                        }
                        html += '</ul>';
                        $("#tabRank2").append(html);
                    }
                    
                    if (data.MONTH.length == 0){
                        $("#tabRank3").html('<p>월간 인기 검색어가 없습니다.</p>');
                    }else{
                        var html = '';
                        html += '<ul>';
                        for(var i = 0; i < data.MONTH.length; i++){
                            html += `<li><a href="javascript:searchDetailKeyword('${data.MONTH[i]._KEYWORD}')">${data.MONTH[i]._KEYWORD}</a></li>`;            
                        }
                        html += '</ul>';                                
                        $("#tabRank3").append(html);
                    }
    
                    closeWorkProgress();
                },
                error :function(){
                    $("#tabRank1").html('<p>일간 인기 검색어가 없습니다.</p>');
                    $("#tabRank2").html('<p>주간 인기 검색어가 없습니다.</p>');
                    $("#tabRank3").html('<p>월간 인기 검색어가 없습니다.</p>');
                }
            });
        }
    });

    function searchDetail(gtype, page){
        var keyword = $("#keyword").val();
        if(keyword == ''){
            //alert('검색어를 입력해주세요.');
            //return;
        }
        
        var startDt = $("#startDt").val();
        var endDt = $("#endDt").val();
        
        if ((startDt != '' && endDt == '') || (startDt == '' && endDt != '')) {
            alert('검색기간을 입력해 주십시오.');
            return;
        }
        
        if(gtype != undefined) {
            $("#gtype").val(gtype);
        }
        
        var formSerialize = $("#searchCondForm").serialize();
        formSerialize = formSerialize.replace("startDt=&","");
        formSerialize = formSerialize.replace("endDt=&","");
        formSerialize = formSerialize.replace("keywordNot=&","");
        formSerialize = formSerialize.replace("&mkey=","");
        formSerialize = formSerialize.replace("mkey=","");
        
        if(page == undefined) {
            location.href = "/search.html?" + formSerialize;
        }else{
            location.href = "/search.html?" + formSerialize + "&page=" + page;
        }
    }
    
    function searchDetailKeyword(keyword){
        $("#keyword").val(keyword);
        searchDetail('all');
    }
        
    function searchSort(chkSort){
        $("#chkSort").val(chkSort);
        searchDetail();
    }
    
    function searchGtype(gtype){
        $("#gtype").val(gtype);
        searchDetail();
    }
    
    function searchDetailEnterkey() {
        if (window.event.keyCode == 13) {
            searchDetail('all');
        }
    }
    
    function initSearchForm() {
        //$("#keyword").val('');
        $("#startDt").val('');
        $("#endDt").val('');
        $("#keywordNot").val('');
        $("input[name=sbjctCd]").attr('checked', false);
        $("input[name=trgtCd]").attr('checked', false)
        $("input[name=typeCd]").attr('checked', false)
        $("input[name=rgnCd]").attr('checked', false)
    }
    
    function goPage(page){
        searchDetail(undefined, page); 
    }
</script> 
    
</div>

</body>
</html>