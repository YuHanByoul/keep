<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
    xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" 
    layout:decorator="layout/front/subLayout" 
>

<body>
<div layout:fragment="content">
    <section>
        <div class="tab-content tab-sub dropDown">
	        <button type="button" class="tab-mobile-trigger trigger" aria-expanded="true">정산내역관리</button>
	        <ul class="tab-list target">
	            <li class="tab active"><button data-controls="tab-subpanel01" onclick="selectTab(this.id);" id="tab-sub01">정산내역관리</button></li>
	            <li class="tab"><button data-controls="tab-subpanel02" onclick="selectTab(this.id);" id="tab-sub02">잔액/이자관리</button></li>
	        </ul>
		    <div id="tabpanel1"  class="tabpanel">
		      <h3 class="blind">정산내역관리</h3>
		      <div id="tab-subpanel01"></div>
		    </div>
		    <div id="tabpanel2"  class="tabpanel">
		      <h3 class="blind">잔액/이자관리</h3>
		      <div id="tab-subpanel02"></div>
		    </div>
	    </div>
	</section>
    
    <script th:inline="javascript">
	    /*<![CDATA[*/
	    var aplyid = /*[[${clclnVo.aplyid}]]*/null;
	    var fldCd = /*[[${clclnVo.fldCd}]]*/null;
	    /*]]>*/
	
        loadTabContent("tab-sub01", "/front/clclnMng/clclnDsctnForm.html?aplyid=" + aplyid + "&fldCd=" + fldCd);
	
	    function selectTab(tabId) {
	        if(tabId == "tab-sub01") {
	            loadTabContent(tabId, "/front/clclnMng/clclnDsctnForm.html?aplyid=" + aplyid + "&fldCd=" + fldCd);
	        } else if(tabId == "tab-sub02") {
	            loadTabContent(tabId, "/front/clclnMng/blncIntForm.html?aplyid=" + aplyid + "&fldCd=" + fldCd);
	        }
	    }
	
	    function loadTabContent(tabId, uri){
	    	$('#tab-subpanel01').html();
	    	$('#tab-subpanel02').html();
	        $.ajax({
	            cache   : false
	          , url     : uri
	          , type    : 'GET'
	          , async   : 'false'
	          , dataType: 'html'
	          , success : function(result){ //요청이 성공했을때 실행되는 콜백 함수
	        	  if(tabId == "tab-sub01") {
		              $('#tab-subpanel01').html(result);
		              $('#tabpanel1').show();
		              $('#tabpanel2').hide();
	        	  } else if(tabId == "tab-sub02") {
		              $('#tab-subpanel02').html(result);
                      $('#tabpanel1').hide();
                      $('#tabpanel2').show();
	        	  }
	          }
	        });
	    }
    </script>
</div>
</body>
</html>