<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
    xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" 
    layout:decorator="layout/front/simpleLayout"
>
    <body>
        <th:block layout:fragment="content">
            <section>
                <div class="underline-title">
                    <h2 th:if="${#strings.isEmpty(data.onepassEncodeData)}">회원가입</h2>
                    <h2 th:unless="${#strings.isEmpty(data.onepassEncodeData)}">회원연동</h2>
                </div>
        
                <div class="steps">
                    <ol>
                        <li>
                            <div class="steps-inner">
                                <span>01</span>
                                <strong th:if="${#strings.isEmpty(data.onepassEncodeData)}">회원가입 유형</strong>
                                <strong th:unless="${#strings.isEmpty(data.onepassEncodeData)}">회원연동 유형</strong>
                            </div>
                        </li>
                        <li>
                            <div class="steps-inner">
                                <span>02</span>
                                <strong>약관동의</strong>
                            </div>
                        </li>
                        <li th:if="${#strings.isEmpty(data.onepassEncodeData)}">
                            <div class="steps-inner">
                                <span>03</span>
                                <strong>본인인증</strong>
                            </div>
                        </li>
                        <li>
                            <div class="steps-inner">
                                <span th:if="${#strings.isEmpty(data.onepassEncodeData)}">04</span>
                                <span th:unless="${#strings.isEmpty(data.onepassEncodeData)}">03</span>
                                <strong>회원정보입력</strong>
                            </div>
                        </li>
                        <li class="active" title="현재 단계" aria-current="step">
                            <div class="steps-inner" th:if="${#strings.isEmpty(data.onepassEncodeData)}">
                                <span>05</span>
                                <strong>가입완료</strong>
                            </div>
                            <div class="steps-inner" th:unless="${#strings.isEmpty(data.onepassEncodeData)}">
                                <span>04</span>
                                <strong>연동완료</strong>
                            </div>
                        </li>
                    </ol>
                </div>
    
                <div class="box-step-end">
                    <div class="thumb"><span class="icon icon-step-end"></span></div>
                    <dl th:if="${data.type == 'P'}">
                        <dt>개인회원 <th:block th:text="${#strings.isEmpty(data.onepassEncodeData)} ? '가입' : '연동'"></th:block>이 완료되었습니다.</dt>
                        <dd>지금 바로 환경교육포털을 이용해보세요.</dd>
                    </dl>
                    <dl th:if="${data.type == 'C'}">
                        <dt>어린이회원 <th:block th:text="${#strings.isEmpty(data.onepassEncodeData)} ? '가입' : '연동'"></th:block>이 완료되었습니다.</dt>
                        <dd>지금 바로 환경교육포털을 이용해보세요.</dd>
                    </dl>
                    <dl th:if="${data.type == 'I'}">
                        <dt>기관 회원<th:block th:text="${#strings.isEmpty(data.onepassEncodeData)} ? '가입' : '연동'"></th:block> 신청이 완료되었습니다. <br> 개인회원 권한으로 이용하실 수 있으며, 기관회원 권한은 관리자 승인 후 이용하실 수 있습니다.</dt>
                        <dd>(기관회원 승인 검토 과정은 2~3일 정도 소요되며, 승인 결과는 회원님의 이메일로 발송됩니다.)</dd>
                    </dl>
                    <div class="btn-inner">
                        <button type="button" class="btn-large btn-green" onclick="login()">로그인</button>
                    </div>
                </div>
            </section>
            <script th:inline="javascript">
                function login() {
                    var returnUrl = /*[[${data.returnUrl}]]*/"";
                    if(returnUrl != null && returnUrl != ""){
                        location.href = "/login.html?returnUrl=" + returnUrl;
                    }else{
                        location.href = "/login.html";
                    }
                }
            </script>
        </th:block>
    </body>
</html>