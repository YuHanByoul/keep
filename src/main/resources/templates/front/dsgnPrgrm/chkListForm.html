<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
    layout:decorator="layout/front/nolnbSubLayout" >
<body>
    <div layout:fragment="content">
    <form id="chkListForm" name="chkListForm" th:action="@{/front/dsgnPrgrm/aplyCmptnForm.html}" method="post">
        <input type="hidden"  id="prgrmid" name="prgrmid" th:value="${chkListInfo.prgrmid}" />
        <input type="hidden"  id="prgrmid" name="prgrmid" th:value="${chkListInfo.chklstid}" />
        <input type="hidden"  id="prgrmid" name="prgrmid" th:value="${chkListInfo.operFrmCd}" />

        <!-- content -->
        <div class="steps">
            <ol>
                <li>
                    <div class="steps-inner">
                        <span>01</span>
                        <strong>약관동의</strong>
                    </div>
                </li>
                <li>
                    <div class="steps-inner">
                        <span>02</span>
                        <strong>신청정보 확인 및 <br class="pc-only"> 증빙자료 등록</strong>
                    </div>
                </li>
                <li class="active" title="현재 단계" aria-current="step">
                    <div class="steps-inner">
                        <span>03</span>
                        <strong>프로그램 정보 작성</strong>
                    </div>
                </li>
                <li>
                    <div class="steps-inner">
                        <span>04</span>
                        <strong>신청완료</strong>
                    </div>
                </li>
            </ol>
        </div>


        <div class="row row-section">
            <div class="col col-small">
                <div class="sticky-navigation">
                    <strong class="tit">프로그램 정보 항목</strong>
                    <div class="sticky-steps">
                        <ul>
                            <li><a th:href="@{/front/dsgnPrgrm/prgrmDstnctnForm.html?prgrmid=}+${chkListInfo.prgrmid}" >프로그램 우수성</a></li>
                            <li><a th:href="@{/front/dsgnPrgrm/prgrmOperMngForm.html?prgrmid=}+${chkListInfo.prgrmid}" >프로그램 운영관리</a></li>
                            <li><a th:href="@{/front/dsgnPrgrm/prgrmEvlForm.html?prgrmid=}+${chkListInfo.prgrmid}" >프로그램 평가</a></li>
                            <li><a th:href="@{/front/dsgnPrgrm/ldrQlfcForm.html?prgrmid=}+${chkListInfo.prgrmid}" >지도자의 자격 및 배치</a></li>
                            <li><a th:href="@{/front/dsgnPrgrm/sftyMngForm.html?prgrmid=}+${chkListInfo.prgrmid}" >안전관리</a></li>
                            <li class="active"><a th:href="@{/front/dsgnPrgrm/chkListForm.html?prgrmid=}+${chkListInfo.prgrmid}" >체크리스트</a></li>
                        </ul>
                        <div class="btn-wrap">
                            <div class="center">
                                <button type="button" class="btn-large btn-gray"  onclick="doSave()">중간저장</button>
                                <button type="button" class="btn-large btn-green" onclick="goNext()">다음</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="checkList" class="col col-wide">
<!--
                <div class="table-caption mt0">
                    <div class="left">
                        <h3 class="sub-title">안전관리 점검([[${chkListInfo.operFrmCdNm}]])</h3>
                        <h4 class="dot-title">안전관리</h4>
                    </div>
                    <div class="right">
                        <p>총점 <b class="fc-blue">17</b> 건/ 17점</p>
                    </div>
                </div>


                <div class="table-col table-layout-auto  table-col-scroll">
                    <table>
                        <caption>안전관리 - 번호, 내용, 배점, 예, 아니오</caption>
                        <colgroup>
                            <col style="width:6%;">
                            <col>
                            <col style="width:85px;">
                            <col style="width:75px;">
                            <col style="width:75px;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">번호</th>
                                <th scope="col">내용</th>
                                <th scope="col">배점</th>
                                <th scope="col">예</th>
                                <th scope="col">아니오</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="tr-survey">
                                <td>1</td>
                                <td class="al">안전관리 운영지침이 잘 수립되어 있으며 점검일지 등이 구비되어 있다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>2</td>
                                <td class="al">안전관리에 대한 지도자 역할분담이 적절하다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>3</td>
                                <td class="al">안전장비(소화기, 구급상자, 자동심장 제세동기 등)의 구비 및 관리가 적절하다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>4</td>
                                <td class="al">환경교육자원(교구 및 기자재)의 정확한 숙지 및 그에 대한 안전대비가 적절하다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>5</td>
                                <td class="al">참여자들의 복장 및 건강상 요·주의를 사전에 파악하고, 당일 컨디션을 확인하고 있다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>6</td>
                                <td class="al">비상상황 시 인력배치가 체계적으로 잘 분담되어 있고 응급처치가 가능한 지도자가 배치되어 있다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>7</td>
                                <td class="al">응급전화번호 및 비상연락망 등이 잘 관리되어 있다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>8</td>
                                <td class="al">계획한 인솔교사의 참관을 확인하고 각 인솔교사의 업무 및 연락처를 숙지하고 있다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>9</td>
                                <td class="al">기후 및 실외 환경(대기질, 진드기 및 뱀, 벌 등의 유해동물)에 대한 안전대비가 적절하다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>10</td>
                                <td class="al">프로그램 진행시 발생 가능한 문제에 대한 사전 확인과 대처가 준비되어 있다.</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-caption">
                    <div class="left">
                        <h4 class="dot-title">활동공간관리</h4>
                    </div>
                </div>


                <div class="table-col table-layout-auto  table-col-scroll">
                    <table>
                        <caption>활동공간관리 - 번호, 내용, 배점, 예, 아니오</caption>
                        <colgroup>
                            <col style="width:6%;">
                            <col>
                            <col style="width:85px;">
                            <col style="width:75px;">
                            <col style="width:75px;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">번호</th>
                                <th scope="col">내용</th>
                                <th scope="col">배점</th>
                                <th scope="col">예</th>
                                <th scope="col">아니오</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="tr-survey">
                                <td>1</td>
                                <td class="al">활동장소가 참여자와 프로그램을 진행하기에 적합한 공간으로 구성되어 있습니까?</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>2</td>
                                <td class="al">실외프로그램 진행을 위한 이동경로(비상대피로 포함) 및 시설물 관리계획이 적절합니까?</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>3</td>
                                <td class="al">화장실과 세면대 등을 포함한 활동 공간 위생상태가 적절하게 관리되어 있습니까?</td>
                                <td>2</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>4</td>
                                <td class="al">숙박시설에 대한 안전관리가 적절하며 점검 결과가 잘 구비되어 있습니까?</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>5</td>
                                <td class="al">쾌적한 숙박공간이 확보되어 있으며, 야간생활 담당자가 지정되어 있습니까?</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-caption">
                    <div class="left">
                        <h4 class="dot-title">안전교육</h4>
                    </div>
                </div>

                <div class="table-col table-layout-auto  table-col-scroll">
                    <table>
                        <caption>안전교육 - 번호, 내용, 배점, 예, 아니오</caption>
                        <colgroup>
                            <col style="width:6%;">
                            <col>
                            <col style="width:85px;">
                            <col style="width:75px;">
                            <col style="width:75px;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">번호</th>
                                <th scope="col">내용</th>
                                <th scope="col">배점</th>
                                <th scope="col">예</th>
                                <th scope="col">아니오</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="tr-survey">
                                <td>1</td>
                                <td class="al">지도자 대상 안전교육(위급상황대비교육, 소방안전 관리교육 등)이 적합하게 이루어지고 있습니까?</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                            <tr class="tr-survey">
                                <td>2</td>
                                <td class="al">참여자 대상 안전교육(안전수칙 및 실외코스설명 등)이 적합하게 이루어지고 있습니까?</td>
                                <td>1</td>
                                <td><label class="inp"><input type="radio" title="예"></label></td>
                                <td><label class="inp"><input type="radio" title="아니오"></label></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
 -->
                <div class="mo-only">
                    <div class="btn-wrap">
                        <div class="center">
                            <button type="button" class="btn-medium btn-gray">중간저장</button>
                        </div>
                    </div>
                    <div class="btn-wrap">
                        <div class="center">
                            <button type="button" class="btn-medium btn-gray">이전</button>
                            <button type="button" class="btn-medium btn-green">다음</button>
                        </div>
                    </div>
                </div>


            </div>
        </div>
        </form>
        <!-- //content -->
        <script th:inline="javascript">
        var insertUrl = "/front/dsgnPrgrm/insertChkListForm.do";
        var updateUrl = "/front/dsgnPrgrm/updateChkListForm.do";

        var qitemList = /*[[${qitemList}]]*/null;

        function setChkList(){
        	var list = qitemList;
        	var html="";

        	for(var item of list){
        		debugger;
        		html=
        			`
            		<div class="table-caption mt0">
                        <div class="left">
                            <h3 class="sub-title"></h3>
                            <h4 class="dot-title"></h4>
                        </div>
                        <div class="right">
                            <p>총점 <b class="fc-blue">17</b> 건/ 17점</p>
                        </div>
                    </div>
        			`
        			$("#checkList").append(html);
        	}
        }

        function validate(){

            $("#chkListForm").validate({
                ignore: [],
                rules: {
                    title       : { required: true , maxlength:200  }
                    ,cntnts      : { required: true , maxlength:4000}
                    ,bbs_clid    : { required: true }
                 },
                 messages: {
                    title       : { required: "게시판명을 입력해 주십시오."  , maxlength : "게시판 제목은 200자를 넘을 수 없습니다."  }
                    ,cntnts      : { required: "게시글 내용을 입력해 주십시오." , maxlength: "게시판 내용은 4000자를 넘을 수 없습니다." }
                    ,bbs_clid    : { required:"게시글 분류를 선택해주십시오 "}
                 }
            });

        }

        function goPrev(){
            document.dstnctnForm.action = "/front/dsgnPrgrm/evlForm.html";    //평가
            $("#chkListForm").submit();
        }

        function goNext(){
            if($("#chkListForm").valid() == false) return;
            doSave();

        }

        function doSave(){

            if(!confirm("저장하시겠습니까?")) return;

            var data =  $("#chkListForm").serialize() ;

//             $.ajax({
//                 url : insertPstUrl,
//                 type: 'POST',
//                 cache : false,
//                 dataType: 'json',
//                 data : data,
//                 success : function (data){
//                     if(data.result=="success"){
//                         alert("등록이 완료 되었습니다.");
//                         goBbsMain();
//                     }else{
//                         alert("등록중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
//                     }
//                 },
//                 error : function (error){
//                 }
//             });

            document.chkListForm.action = "/front/dsgnPrgrm/aplyCmptnForm.html";    //신청완료
            $("#chkListForm").submit();
        }

        $(function() {
        	setChkList();
        });

        </script>
    </div>

</body>
</html>