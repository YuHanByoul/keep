<script type="text/javascript">

	function logout(){
		var f = document.logout_form;
		f.submit();
	}
	
	function changeRole(role){
		location.href = "/cmm/changeRole.do?afterRoleid=" + role;
	}
	
	function toggleLogoutLayer(){
		$('#logoutLayer').toggleClass('open');
	}
	
</script>
<ul class="pull-left" id="left-nav">
	<li class="hidden-lg hidden-md hidden-sm">
		<div class="logo-mob clearfix">
			<h2><span onclick="location.href='/'">HIJUMP</span></h2>
		</div>
	</li>
</ul>
<div class="pull-right">
	<ul id="mini-nav" class="clearfix">
		<th:block th:if="${#lists.size(session.user.authorities)} > 1">
		<li class="list-box dropdown">
			<select class="form-control" onChange="changeRole(this.value)" style="width:150px;" id="currentRole">
			<th:block th:each="authority : ${session.user.authorities}">
				<th:block th:if="${session.SPRING_SECURITY_CONTEXT.getAuthentication().getAuthorities().iterator().next().getAuthority() == authority.roleid}">	
					<option th:value="${authority.roleid}" selected><th:block th:text="${authority.nm}" /></option>
				</th:block>
				<th:block th:unless="${session.SPRING_SECURITY_CONTEXT.getAuthentication().getAuthorities().iterator().next().getAuthority() == authority.roleid}">
					<option th:value="${authority.roleid}" ><th:block th:text="${authority.nm}" /></option>
				</th:block>
			</th:block>
			</select>
		</li>
		</th:block>
		<li id="logoutLayer" class="list-box dropdown">
			<a href="javascript:toggleLogoutLayer()" role="button" class="dropdown-toggle current-user" data-toggle="dropdown">
				<th:block th:text="${session.user.nm}"></th:block> <b class="caret"></b>
			</a>
			<ul class="dropdown-menu sm fadeInUp animated messages">
				<li class="dropdown-content">
					<a href="javascript:logout()">Logout</a>
				</li>
			</ul>
		</li>
		<li class="list-box hidden-lg hidden-md hidden-sm" id="mob-nav">
			<a href="#">
				<i class="fa fa-reorder"></i>
			</a>
		</li>
	</ul>
</div>
<form name="logout_form" th:action="@{/logout}" method="post" onsubmit="return false">
</form>