	<form class="search-filter search-filter-combination" id="searchForm" name="searchForm">
		<input type="hidden" id="pageNumber" name="pageNumber" value="1">
		<input type="hidden" id="rowPerPage" name="rowPerPage" value="10">
		<input type="hidden" id="ORDER_DIRECTION" name="orderDirection" value="asc">
		<input type="hidden" id="orderField" name="orderField" value="FNSH_PRCS_DT">
	</form>
	
	<div class="table-caption flex-nowrap">
		<h3 class="blind">수료정보</h3>
		<div class="left">
			<p>총 <b id="totalCount">0</b> 건</p>
		</div>
		<div class="right d-flex">
            <select class="sort-filter" title="글 보기 개수" id="selectRowPerPage" name="selectRowPerPage">
                <option value="10">10개</option>
                <option value="50">50개</option>
                <option value="100">100개</option>
            </select>
			<div><button type="button" class="btn-medium btn-outline-black" onclick="fnshInfo.changeRowPerPage()">보기</button></div>			
		</div>		
	</div>

	<div class="pc-only">
		<div class="table-col table-layout-auto">
			<table>
				<caption>수료정보 - 번호, 교육구분, 교육명, 분류, 수료번호, 수료일, 증명서</caption>
				<colgroup>
					<col>
					<col>
					<col style="width:27%;">
					<col>
					<col>
					<col>
				</colgroup>
				<thead>
					<tr>
						<th scope="col">번호</th>
						<th scope="col">교육구분</th>
						<th scope="col">교육명</th>
						<th scope="col">분류</th>
						<th scope="col">수료번호</th>
						<th scope="col">수료일</th>
						<th scope="col">증명서</th>
					</tr>
				</thead>
				<tbody id="pc-list-area">
				</tbody>
			</table>
		</div>
	</div>

	<div class="mo-only">
		<div class="table-list">
			<ul id="mo-list-area">
			</ul>
		</div>
	</div>

	<div class="pagination" aria-label="pagination">
	</div>
	
	<script th:inline="javascript">
    var fnshInfo = {
            listUrl: '/front/envLrnQlfcFnshHstry/selectFnshInfoList.do',
            detailUrl : '/front/envLrnQlfcFnshHstry/envLrnFnshInfoDetailForm.html',

            init(rowPerPage) {
            	if(rowPerPage != null) {
                    $("#rowPerPage").val(parseInt(rowPerPage));
                    $('#pageNumber').val('1');
            	}
                this.selectFnshInfoList();
            },

            moveToDetail() {
                if (this.userid == null) {
                    alert('로그인 후 이용하실 수 있습니다.');
                    return;
                }
                location.href = detailUrl;
            },
            
            changeRowPerPage() {
                $('#rowPerPage').val($('#selectRowPerPage').val());
                this.selectFnshInfoList();
            },

            selectFnshInfoList() {
                if (displayWorkProgress(true)) {
                    let formData = $('#searchForm').serializeArray();

                    $.ajax({
                        url: fnshInfo.listUrl,
                        cache: false,
                        dataType: 'json',
                        data: formData,
                        type: 'GET',
                        success: function (data) {
                        	fnshInfo.makeListHtml(data);
                            closeWorkProgress();
                        }
                    });
                }
            },

            makeListHtml(data) {
                var PC_listHtml = "";
                var MO_listHtml = "";
                if (data.list == null || data.list.length <= 0) {
                	PC_listHtml += `
   					<tr>
						<td class="nodata" colspan="7">
							<p><span class="icon icon-notice bg-black9"></span>수료정보가 없습니다.</p>
						</td>
					</tr>
                    `;
                    
                	MO_listHtml += `
       				<li class="block">
    					<div class="nodata">
    						<p><span class="icon icon-notice bg-black9"></span>수료정보가 없습니다.</p>
    					</div>
    				</li>
					`;                    
                } else {
                    data.list.forEach(function(item) {
                    	if(item.eduType == 'LMS'){
	                    	PC_listHtml += `
	        				<tr>
	    						<td>${item.rowNumber}</td>
	    						<td>${item.eduType}</td>
	    						<td><a href="${fnshInfo.detailUrl}?fnshid=${item.fnshid}&eduType=${item.eduType}" class="link ellipsis">${item.eduNm}</a></td>
	    						<td>${item.eduForm}</td>
	    						<td>${item.fnshRsltCode}</td>
	    						<td>${item.fnshPrcsDt}</td>
	    						<td><button type="button" class="btn-small btn-outline-blue" onclick="printCrtf('${item.fnshUrl}')">출력</button></td>
	    					</tr>
							`;
                    									
	                    	MO_listHtml += `
	           				<li class="block">
	        					<div class="tbody">
	        						<dl>
	        							<div class="list">
	        								<dt>번호</dt>
	        								<dd>${item.rowNumber}</dd>
	        							</div>
	        							<div class="list">
	        								<dt>교육구분</dt>
	        								<dd>${item.eduType}</dd>
	        							</div>
	        							<div class="list">
	        								<dt>교육명</dt>
	        								<dd><a href="${fnshInfo.detailUrl}?fnshid=${item.fnshid}&eduType=${item.eduType}" class="link ellipsis">${item.eduNm}</a></dd>
	        							</div>
	        							<div class="list">
	        								<dt>분류</dt>
	        								<dd>${item.eduForm}</dd>
	        							</div>
	        							<div class="list">
	        								<dt>수료번호</dt>
	        								<dd>${item.fnshRsltCode}</dd>
	        							</div>
	        							<div class="list">
	        								<dt>수료일</dt>
	        								<dd>${item.fnshPrcsDt}</dd>
	        							</div>
	        						</dl>
	        					</div>
	        					<div class="btn-wrap">
	        						<div class="center">
	        							<a href="${item.fnshUrl}" class="btn-small btn-outline-blue">증명서 출력</a>
	        						</div>
	        					</div>
	        				</li>
	       					`;
                    	}else{
	                    	PC_listHtml += `
	        				<tr>
	    						<td>${item.rowNumber}</td>
	    						<td>${item.eduType}</td>
	    						<td><a href="${fnshInfo.detailUrl}?fnshid=${item.fnshid}&eduType=${item.eduType}" class="link ellipsis">${item.eduNm}</a></td>
	    						<td>-</td>
	    						<td>${item.fnshRsltCode}</td>
	    						<td>${item.fnshPrcsDt}</td>
	    						<td>-</td>
	    					</tr>
							`;
							
	                    	MO_listHtml += `
		           				<li class="block">
		        					<div class="tbody">
		        						<dl>
		        							<div class="list">
		        								<dt>번호</dt>
		        								<dd>${item.rowNumber}</dd>
		        							</div>
		        							<div class="list">
		        								<dt>교육구분</dt>
		        								<dd>${item.eduType}</dd>
		        							</div>
		        							<div class="list">
		        								<dt>교육명</dt>
		        								<dd><a href="${fnshInfo.detailUrl}?fnshid=${item.fnshid}&eduType=${item.eduType}" class="link ellipsis">${item.eduNm}</a></dd>
		        							</div>
		        							<div class="list">
		        								<dt>분류</dt>
		        								<dd>-</dd>
		        							</div>
		        							<div class="list">
		        								<dt>수료번호</dt>
		        								<dd>${item.fnshRsltCode}</dd>
		        							</div>
		        							<div class="list">
		        								<dt>수료일</dt>
		        								<dd>${item.fnshPrcsDt}</dd>
		        							</div>
		        						</dl>
		        					</div>
		        				</li>
	       					`;							
                    	}
                    });
                }	
                $('#pc-list-area').html(PC_listHtml);
                $('#mo-list-area').html(MO_listHtml);
                $("#pagination").html(data.pagination);
                $("#totalCount").html(data.totalCount);
            }
        };

        $(function () {
        	fnshInfo.init();
        })
		
		function goPage(page) {
			$("#pageNumber").val(page);
			
			fnshInfo.selectFnshInfoList();
		}
        
        function printCrtf(url) {
			var urlTest1 = url.includes('https://');
			var urlTest2 = url.includes('http://');
			
			if(urlTest1 && urlTest2) {
				window.open(url);
			}else{
				window.open('http://'+url);
			}
        }
	</script>

</body>
</html>