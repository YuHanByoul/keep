<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout/front/subLayout">

<div layout:fragment="content">

	<!-- content -->
	<div class="card-section">
		<ul class="n3" id="card-list-area">
		</ul>
	</div>

	<!-- <div class="pagination" aria-label="pagination">
		<button type="button" class="first" title="처음"></button>
		<button type="button" class="prev" title="이전"></button>
		<button type="button" class="active" title="현재 페이지">1</button>
		<button type="button">2</button>
		<button type="button">3</button>
		<button type="button">4</button>
		<button type="button">5</button>
		<button type="button">6</button>
		<button type="button">7</button>
		<button type="button">8</button>
		<button type="button">9</button>
		<button type="button">10</button>
		<button type="button" class="next" title="다음"></button>
		<button type="button" class="last" title="마지막"></button>
	</div> -->
	<!-- //content -->

    <script th:inline="javascript">
    	var enveduFclt = {
            listUrl: '/front/enveduFlct/selectEnveduFcltList.do',

            init(rowPerPage) {
                this.selectEnveduFcltList();
            },

            selectEnveduFcltList() {
                if (displayWorkProgress(true)) {
                    $.ajax({
                        url: enveduFclt.listUrl,
                        cache: false,
                        dataType: 'json',
                        type: 'GET',
                        success: function (data) {
                        	enveduFclt.makeListHtml(data);
                            closeWorkProgress();
                        }
                    });
                }
            },

            makeListHtml(data) {
                var cardListHtml = "";
                if (data.list == null || data.list.length <= 0) {
                	$('#list-table').removeClass();
                    $('#list-table').addClass('nodata');
                	listHtml += `
                		<p><span class="icon icon-notice bg-black9"></span>등록된 환경교육시설이 없습니다.</p>
                    `;
                } else {
                    data.list.forEach(function(item) {
                    	cardListHtml += `
						<li>
							<div class="thumb">
								<img src="/downloadFileByFileid.do?fileid=${item.fileInfo.fileid}&file_idntfc_key=${item.fileInfo.fileIdntfcKey}" alt="">
							</div>
							<div class="cont mt0">
								<div class="part ellipsis">${item.instNm}</div>
								<a href="#" class="title ellipsis" data-ellipsis="2">${item.fcltNm}</a>
								<div class="fs-14 fc-black6">${item.addr}${item.addrDtl}</div>
							</div>
						</li>
   						`;						
                    });
                }	
                $('#card-list-area').html(cardListHtml);
            }
        };

        $(function () {
        	enveduFclt.init();
        })    
    </script>
    
</div>
</html>