<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
    xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" 
    layout:decorator="layout/front/subLayout" >
<body>
	<div layout:fragment="content">
		<!-- content -->
		<div class="table-view">
			<div class="table-view-header">
				<h3><span><th:block th:text="${book.ttl}"></th:block></span> </h3>
				<dl>
					<div class="list">
						<dt class="large">주제</dt>
						<dd><th:block th:text="${book.eduSbjctCdNm}"></th:block></dd>
					</div>
					<div class="list">
						<dt class="large">대상</dt>
						<dd><th:block th:text="${book.eduTrgtCdNm}"></th:block></dd>
					</div>
				</dl>
				<dl>
					<div class="list">
						<dt class="large">작가(글)</dt>
						<dd><th:block th:text="${book.writr}"></th:block></dd>
					</div>
					<div class="list">
						<dt class="large">작가(그림)</dt>
						<dd><th:block th:text="${book.writrPictr}"></th:block></dd>
					</div>
				</dl>
				<dl>
					<div class="list">
						<dt class="large">출판사</dt>
						<dd><th:block th:text="${book.plscmpn}"></th:block></dd>
					</div>
					<div class="list">
						<dt class="large">정가</dt>
						<dd><th:block th:text="${book.amt}"></th:block></dd>
					</div>
				</dl>
				<dl>
					<div class="list">
						<dt class="large">조회수</dt>
						<dd><th:block th:text="${book.hits}"></th:block></dd>
					</div>
				</dl>					
				<dl class="table-view-file">
					<div class="list">
						<dt class="large">첨부파일</dt>
						<dd>
							<div class="form-input-file">
								<ul>
								<th:block th:each="item : ${file}">
									<li class="file-block" th:data_ext="${item.ext}">
									  <span class="name">
										  <a th:href="|javascript:downloadFileByFileid('${item.fileid}','${item.fileIdntfcKey}')|">
										     <th:block th:text="${item.orginlFileNm}"></th:block>
										  </a>
									  </span>
									</li>
								</th:block>										
								</ul>
							</div>
						</dd>
					</div>
				</dl>
			</div>
			<div class="table-view-body">
				<div class="table-view-content">
					<div class="book-wrap">
						<div class="thumb"><img th:src="@{/downloadFileByFileid.do?fileid=}+${book.rprsImgFileid}+@{&file_idntfc_key=}+${book.fileIdntfcKey}" alt="" onerror="this.src='/images/front/bg/bg-noimage.png'; this.style.objectFit='none';"></div>
						<div class="book-section">
							<dl>
								<div class="list">
									<dt>주제</dt>
									<dd><th:block th:text="${book.eduSbjctCdNm}"></th:block></dd>
								</div>
								<div class="list">
									<dt>대상</dt>
									<dd><th:block th:text="${book.eduTrgtCdNm}"></dd>
								</div>
								<div class="list">
									<dt>작가(글)</dt>
									<dd><th:block th:text="${book.writr}"></th:block></dd>
								</div>
								<div class="list">
									<dt>작가(그림)</dt>
									<dd><th:block th:text="${book.writrPictr}"></th:block></dd>
								</div>
								<div class="list">
									<dt>출판사</dt>
									<dd><th:block th:text="${book.plscmpn}"></th:block></dd>
								</div>
								<div class="list">
									<dt>정가</dt>
									<dd><th:block th:text="${book.amt}"></th:block></dd>
								</div>
							</dl>
						</div>
					</div>
					<p><th:block th:utext="${book.cn}"></th:block></p>
				</div>
				
	            <div class="opentype" th:if="${@koglLicense.getInfo(book.cpyrhtCd)}">
	                <a th:if="${@koglLicense.getInfo(book.cpyrhtCd)}" th:href="${@koglLicense.getInfo(book.cpyrhtCd).link}" target="_blank" title="새 창">
	                    <div class="thumb">
	                        <img th:src="${@koglLicense.getInfo(book.cpyrhtCd).imageSrc}" alt=""/>
	                    </div>
	                    <p><th:block th:utext="${@koglLicense.getInfo(book.cpyrhtCd).desc}"> </th:block></p>
	                </a>
	            </div>
								
			</div>

			<div class="btn-wrap">
				<div class="center">
					<!-- <button type="button" class="btn-medium btn-gray">삭제</button>
					<button type="button" class="btn-medium btn-gray">수정</button> -->
					<button type="button" class="btn-medium btn-gray" onclick="moveToList();">목록</button>
				</div>
			</div>

			<div class="page-navigation">
				<th:block th:if="${book.beforeBookid} != null">
					<a href="javascript:beforePage()">
						<dl>
							<dt>이전글</dt>
							<dd><span class="ellipsis"><th:block th:text="${book.beforeBookTtl}"></th:block></span></dd>
						</dl>
					</a>
				</th:block>						
				
				<th:block th:if="${book.nextBookid} != null">
					<a href="javascript:nextPage()">
						<dl>
							<dt>다음글</dt>
							<dd><span class="ellipsis"><th:block th:text="${book.nextBookTtl}"></th:block></span></dd>
						</dl>
					</a>
				</th:block>					
			</div>
		</div>
		<!-- //content -->
		
		<form id="searchBackToListForm" name="searchBackToListForm" action="" onsubmit="return false;">
		  <input type="hidden"  name="searchType"           id="searchType"         th:value="${params.searchType}">
 		  <input type="hidden"  name="searchKeyword"        id="searchKeyword"      th:value="${params.searchKeyword}">
		  <input type="hidden"  name="searchType2"          id="searchType2"        th:value="${params.searchType2}">
		  <input type="hidden"  name="searchKeyword2"       id="searchKeyword2"     th:value="${params.searchKeyword2}">
		  <input type="hidden"  name="searchEduTrgtCd"      id="searchEduTrgtCd"    th:value="${params.searchEduTrgtCd}">
		  <input type="hidden"  name="searchManinEduSbjctCd"id="searchEduSbjctCd_1" th:value="${params.searchManinEduSbjctCd}">
		  <input type="hidden"  name="searchMdleEduSbjctCd" id="searchEduSbjctCd_2" th:value="${params.searchMdleEduSbjctCd}">
          <input type="hidden"  name="pageNumber"           id="pageNumber"         th:value="${params.pageNumber}" >
		</form>
		
		<script th:inline="javascript">
			var beforeBookid = /*[[${book.beforeBookid}]]*/ null;
			var nextBookid = /*[[${book.nextBookid}]]*/  null;
			
			function beforePage() {
				location.href = "/front/book/bookDetailForm.html?bookid="+beforeBookid
			}
			
			function nextPage() {
				location.href = "/front/book/bookDetailForm.html?bookid="+nextBookid
			}
			
		   function  moveToList(){
	            //location.href = '/front/book/bookListForm.html';
		       var f = document.searchBackToListForm;
		        f.action = '/front/book/bookListForm.html';
		       f.submit();
		   }
		</script>
	</div>

</body>
</html>