<div class="layer-header">
    <strong class="tit">후기 작성</strong>
    <button type="button" class="btn-layer-close" title="레이어팝업 닫기" data-layer-close=""></button>
</div>
<div class="layer-content">

    <p class="fs-16 fc-black6">환경교육시설의 <b class="fc-green">후기</b> 및 <b class="fc-green"> 만족도 평가</b>를 남겨주세요.</p>

    <div class="form-group mt15 ">
        <dl>
            <dt class="fc-black3"><b>별점등록</b>(필수)</dt>
            <dd>
                <div class="rating-star-wrap">
                    <div class="rating-star-inner">
                        <div class="rating-star">
                            <input type="radio" name="rating" value="5" id="rating5-1" disabled="" class="blind"  th:checked = "${mypageEnvReqst.rvwScr eq 5}"><label for="rating5-1"><span class="blind">매우 만족</span></label>
                            <input type="radio" name="rating" value="4" id="rating4-1" disabled="" class="blind"  th:checked = "${mypageEnvReqst.rvwScr eq 4}"><label for="rating4-1"><span class="blind">만족</span></label>
                            <input type="radio" name="rating" value="3" id="rating3-1" disabled="" class="blind"  th:checked = "${mypageEnvReqst.rvwScr eq 3}"><label for="rating3-1"><span class="blind">보통</span></label>
                            <input type="radio" name="rating" value="2" id="rating2-1" disabled="" class="blind"  th:checked = "${mypageEnvReqst.rvwScr eq 2}"><label for="rating2-1"><span class="blind">불만족</span></label>
                            <input type="radio" name="rating" value="1" id="rating1-1" disabled="" class="blind"  th:checked = "${mypageEnvReqst.rvwScr eq 1}"><label for="rating1-1"><span class="blind">매우 불만족</span></label>
                        </div>
                    </div>
                    
                    <div class="rating-feedback" id="ratingDescription">
                       <th:block th:if = "${mypageEnvReqst.rvwScr eq 5}" th:text="'5점 (매우 만족)'"></th:block>
                       <th:block th:if = "${mypageEnvReqst.rvwScr eq 4}" th:text="'4점 (만족)'"></th:block>
                       <th:block th:if = "${mypageEnvReqst.rvwScr eq 3}" th:text="'3점 (보통)'"></th:block>
                       <th:block th:if = "${mypageEnvReqst.rvwScr eq 2}" th:text="'2점 (불만족)'"></th:block>
                       <th:block th:if = "${mypageEnvReqst.rvwScr eq 1}" th:text="'1점 (매우 불만족)'"></th:block>
                    </div>
                    
                </div>
            </dd>
        </dl>
        <dl>
            <dt class="fc-black3"><b>기타의견</b>(필수)</dt>
            <dd>
                <textarea placeholder="내용을 입력해주세요." id="rvwCn" name="rvwCn" readonly="" th:utext="${mypageEnvReqst.rvwCn}" title="기타의견 입력"></textarea>
                <div class="check-wrap j-end">
                    <div class="size"><span id="textLength" th:utext="${#strings.length(mypageEnvReqst.rvwCn)}">125</span> / 1,000자</div>
                </div>
            </dd>
        </dl>
    </div>
    <div class="box-desc-list bg7 mt20 p20">
        <p class="fs-14">작성하신 후기는 모든 사용자에게 공개됩니다.</p>
    </div>
</div>
<div class="layer-footer">
    <div class="btn-wrap">
        <div class="center">
            <button type="button" class="btn-medium btn-gray" onclick="fn_deleteRvw();">삭제</button>
            <button type="button" class="btn-medium btn-gray" data-layer-close="">닫기</button>
        </div>
    </div>
</div>

<script th:inline="javascript">

    $(function(){})
    
    function fn_deleteRvw(){

        if(!confirm("작성한 후기를 삭제 하시겠습니까?"))return;
        
        var param = {aplyid : /*[[${aplyid}]]*/null};
        if (displayWorkProgress(true)) {
            $.ajax({
                url: '/front/mypage/mypageEnvReqst/deleteRvw.do',
                cache: false,
                dataType: 'json',
                data: param,
                type: 'POST',
                success: function (data) {
                    alert(data.msg);
                    layerPopup.close({target:'lendHistoryPopup'});
                    selectEnvReqstList();
                    closeWorkProgress();
                }
            });
        }

    }
</script>