<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="example/layout/exampleLayout"
>
<head>
<meta charset="utf-8" />
<body>
	<div layout:fragment="content">
		
		<div class="row no-gutter">
            <div class="col-md-12 col-sm-12 col-xs-12">
              <div class="panel panel-default">
                <div class="panel-heading">
                   <h4>grid</h4><br/>
                </div>
                <div class="panel-body">    
                    <font color="red"> * <strong>(개발시 반드시 적용!!)</strong> grid에 뿌리는 데이터를 받아올때 xss방지를 위해 escapeGridData함수로 반드시 씌워야함. ex) escapeGridData(response.list)</font>
                    <br><br>
					<table id="jsGrid"></table>
					<br><br>
					* Tip) 셀을 노출하지 않으려면 visible:false, 셀내부의 버튼에 이벤트를 주어 rowclick이벤트와 무관하게 동작하게 하고 싶을때는 itemTemplate속성을 사용하도록 한다.
					<br><br>
					<div class="colorscripter-code" style="color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#272727;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#f0f0f0;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">{&nbsp;<span style="color:#4be6fa">name</span>:&nbsp;<span style="color:#ffd500">'inqryid'</span>,&nbsp;visible:&nbsp;<span style="color:#c10aff">false</span>&nbsp;},</div><div style="padding:0 6px; white-space:pre; line-height:130%">{&nbsp;title:<span style="color:#ffd500">'답변자'</span>,&nbsp;<span style="color:#4be6fa">name</span>:&nbsp;<span style="color:#ffd500">'opetr_nm'</span>,&nbsp;type:&nbsp;<span style="color:#ffd500">"text"</span>,&nbsp;itemTemplate:&nbsp;<span style="color:#ff3399">function</span>(value,&nbsp;item)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;$(<span style="color:#ffd500">"&lt;button&gt;"</span>).text(<span style="color:#ffd500">"Click"</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.on(<span style="color:#ffd500">"click"</span>,&nbsp;<span style="color:#ff3399">function</span>()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">alert</span>(<span style="color:#ffd500">"button&nbsp;clicked"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;<span style="color:#c10aff">false</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div></td></tr></table></div>
					
					<link type="text/css" rel="stylesheet" href="/js/common/jsgrid-master/dist/jsgrid.min.css" />
					<link type="text/css" rel="stylesheet" href="/js/common/jsgrid-master/dist/jsgrid-theme.css" />
			
					<script type="text/javascript" src="/js/common/jsgrid-master/dist/jsgrid.min.js"></script>
					<script>
					
					var codeGrpListUrl = "/mng/code/codeGrpList.do";
					
					$(function(){
				        $("#jsGrid").jsGrid({
				            height: "auto",
				            width: "100%",
				            autoload: true,
				            sorting: true,
				            paging: true,
				            pagerContainer: "#listPager",
				            pagerFormat: "{first} {prev} {pages} {next} {last}",
				            pagePrevText: "이전",
				            pageNextText: "다음",
				            pageFirstText: "< 처음 ㅣ",
				            pageLastText: "ㅣ 마지막 >",
				            noDataContent: "데이터가 없습니다.",
				            pageSize: 10,
				            pageButtonCount: 10,
				            pageLoading: true,
				            pageIndex: 1,
				            
				            controller: {
				                loadData: function (filter) {
				                    var data = $.Deferred();
				                    
				                    var params = {
				                            //"searchType": $('#searchType').val(),
				                            //"searchKeyword": $('#searchKeyword').val(),
				                            "pageNumber": filter.pageIndex,
				                            "rowPerPage": filter.pageSize,
				                            "orderField": filter.sortField,
				                            "orderDirection": filter.sortOrder
				                    }
				                    
				                    if(filter.sortField == undefined){
				                        params.orderField = "UPDT_DT";
				                    }
				                    
				                    $.ajax({
				                      type: "GET",
				                      contentType: "application/json; charset=utf-8",
				                      url: codeGrpListUrl,
				                      data: params,
				                      dataType: "json"
				                    }).done(function(response){
				                        var da = {
				                                data : escapeGridData(response.list),
				                                itemsCount : response.totalCount
				                            };
				                      data.resolve(da);
				                    });
				                    
				                    return data.promise();
				                },
				            },
				            fields: [ 
				                { title:'번호', name: 'rowNumber', type: "number", width:"10%", align:"center", sorting: false },
				                { title:'코드그룹ID', name: 'cdgrpid', type: "text", width:"10%", align:"center", key: true, validate: "required" },
				                { title:'이름', name: 'cdgrpNm', type: "text" ,width:"40%"},
				                { title:'사용여부', name: 'useYn', type: "text", width:"10%", align:"center"}
				            ],
				            rowClick: function(args) {
				                
				            }
				        });
				    });
				
					</script>
					
                </div>
            </div>
        </div>
       </div>
	</div>
</body>
</html>