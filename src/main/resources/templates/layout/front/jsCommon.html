<!-- layerpopup -->
<div class="layer-popup layer-large" data-layer-id="layer-popup01">
    <div class="layer-dimmed" title="레이어팝업 닫기"></div>
    <div class="layer-wrap">
        <div class="layer-header">
            <strong class="tit">비밀번호 변경 안내</strong>
            <button type="button" class="btn-layer-close" title="레이어팝업 닫기" data-layer-close></button>
        </div>
        <div class="layer-content">
            <div class="thumb-info">
                <span class="icon icon-info-password" title=""></span>
                <dl>
                    <dt>회원님께서는 <span class="fc-green">90일</span>동안 비밀번호를 변경하지 않으셨습니다!</dt>
                    <dd>개인정보 보호를 위해 3개월마다 비밀번호를 변경해주세요.</dd>
                </dl>
            </div>
        </div>
        <div class="layer-footer">
            <div class="btn-wrap">
                <div class="center">
                    <button type="button" class="btn-medium btn-gray" data-layer-close>다음에 변경하기</button>
                    <button type="button" class="btn-medium btn-green" onclick="changePswdNow()">지금 변경하기</button>
                </div>
            </div>
            <div class="layer-cookie"><button type="button" class="no-display" onclick="hidePswdChangeLayer()">2주동안 안보이기</button></div>
        </div>
    </div>
</div>
<!-- //layerpopup -->
<span id="layerPopupSapn"></span>
<iframe id="hiddenFrame" name="hiddenFrame" style="display:none" width="0" height="0" frameborder="0" title="ifrm"></iframe>
<form id="hiddenForm" name="hiddenForm" style="display:none" target="hiddenFrame"></form>

<script type="text/javascript" charset="utf-8" src="/js/front/jquery-3.6.3.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/common/jquery/jquery.form.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/common/dynatree/jquery.cookie.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/common/fileDownload/jquery.fileDownload.js"></script>
<script type="text/javascript" src="/js/common/common_front.js"></script>
<script type="text/javascript" src="/js/common/common.js"></script>
<script type="text/javascript" src="/js/common/common_util.js"></script>
<script type="text/javascript" src="/js/validator/jquery.validate.js"></script>    
<script type="text/javascript" src="/js/validator/jquery.validate.add.js"></script>    
<script type="text/javascript" src="/js/validator/jquery.validate.setting2.js"></script>
<script type="text/javascript" src="/js/front/popup/commonPopup.js"></script>
<script type="text/javascript" src="/js/front/ui-script.js"></script>

<script type="text/javascript">
jQuery(function(){
	
	jQuery("form").each(function(){
		if(!jQuery(this).children("*").is("#mkey")){
			jQuery("<input>",{type:'hidden',name:'mkey',id:'mkey',value:'[[${#request.getAttribute('mkey')}]]'}).appendTo(this);
		}
	});
	
	if('[[${#request.getAttribute('popupYn')}]]'=='Y'){
		 var menuid =  '[[${#request.getAttribute('menuid')}]]';
		 var siteid =  '[[${#request.getAttribute('siteid')}]]';
		 getDataForCommnonPopup(siteid, menuid);
	}
});

</script>
<script th:inline="javascript">
    function hidePswdChangeLayer() {
        jQuery.cookie('hidePswdChangeLayer', 'Y', {expires:14, path: '/', domain: /*[[${T(com.kbrainc.plum.rte.util.CommonUtil).serverCookieDomain}]]*/ ""});
        layerPopup.close({target:'layer-popup01'});
    }
    
    function changePswdNow() {
        var currentUrl = /*[[${T(com.kbrainc.plum.rte.util.StringUtil).removePwdParameterURL(#request.getRequestURL(), #request.getQueryString())}]]*/'';
        location.href="/front/myInfo/pswdUpdate.html?returnUrl=" + currentUrl;
    }
    
    jQuery(document).ready(function(){      
        if(jQuery.cookie != null)
        {      
            if([[${param.pwd}]] && !(jQuery.cookie('hidePswdChangeLayer') && jQuery.cookie('hidePswdChangeLayer') != 'undefined' && jQuery.cookie('hidePswdChangeLayer') != 'null')){
                layerPopup.open({target:'layer-popup01'});
            }
        }
        /*[# th:if="${param.alertMsg}"]*/
            alert([[${T(com.kbrainc.plum.rte.util.StringUtil).base64DecodeFromUrlSafeString(param.alertMsg)}]]);
        /*[/]*/
    });
    
</script>