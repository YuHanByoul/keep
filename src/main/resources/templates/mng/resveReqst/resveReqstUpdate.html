<form id="resveReqstUpdate" >
    <input type="hidden" id="aplyid" name="aplyid" th:value="${resveReqst.aplyid}">
    <!--탭영역 start --> 
    <div class="tab-content tabs p-t-20">

        <div class="tab-pane active" id="agencyInfo" role="tabpanel">
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>예약정보</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="mb-2 row align-items-end">
                    <div class="mb-2 row">
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>운영기관</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.instNm}"/></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>시설</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.fcltNm}"/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-2 row">
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>공간</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.spceNm}"/></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>이용일(시)</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static">
                                        <th:block th:if ="${#dates.format(resveReqst.bgngDt, 'yyyy-MM-dd')} != ${#dates.format(resveReqst.endDt, 'yyyy-MM-dd')}">
                                            <span th:text="${#dates.format(resveReqst.bgngDt, 'yyyy-MM-dd')} "></span> ~ <span th:text="${#dates.format(resveReqst.endDt, 'yyyy-MM-dd')} "></span>
                                        </th:block>
                                        <th:block th:if ="${#dates.format(resveReqst.bgngDt, 'yyyy-MM-dd')} == ${#dates.format(resveReqst.endDt, 'yyyy-MM-dd')}">
                                            <span th:text="${#dates.format(resveReqst.bgngDt, 'yyyy-MM-dd HH:mm')} "></span> ~ <span th:text="${#dates.format(resveReqst.endDt, 'HH:mm')} "></span>
                                        </th:block>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-2 row">
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>신청상태</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.aplySttsCdNm}"/></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>예약취소일시</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.cnclDt}"/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-2 row">
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>결제금액</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.amt}"/></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>결제상태</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.paySttus}"/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-2 row">
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>환불요청금액</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.rfndDmndAmt}"/></label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="mb-0 form-group row">
                                <label class="col-md-2 control-label"><span class="text-danger"> </span>환불요청일시</label>
                                <div class="col-md-10 form-control-static" style="text-align:left;">
                                    <label class="form-control-static"><th:block th:text="${resveReqst.rfndDmndDt}"/></label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>신청자 정보</strong></h3>
                <div class="card-block-small p-t-0">
                    <div class="mb-2 row align-items-end">
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>신청자 ID</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.acnt}"/></label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>이름/기관명</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.nm}"/> / <th:block th:text="${resveReqst.userInstNm}"/></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>회원유형</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.rolecdnm}"/></label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>기관유형</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.instTypeCdNm}"/></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>휴대전화</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.moblphon}"/></label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>이메일</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.eml}"/></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12">
                                <div class="mb-0 form-group required">
                                    <span class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>이용인원</strong></span>
                                    <div class="col-sm-12 row">
                                        <div class="col-sm-4">
                                            성인
                                            <input type="text" class="form-control-color" name="nopeAdult" id="nopeAdult" placeholder="성인" th:value="${resveReqst.nopeAdult}"/>
                                            명
                                        </div>
                                        <div class="col-sm-4">
                                            아동
                                            <input type="text" class="form-control-color" name="nopeChil" id="nopeChil" placeholder="아동" th:value="${resveReqst.nopeChil}"/>
                                            명
                                        </div>
                                        <div class="col-sm-4">
                                            유아
                                            <input type="text" class="form-control-color" name="nopeInfnt" id="nopeInfnt" placeholder="유아" th:value="${resveReqst.nopeInfnt}"/>
                                            명
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-group row m-b-0 required">
                                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="utztnPrps"><strong>이용 목적</strong></label>
                                <div class="col-sm-12">
                                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="utztnPrps" name="utztnPrps"><th:block th:text="${resveReqst.utztnPrps}"/></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>예약자 정보</strong></h3>
                <div class="card-block-small p-t-0">
                    <div class="mb-2 row align-items-end">
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>이름</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="aplcntNm" id="aplcntNm" th:value="${resveReqst.aplcntNm}"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>휴대전화</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="aplcntMoblphon" id="aplcntMoblphon" th:value="${resveReqst.aplcntMoblphon}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>이메일</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="aplcntEml" id="aplcntEml" th:value="${resveReqst.aplcntEml}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>입금 정보</strong></h3>
                <div class="card-block-small p-t-0">
                    <div class="mb-2 row align-items-end">
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>결제방법</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.stlmMthdCdNm}"/></label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="mb-0 form-group row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>입금계좌</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <label class="form-control-static"><th:block th:text="${resveReqst.bankCdNm}"/> <th:block th:text="${resveReqst.bacntNo}"/> <th:block th:text="${resveReqst.dpstrNm}"/></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>입금자명</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="pyrNm" id="pyrNm" th:value="${resveReqst.pyrNm}"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>입금금액</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="dpstAmt" id="dpstAmt" th:value="${resveReqst.dpstAmt}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>입금일</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="dpstDe" id="dpstDe" th:value="${resveReqst.dpstDe}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>환불 정보</strong></h3>
                <div class="card-block-small p-t-0">
                    <div class="mb-2 row align-items-end">
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                                <div class="mb-0 form-group required">
                                    <span class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>환불계좌</strong></span>
                                    <div class="col-sm-12 row">
                                        <div class="col-sm-4">
                                            <span kattr:select_code="rfndBankCd" grpCd="154" firstOptTxt="- 선택 -" th:attr="selectedCd=${resveReqst.rfndBankCd}" addClass="form-select form-select-sm form-control-sm" ></span>
                                        </div>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control form-control-sm" name="rfndBacnt" id="rfndBacnt" placeholder="환불계좌번호" th:value="${resveReqst.rfndBacnt}"/>
                                        </div>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control form-control-sm" name="rfndPyrNm" id="rfndPyrNm" placeholder="입금자" th:value="${resveReqst.rfndPyrNm}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6">
                                <div class="form-group col-md-12 row required">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>환불금액</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="rfndAmt" id="rfndAmt" th:value="${resveReqst.rfndAmt}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-2 row">
                            <div class="col-12 col-lg-6">
                                <div class="form-group  col-md-12 row">
                                    <label class="col-md-2 control-label"><span class="text-danger"> </span>환불일</label>
                                    <div class="col-md-10 form-control-static" style="text-align:left;">
                                        <input type="text" class="form-control form-control-sm" name="rfndDe" id="rfndDe" th:value="${resveReqst.rfndDe}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-block-small">
                <button type="button" class="btn btn-disabled m-r-5" onclick = "gridHelper2.toggleContent()" > 취소</button>
                <button type="button" class="btn btn-primary" onclick="fn_updateResveReqst()">저장</button>
            </div>
        </div>
     
    </div>
</form>

<script th:inline="javascript">

    // 데이터 submit
    function fn_updateResveReqst(){

        if(!($("#resveReqstUpdate").valid())) return;

        if(!confirm("저장하시겠습니까?")) return;

        let data =  $("#resveReqstUpdate").serialize() ;
        let tailStr = "&useYn="+($('#useYnChk').is(':checked'))?"Y":"N";
        let useYn = ( $('#useYnChk').is(':checked') )? "Y" : "N" ;
        // 지역
        // let rgnCdPoint = $('#addr').val().indexOf(' ');
        // let rgnCd = $('#addr').val().substr(0, rgnCdPoint);
        data = data+"&useYn="+useYn;

        if(displayWorkProgress()){
            $.ajax({
                url : "/mng/resveReqst/updateResveReqst.do",
                type: 'POST',
                cache : false,
                dataType: 'json',
                data : data,
                success : function (data){
                    if(data.result=="success"){
                        alert(data.msg);
                        gridHelper2.resetListContent();
                    }else{
                        alert(data.msg);
                    }
                    closeWorkProgress();
                }
            });
        }
    }
</script>

