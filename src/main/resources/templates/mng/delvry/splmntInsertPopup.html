<form id ="splmntInsertForm">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content type_2">
            <div class="modal-header">
                <h4 class="modal-title">보완요청</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card m-b-10">
                    <div class="card-block-small">
                        <div class="mb-0 form-group row required">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="popInput01"><strong>내용</strong></label>
                            <div class="col-12">
                                <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="요청내용을 입력해주세요." id="dmndCn" name="dmndCn"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary waves-effect waves-light" onclick="splmntInsert.onSplmntInsert();">저장</button>
            </div>
        </div>
    </div>
</form>

<script th:inline="javascript">
    var splmntInsert = {
        init: function() {
            this.setValid();
        }
        
        , registEvent: function() {
        }
        
        , setValid: function() {
            var validator = $("#splmntInsertForm").validate({
                rules: {
                    dmndCn: {required: true, maxlength: 30}
                }
                , messages: {
                    dmndCn: {required: "요청내용을 입력해주세요.", maxlength: "요청내용은 200자 이하여야 합니다."}
                }
            });
        } 
        
        , onSplmntInsert: function() {
            if(!($("#splmntInsertForm").valid())) return;
            var param = $("#splmntInsertForm").serialize();
            param += "&delvryAplyid=" + $("input[name='delvryAplyid']").val();
            
            if(displayWorkProgress()) {
                $.ajax({
                    url : "/mng/delvry/insertDelvryAplySplmnt.do",
                    type: "POST",
                    cache: false,
                    dataType: "json",
                    data: param,
                    success: function(response) {
                        if(response.result == "success") {
                            alert(response.msg);
                            splmntInsertModal.hide();
                            splmntGrid.resetListContent();
                        } else {
                            alert(response.msg);
                        }
                        closeWorkProgress();
                    }
                });
            }
        }
    };
    
    splmntInsert.init();
</script>