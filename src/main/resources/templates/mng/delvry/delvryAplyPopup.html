<div class="modal-dialog modal-xl" role="document">
    <div class="modal-content type_2">
        <div class="modal-header">
            <h4 class="modal-title">교부신청서</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true"></span>
            </button>
        </div>
        <div class="modal-body">
            <div class="card m-b-10">
                <div class="card-block-small">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>신청정보</strong></div>
                    <table class="table table-bordered td-wrap">
                        <colgroup>
                            <col style="width:18%">
                            <col style="width:32%">
                            <col style="width:18%">
                            <col style="width:32%">
                        </colgroup>
                        <tbody>
                        <tr>
                            <th class="text-center table-active">공모사업명</th>
                            <td class="v-middle" colspan="3" id="data00"></td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">프로그램명</th>
                            <td class="v-middle" colspan="3" id="data01"></td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">접수번호</th>
                            <td class="v-middle" colspan="3" id="data02"></td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">기관명</th>
                            <td class="v-middle" id="data03"></td>
                            <th class="text-center table-active">신청자</th>
                            <td class="v-middle" id="data04"></td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">사업기간</th>
                            <td class="v-middle" id="data05"></td>
                            <th class="text-center table-active">교부신청일</th>
                            <td class="v-middle" id="data06"></td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">지원신청금액(원)</th>
                            <td class="v-middle" id="data07"></td>
                            <th class="text-center table-active">은행명</th>
                            <td class="v-middle" id="data08"></td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">계좌번호</th>
                            <td class="v-middle" id="data09"></td>
                            <th class="text-center table-active">예금주</th>
                            <td class="v-middle" id="data10"></td>
                        </tr>
                        </tbody>
                    </table>

                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>산출내역서</strong></div>
                    <table class="table table-bordered td-wrap">
                        <colgroup>
                            <col style="width:80px">
                            <col>
                            <col>
                            <col>
                        </colgroup>
                        <thead>
                        <tr class="border-bottom-inverse">
                            <th class="text-center table-active">항목</th>
                            <th class="text-center table-active">세부항목</th>
                            <th class="text-center table-active">금액(원)</th>
                            <th class="text-center table-active">세부내역</th>
                        </tr>
                        </thead>
                        <tbody id="comput">
                        <!--
                        <tr>
                            <th class="text-center table-active">경비</th>
                            <td class="v-middle">물품구입비</td>
                            <td class="text-center">1,100,000</td>
                            <td class="v-middle">인쇄비(이슈칼럼 연재, 행사 포스터): 200,000, 기타 물품구입비 : 900,000</td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">경비</th>
                            <td class="v-middle">운영경비</td>
                            <td class="text-center">1,100,000</td>
                            <td class="v-middle">인쇄비(이슈칼럼 연재, 행사 포스터): 200,000, 기타 물품구입비 : 900,000</td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">경비</th>
                            <td class="v-middle">회의비</td>
                            <td class="text-center">1,100,000</td>
                            <td class="v-middle">인쇄비(이슈칼럼 연재, 행사 포스터): 200,000, 기타 물품구입비 : 900,000</td>
                        </tr>
                        <tr>
                            <th class="text-center table-active">경비</th>
                            <td class="v-middle">여비</td>
                            <td class="text-center">1,100,000</td>
                            <td class="v-middle">인쇄비(이슈칼럼 연재, 행사 포스터): 200,000, 기타 물품구입비 : 900,000</td>
                        </tr>
                        -->
                        </tbody>
                    </table>
                    <div class="pt-3 text-center">
                        <p>상기내용과 같이 지원사업 교부신청서를 제출합니다.</p>
                        <p>2023년  00월 00일</p>
                        <p>
                            신청자 : (대표자명)<span class="ms-4">(인)</span>
                            <img src="/images/mng/stamp.png" alt="stamp" style="margin-left:-20px">
                        </p>
                        <p>환경보전협회 귀하</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-inverse waves-effect waves-light" onclick="delvryAplyPopup.onPrint();">인쇄</button>
        </div>
    </div>
</div>

<script th:inline="javascript">
    var delvryAplyPopup = {
        init: function() {
            this.setData();
            this.registEvent();
        }
        
        , registEvent: function() {
            // TODO
        }
        
        , setData: function() {
            // 신청정보
            var aplyInfo = delvryAplyUpdate.delvryAplyInfo; 
            $("#data00").text($("#pcntstNm").text());
            $("#data01").text(aplyInfo.prgrmNm);
            $("#data02").text(aplyInfo.rcptno);
            $("#data03").text(aplyInfo.instNm);
            $("#data04").text(aplyInfo.aplcntNm);
            $("#data05").text(aplyInfo.bsnsBgngDe.split(" ")[0] + " ~ " + aplyInfo.bsnsEndDe.split(" ")[0]);
            $("#data06").text(aplyInfo.regDt);
            $("#data07").text(aplyInfo.totAmt);
            $("#data08").text(aplyInfo.bankCdNm);
            $("#data09").text(aplyInfo.bacntno);
            $("#data10").text(aplyInfo.dpstrNm);
            
            // 산출내역서
            var computList = delvryAplyUpdate.computList; 
            for(var i = 0, len = computList.length; i < len; i++) {
                var data = computList[i];
                $("#comput").append(this.getComputItem(data));
            }
        }
        
        , getComputItem: function(data) {
            var item = '<tr>';
            item += '<th class="text-center table-active">' + data.expitmUpprCdNm + '</th>';
            item += '<td class="v-middle">' + data.expitmCdNm + '</td>';
            item += '<td class="text-center">' + addComma3(data.amt) + '</td>';
            item += '<td class="v-middle">' + data.cn + '</td>';
            item += '</tr>';
            
            return item;
        }
        
        , onPrint: function() {
            alert("레포팅툴 연계");
        }
    };
    
    delvryAplyPopup.init();
</script>
