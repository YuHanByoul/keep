 <div class="card-header p-b-0">
    <ul class="nav nav-tabs  tabs" role="tablist">
        <th:block sec:authorize-url="/mng/qestnr/qestnrUpdateForm.html">
            <li class="nav-item">
                <a id="qestnrTab" class="nav-link active" data-bs-toggle="tab" href="#qestnrUpdate" role="tab"><strong>설문지정보</strong></a>
            </li>
        </th:block>
        <th:block sec:authorize-url="/mng/qestnr/qitemForm.html">
            <li class="nav-item">
                <a id="qitemTab" class="nav-link" data-bs-toggle="tab" href="#qitem" role="tab"><strong>문항정보</strong></a>
            </li>
        </th:block>
    </ul>
</div>
<div id="tabContent" class="tab-content tabs p-t-20">
</div>

<script th:inline="javascript">
    var qestnrDetail = {
        qestnrid: /*[[${param.qestnrid}]]*/,
        
        init: function() {
            this.setTab();
            this.registEvent();
        },
        
        setTab: function() {
            var tabFlag = false;
            if(tabFlag == false) {
                this.selectTab("qestnrTab");
                tabFlag = true;
            }
            if(tabFlag == false) {
                this.selectTab("qitemTab");
                tabFlag = true;
            }
        },
        
        registEvent: function() {
            var _this = this;
            $(".nav-tabs a").on("show.bs.tab", function(event) {
                var tabId = event.currentTarget.attributes.id.value;
                _this.selectTab(tabId);
            });
        },
        
        selectTab: function(tabId) {
            var uri; 
            if(tabId == "qestnrTab") {
                uri = "/mng/qestnr/qestnrUpdateForm.html";
            } else if(tabId == "qitemTab") {
                uri = "/mng/qestnr/qitemForm.html";
            }
            this.loadTabContent(uri + "?qestnrid=" + this.qestnrid);
            $("#" + tabId).parent().addClass("active");
        },
        
        loadTabContent: function(uri) {
            $.ajax({
                cache: false,
                url: uri, 
                type: "GET",
                async: "false",
                dataType: "html",
                success: function(result) { //요청이 성공했을때 실행되는 콜백 함수
                    $("#tabContent").html(result);
                    scrollIntoView("contentPanel");
                }
            });
        }
    };
    
    qestnrDetail.init();
</script>