<form id ="qitemInsertForm">
    <!-- <input type="hidden" name="qestnrid"> -->
    <!-- <input type="hidden" name="ordr" value="1">  -->
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>문항유형</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 row">
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="col-sm-12">
                        <th:block kattr:select_code="qitemTypeCd" grpCd="107" upprCd="0" firstOptTxt="" addClass="form-select form-select-sm form-control-sm"></th:block>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row required">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="oxTypeProblem"><strong>문항</strong></label>
            <div class="col-sm-12">
                <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="문항을 입력해주세요." id="cn" name="cn"></textarea>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="col-12">
                <input type="checkbox" class="js-single-small" name="useYn" id="useYn" checked/>
                <label for="oxTypeUseStatus" class="v-middle">문항 사용</label>
            </div>
        </div>
        <!--선택형-->
        <div class="col-12" id="qitemType107100">
            <div class="mb-2 form-group required row">
                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>보기수</strong></div>
                <div class="col-12">
                    <select name="exCnt107100" id="exCnt107100" class="form-select form-select-sm form-control-sm" onchange="qitemInsert.onChangeExCnt();">
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4" selected>4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                    </select>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071001">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071001"><strong>1번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071001" id="exCn1071001" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071002">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071002"><strong>2번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071002" id="exCn1071002" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071003">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071003"><strong>3번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071003" id="exCn1071003" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071004">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071004"><strong>4번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071004" id="exCn1071004" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row d-none" id="exRow1071005">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071005"><strong>5번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071005" id="exCn1071005" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row d-none" id="exRow1071006">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071006"><strong>6번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071006" id="exCn1071006" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-0 form-group row d-none" id="exRow1071007">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071007"><strong>7번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071007" id="exCn1071007" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
        </div>
        <!--//선택형-->
        <!--OX형-->
        <div class="col-12 d-none" id="qitemType107101">
            <div class="mb-2 form-group row">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071011"><strong>O</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn107101" id="exCn1071011" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-0 form-group row">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071012"><strong>X</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071012" id="exCn1071012" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
        </div>
        <!--//OX형-->
        <!--복수선택형-->
        <div class="col-12 d-none" id="qitemType107102">
            <div class="mb-2 form-group required row">
                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>보기수</strong></div>
                <div class="col-12">
                    <select name="exCnt107102" id="exCnt107102" class="form-select form-select-sm form-control-sm" onchange="qitemInsert.onChangeExCnt();">
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4" selected>4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                    </select>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071021">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071021"><strong>1번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071021" id="exCn1071021" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071022">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071022"><strong>2번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071022" id="exCn1071022" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071023">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071023"><strong>3번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071023" id="exCn1071023" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row" id="exRow1071024">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071024"><strong>4번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071024" id="exCn1071024" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row d-none" id="exRow1071025">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071025"><strong>5번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071025" id="exCn1071025" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-2 form-group row d-none" id="exRow1071026">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071026"><strong>6번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071026" id="exCn1071026" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
            <div class="mb-0 form-group row d-none" id="exRow1071027">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="exCn1071027"><strong>7번</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="exCn1071027" id="exCn1071027" placeholder="보기 내용을 입력해주세요."/>
                </div>
            </div>
        </div>
        <!--//복수선택형-->
        <!--척도형-->
        <div class="col-12 d-none" id="qitemType107103">
            <div class="mb-2 form-group required row">
                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>보기수</strong></div>
                <div class="col-12">
                    <select name="exCnt107103" id="exCnt107103" class="form-select form-select-sm form-control-sm" onchange="qitemInsert.onChangeExCnt();">
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5" selected>5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                    </select>
                </div>
            </div>

            <div class="mb-2 row" id="exRow1071031">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx1"><strong>1번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx1" id="standardAnswerTypeEx1" placeholder="보기 내용을 입력해주세요." value="매우 그렇다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx1Point"><strong>1번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx1Point" id="standardAnswerTypeEx1Point" placeholder="점수를 입력해주세요." value="5"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row" id="exRow1071032">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx2"><strong>2번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx2" id="standardAnswerTypeEx2" placeholder="보기 내용을 입력해주세요." value="그렇다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx2Point"><strong>2번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx2Point" id="standardAnswerTypeEx2Point" placeholder="점수를 입력해주세요." value="4"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row" id="exRow1071033">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx3"><strong>3번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx3" id="standardAnswerTypeEx3" placeholder="보기 내용을 입력해주세요." value="보통이다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx3Point"><strong>3번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx3Point" id="standardAnswerTypeEx3Point" placeholder="점수를 입력해주세요." value="3"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row" id="exRow1071034">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx4"><strong>4번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx4" id="standardAnswerTypeEx4" placeholder="보기 내용을 입력해주세요." value="그렇지 않다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx4Point"><strong>4번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx4Point" id="standardAnswerTypeEx4Point" placeholder="점수를 입력해주세요." value="2"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-0 row" id="exRow1071035">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx5"><strong>5번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx5" id="standardAnswerTypeEx5" placeholder="보기 내용을 입력해주세요." value="전혀 그렇지 않다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx5Point"><strong>5번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx5Point" id="standardAnswerTypeEx5Point" placeholder="점수를 입력해주세요." value="1"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-0 row d-none" id="exRow1071036">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx5"><strong>6번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx5" id="standardAnswerTypeEx5" placeholder="보기 내용을 입력해주세요." value=""/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx5Point"><strong>6번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx5Point" id="standardAnswerTypeEx5Point" placeholder="점수를 입력해주세요." value=""/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-0 row d-none" id="exRow1071037">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx5"><strong>7번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx5" id="standardAnswerTypeEx5" placeholder="보기 내용을 입력해주세요." value=""/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="standardAnswerTypeEx5Point"><strong>7번 점수</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="standardAnswerTypeEx5Point" id="standardAnswerTypeEx5Point" placeholder="점수를 입력해주세요." value=""/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--//척도형-->
        <!--혼합형-->
        <div class="col-12 d-none" id="qitemType107103">
            <div class="mb-2 form-group required row">
                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>보기수</strong></div>
                <div class="col-12">
                    <select name="mixTypeCntSelect" class="form-select form-select-sm form-control-sm">
                        <option value="0">남</option>
                        <option value="1">여</option>
                    </select>
                </div>
            </div>

            <div class="mb-2 row align-items-end">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="mixTypeEx1"><strong>1번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="mixTypeEx1" id="mixTypeEx1" placeholder="Text Input Validation" value="매우 그렇다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <div class="border-checkbox-section">
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="mixTypeEx1Etc" id="mixTypeEx1Etc">
                                <label class="form-label border-checkbox-label" for="mixTypeEx1Etc">
                                    기타
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row align-items-end">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="mixTypeEx2"><strong>2번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="mixTypeEx2" id="mixTypeEx2" placeholder="Text Input Validation" value="그렇다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <div class="border-checkbox-section">
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="mixTypeEx2Etc" id="mixTypeEx2Etc">
                                <label class="form-label border-checkbox-label" for="mixTypeEx2Etc">
                                    기타
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row align-items-end">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="mixTypeEx3"><strong>3번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="mixTypeEx3" id="mixTypeEx3" placeholder="Text Input Validation" value="보통이다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <div class="border-checkbox-section">
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="mixTypeEx3Etc" id="mixTypeEx3Etc">
                                <label class="form-label border-checkbox-label" for="mixTypeEx3Etc">
                                    기타
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row align-items-end">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="mixTypeEx4"><strong>4번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="mixTypeEx4" id="mixTypeEx4" placeholder="Text Input Validation" value="그렇지 않다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <div class="border-checkbox-section">
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="mixTypeEx4Etc" id="mixTypeEx4Etc">
                                <label class="form-label border-checkbox-label" for="mixTypeEx4Etc">
                                    기타
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row align-items-end">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="mixTypeEx5"><strong>5번</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="mixTypeEx5" id="mixTypeEx5" placeholder="Text Input Validation" value="전혀 그렇지 않다"/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <div class="mb-0 form-group">
                        <div class="border-checkbox-section">
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="mixTypeEx5Etc" id="mixTypeEx5Etc">
                                <label class="form-label border-checkbox-label" for="mixTypeEx5Etc">
                                    기타
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <p class="mb-0 text-warning">&#8251; 기타로 설정한 보기는 서술형 입력을 필수로 입력해야 합니다.</p>
        </div>
        <!--//혼합형-->
    </div>
    
    <div class="card-block-small p-t-0">
        <button type="button" class="btn btn-disabled m-r-5" onclick="qestnrInsert.offInsertQestnr();">취소</button>
        <th:block sec:authorize-url="/mng/qestnr/insertQestnr.do"><button type="button" class="btn btn-primary" onclick="qitemInsert.onInsertQitem();">저장</button></th:block>
    </div>
</form>

<script th:inline="javascript">
    var qitemInsert = {
        qitemType: "107100",
        
        init: function() {
            var elemsingleSmallList = document.querySelectorAll('.js-single-small');
            for(var i = 0; i < elemsingleSmallList.length; i++) {
                new Switchery(elemsingleSmallList[i], {color: "#4680ff", jackColor: "#fff", size: "small"});
           }
           
           this.registEvent();
           this.setValid();
        },
        
        registEvent: function() {
            var _this = this;
            
            $('#qitemTypeCd').on("change", function() {
                _this.onChangeQitemType($(this).val());
            });
        },
        
        onChangeQitemType: function(qitemType) {
            $('#qitemType' + this.qitemType).addClass("d-none");
            $('#qitemType' + qitemType).removeClass("d-none");
            this.qitemType = qitemType;
        },
        
        onChangeExCnt: function() {
            var type = this.qitemType;
            var exCnt = $('#exCnt' + type).val();
            for(var i = 3; i <= 7; i++) {
                var ex = $("#exRow" + type + i);
                if(i > exCnt) {
                    ex.addClass("d-none");
                } else {
                    ex.removeClass("d-none");
                }
            }
        },
        
        setValid: function() {
            var validator = $('#qitemInsertForm').validate({
                rules: {
                    qestnrKndCd: {required: true},
                    cn: {required: true, maxlength: 400},
                },
                messages: {
                    qitemTypeCd: {required: "문항유형을 선택해주세요."},
                    cn: {required: "문항을 입력해주세요.", maxlength: "문항은 400자 이하여야 합니다."},
                }
            });
        },
        
        onInsertQitem: function() {
            if(!($("#qitemInsertForm").valid())) return;
            
            var qitemType = $("#qitemTypeCd").val();
            if(qitemType == "107100" || qitemType == "107101" || qitemType == "107102") { // 선택형, OX형, 복수형 유효성 확인
                var exCnt = $('#exCnt' + qitemType).val();
                if(qitemType == "107101") {
                    exCnt = 2;
                }
                var exampleList = [];
                for(var i = 1; i <= exCnt; i++) {
                    var cn = $("#exCn" +qitemType + i);
                    if(!$.trim(cn.val())) {
                        alert("보기 내용을 입력해주세요.");
                        cn.focus();
                        return false;
                    }
                    var example = {exNo: i, cn: cn.val()}
                    exampleList.push(example);
                }
            }
            // 공통
            var items = $("#qitemGrid").jsGrid("option", "data");
            var param = {
                qestnrid: Number(qestnrDetail.qestnrid[0]),
                qitemTypeCd: qitemType,
                cn: $("#cn").val(),
                ordr: items.length == 0 ? 1 : items[0].totalCount + 1,
                useYn: $("#useYn").is(":checked") ? "Y" : "N"
            };
            
            if(qitemType == "107100" || qitemType == "107101" || qitemType == "107102") { // 선택형, OX형, 복수형
                $(exampleList).each(function(index, item) {
                    param["exampleList[" + index + "].exNo"] = item.exNo;
                    param["exampleList[" + index + "].cn"] = item.cn;
                });
            }
            
            if(displayWorkProgress()) {
                $.ajax({
                    url : "/mng/qestnr/insertQitem.do",
                    type: "POST",
                    cache: false,
                    dataType: "json",
                    data: param,
                    success: function(response) {
                        if(response.result == "success") {
                            alert(response.msg);
                            qestnrGrid.resetListContent();
                            qitemGrid.resetListContent();
                            $("#contentPanel").show();
                        } else {
                            alert(response.msg);
                        }
                        closeWorkProgress();
                    }
                });
            }
        },
        
        offInsertQestnr: function() {
            qitemGrid.toggleContent();
        }
    };
    
    qitemInsert.init();
</script>