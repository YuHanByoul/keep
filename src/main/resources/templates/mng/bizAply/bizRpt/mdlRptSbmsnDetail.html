<form id="mdlRptSbmsnFrm">
<input type="hidden" id="reportid" name="reportid" th:value="${mdlRptSbmsnInfo.reportid}">
<input type="hidden" id="atchFilegrpid" name="atchFilegrpid" th:value="${mdlRptSbmsnInfo.atchFilegrpid}">
    <div class="card">
        <div class="card-header p-b-0">
            <h3 class="sub-title"><strong>신청정보</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="row">
                <div class="col-12 col-md-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>접수번호</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="rcptno" name="rcptno" placeholder="접수번호" th:value="${mdlRptSbmsnInfo.rcptno}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>기관명</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="instNm" name="instNm" placeholder="기관명" th:value="${mdlRptSbmsnInfo.instNm}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>프로그램명</strong></label>
                        <div class="col-12">
                            <input type="text" class="form-control form-control-sm" id="prgrmNm" name="prgrmNm" placeholder="프로그램명" th:value="${mdlRptSbmsnInfo.prgrmNm}" >
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>신청자</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="userNmAcnt" name="userNmAcnt" placeholder="신청자" th:value="${mdlRptSbmsnInfo.userNmAcnt}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>교육대상</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="eduTrgt" name="eduTrgt" placeholder="교육 대상" th:value="${mdlRptSbmsnInfo.eduTrgt}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6 mb-3">
                    <div class="mb-0 form-group required">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>프로그램 주제</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="essntlSbjctNm" name="essntlSbjctNm" placeholder="프로그램 주제" th:value="${mdlRptSbmsnInfo.essntlSbjctNm}" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>제출일시</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="regDt" name="regDt" placeholder="제출 일시" th:value="${mdlRptSbmsnInfo.regDt}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>제출상태</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="reportSttsCdNm" name="reportSttsCdNm" placeholder="제출 상태" th:value="${mdlRptSbmsnInfo.reportSttsCdNm}" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-header p-b-0">
            <h3 class="sub-title"><strong>교육운영</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="table-responsive">
                <table class="table table-framed table-bordered">
                    <thead>
                    <tr class="border-bottom-inverse">
                        <th class="text-center v-middle" style="width: 60px;">구분</th>
                        <th class="text-center v-middle">일시</th>
                        <th class="text-center v-middle">차시</th>
                        <th class="text-center v-middle">인원</th>
                        <th class="text-center v-middle">시간(분)</th>
                        <th class="text-center v-middle">비고</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <th class="text-center v-middle">계획</th>
                        <td class="text-center v-middle">2023-00-00 ~ 2023-00-00</td>
                        <td class="text-center v-middle">80</td>
                        <td class="text-center v-middle">1600</td>
                        <td class="text-center v-middle">4,000</td>
                        <td class="text-center v-middle">ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ</td>
                    </tr>
                    <tr>
                        <th class="text-center v-middle" rowspan="2">현재</th>
                        <td class="text-center v-middle">2023-00-00 ~ 2023-00-00</td>
                        <td class="text-center v-middle">16</td>
                        <td class="text-center v-middle">184</td>
                        <td class="text-center v-middle">800</td>
                        <td class="text-center v-middle"></td>
                    </tr>
                    <tr>
                        <td class="text-center v-middle">2023-00-00 ~ 2023-00-00</td>
                        <td class="text-center v-middle">16</td>
                        <td class="text-center v-middle">184</td>
                        <td class="text-center v-middle">800</td>
                        <td class="text-center v-middle"></td>
                    </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td class="text-center v-middle table-active" colspan="2"><strong>합계</strong></td>
                            <td class="text-center v-middle table-active"><strong>48</strong></td>
                            <td class="text-center v-middle table-active"><strong>184</strong></td>
                            <td class="text-center v-middle table-active"><strong>800</strong></td>
                            <td class="text-center v-middle table-active"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="card-header p-b-0">
            <h3 class="sub-title"><strong>기타 및 증빙서류 첨부</strong></h3>
        </div>

        <div class="card-block-small p-t-0">
            <div class="row form-group mb-3">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="popupContents"><strong>기타</strong></label>
                <div class="col-sm-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="기타 내용" id="etcCn" name="etcCn" readonly><th:block th:text="${mdlRptSbmsnInfo.etcCn}"></th:block></textarea>
                </div>
            </div>
        </div>

        <div class="card-block-small p-t-0">
            <div class="row form-group mb-3">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="popupContents"><strong>증빙서류</strong></label>
                <div class="col-sm-12">
                    <input id="multiFileInput" type="file" name="files" multiple accept="image/jpeg,image/gif,image/png,application/pdf" class="form-control form-control-sm"/>
                    <div class="mt-2 row">
                        <div class="col-auto">
                            <div id="multipleFileUploadError"></div>
                            <div id="multipleFileUploadSuccess">
                                <th:block th:if = "${fileList} != null" >
                                    <th:block th:each="item:${fileList}" th:if = "${item.fileid} > 0">
                                        <span class ='label label-inverse ' th:id="'file_'+${item.fileid}">
                                            <th:block th:text="${item.orginlFileNm}"></th:block>&nbsp;&nbsp;
                                            <a  class = 'text-white' href = "javascript:void(0)" th:name="${item.fileid}" th:attr="data-idntfc-key=${item.fileIdntfcKey}" th:onclick="mdlRptSbmsnDtl.fn_deleteFile(this.name, this.dataset.idntfcKey)">X</a>
                                        </span>
                                    </th:block>
                                </th:block>
                            </div>
                        </div>
                    </div>

                </div>



        <div class="card-block-small">
            <button class="btn btn-disabled m-r-5">목록</button>
            <button class="btn btn-inverse m-r-5" data-bs-toggle="modal" data-bs-target="#consultingPopup">컨설팅 대상</button>
            <button class="btn btn-primary">완료</button>
        </div>
    </div>
</form>

<script th:inline="javascript">


    var mdlRptSbmsnDtl= {
    	  listUrl  : "/mng/bizAply/bizRpt/selectMdlRptSbmsnList.do"
    	, init : function(){

        }
    	, fn_deleteFileList : function (fileid, fileIdntfcKey) {

    	    if(!confirm("파일을 삭제하시겠습니까?")){return;}
    	    fn_deleteFile(fileid, fileIdntfcKey);
    	    $("#file_"+fileid).remove();

    	}
    	, fn_deleteFile : function (fileid, fileIdntfcKey){
    		  var deleteFileUrl="/deleteFile.do?fileid="+fileid+"&file_idntfc_key=" + fileIdntfcKey;

              $.ajax({
                 url : deleteFileUrl,
                 type: 'GET',
                 cache : false,
                 dataType: 'json',
                 success : function (data){
                     if(data.result=="success"){
                    	 $("#file_"+fileid).remove();
                         alert("파일삭제가 완료 되었습니다.");
                     }else{
                         alert("파일삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
                     }
                 },
                 error : function (error){
                 }
               })
        	}





    };

    $(function() {

        $('#multiFileInput').on("change", function(event) {

            var objFile = document.querySelector('#multiFileInput');
            var formData = new FormData();
            var content = "";

            for( i = 0 ; i < objFile.files.length ; i++) {
                formData.append("files", objFile.files[i]);
            }

            formData.append("filegrpid", $("#atchFilegrpid").val());
            formData.append("filegrpNm", "bizRptMng_file");


            $.ajax({
                url : '/uploadMultipleFiles.do',
                processData : false,
                contentType : false,
                data : formData,
                type : 'POST',
                success : function(response) {
                    if(response.result == 'fail'){
                        alert(response.msg);
                    }else{
                        if($("#atchFilegrpid").val()=='0' || $("#atchFilegrpid").val()==''  || $("#atchFilegrpid").val()==null){
                            $("#atchFilegrpid").val( response[0].filegrpid );
                        }

                        for(i = 0 ;i < response.length; i++ ){
                            content = "<span class ='label label-inverse mb-2' id='file_"+response[i].fileid+"'>"+response[i].orginlFileNm ;
                            content +="&nbsp;&nbsp;  <a  class = 'text-white' href = javascript:mdlRptSbmsnDtl.fn_deleteFile('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"')>X</a></span>&nbsp;&nbsp;";
                            $('#multipleFileUploadSuccess').append(content);
                        }
                    }
                }
            });

           if (detectBrowser() == "other") {
               $("#multiFileInput").val("");
           } else {
              $("#multiFileInput").replaceWith( $("#multiFileInput").clone(true))
           }


        });
    	mdlRptSbmsnDtl.init();
    });

</script>
<!--
            <div class="card">
                <div class="row p-20 p-b-0">
                    <div class="col-12 col-md-8 mb-2 mb-md-0">
                        <h5><strong>보완요청</strong></h5>
                    </div>
                    <div class="col-12 col-md-4 text-right">
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#redeemInsertPopup">보완요청</button>
                    </div>
                </div>
                <div class="card-block-small">
                    <div class="dt-responsive table-responsive">
                        <div id="order-table_wrapper"
                             class="dataTables_wrapper dt-bootstrap4">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-sm-12 col-md-6">
                                    <div class="dataTables_length" id="order-table_length">
                                        <label>Show <select name="order-table_length"
                                                            aria-controls="order-table"
                                                            class="form-select form-select-sm form-control form-control-sm">
                                            <option value="10">10</option>
                                            <option value="25">25</option>
                                            <option value="50">50</option>
                                            <option value="100">100</option>
                                        </select> entries</label></div>
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-6">
                                    <div id="order-table_filter" class="dataTables_filter">
                                        <label>Search:<input type="search"
                                                             class="form-control form-control-sm"
                                                             placeholder=""
                                                             aria-controls="order-table"></label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <table id="order-table"
                                           class="table table-striped table-bordered nowrap dataTable"
                                           role="grid" aria-describedby="order-table_info">
                                        <thead>
                                        <tr role="row">
                                            <th class="sorting" tabindex="0"
                                                aria-controls="order-table" rowspan="1"
                                                colspan="1"
                                                aria-label="Name: activate to sort column ascending"
                                                style="width: 101.125px;">Name
                                            </th>
                                            <th class="sorting" tabindex="0"
                                                aria-controls="order-table" rowspan="1"
                                                colspan="1"
                                                aria-label="Position: activate to sort column ascending"
                                                style="width: 160.281px;">Position
                                            </th>
                                            <th class="sorting" tabindex="0"
                                                aria-controls="order-table" rowspan="1"
                                                colspan="1"
                                                aria-label="Office: activate to sort column ascending"
                                                style="width: 67.7031px;">Office
                                            </th>
                                            <th class="sorting_desc" tabindex="0"
                                                aria-controls="order-table" rowspan="1"
                                                colspan="1" aria-sort="descending"
                                                aria-label="Age: activate to sort column ascending"
                                                style="width: 27.7344px;">Age
                                            </th>
                                            <th class="sorting" tabindex="0"
                                                aria-controls="order-table" rowspan="1"
                                                colspan="1"
                                                aria-label="Start date: activate to sort column ascending"
                                                style="width: 73.4219px;">Start date
                                            </th>
                                            <th class="sorting" tabindex="0"
                                                aria-controls="order-table" rowspan="1"
                                                colspan="1"
                                                aria-label="Salary: activate to sort column ascending"
                                                style="width: 45.75px;">Salary
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>


                                        <tr role="row" class="odd">
                                            <td>Ashton Cox</td>
                                            <td>Junior Technical Author</td>
                                            <td>San Francisco</td>
                                            <td class="sorting_1">66</td>
                                            <td>2009/01/12</td>
                                            <td>$86,000</td>
                                        </tr>
                                        <tr role="row" class="even">
                                            <td>Michael Silva</td>
                                            <td>Marketing Designer</td>
                                            <td>London</td>
                                            <td class="sorting_1">66</td>
                                            <td>2012/11/27</td>
                                            <td>$198,500</td>
                                        </tr>
                                        <tr role="row" class="odd">
                                            <td>Paul Byrd</td>
                                            <td>Chief Financial Officer (CFO)</td>
                                            <td>New York</td>
                                            <td class="sorting_1">64</td>
                                            <td>2010/06/09</td>
                                            <td>$725,000</td>
                                        </tr>
                                        <tr role="row" class="even">
                                            <td>Garrett Winters</td>
                                            <td>Accountant</td>
                                            <td>Tokyo</td>
                                            <td class="sorting_1">63</td>
                                            <td>2011/07/25</td>
                                            <td>$170,750</td>
                                        </tr>
                                        <tr role="row" class="odd">
                                            <td>Tiger Nixon</td>
                                            <td>System Architect</td>
                                            <td>Edinburgh</td>
                                            <td class="sorting_1">61</td>
                                            <td>2011/04/25</td>
                                            <td>$320,800</td>
                                        </tr>
                                        <tr role="row" class="even">
                                            <td>Brielle Williamson</td>
                                            <td>Integration Specialist</td>
                                            <td>New York</td>
                                            <td class="sorting_1">61</td>
                                            <td>2012/12/02</td>
                                            <td>$372,000</td>
                                        </tr>
                                        <tr role="row" class="odd">
                                            <td>Herrod Chandler</td>
                                            <td>Sales Assistant</td>
                                            <td>San Francisco</td>
                                            <td class="sorting_1">59</td>
                                            <td>2012/08/06</td>
                                            <td>$137,500</td>
                                        </tr>
                                        <tr role="row" class="even">
                                            <td>Gloria Little</td>
                                            <td>Systems Administrator</td>
                                            <td>New York</td>
                                            <td class="sorting_1">59</td>
                                            <td>2009/04/10</td>
                                            <td>$237,500</td>
                                        </tr>
                                        <tr role="row" class="odd">
                                            <td>Rhona Davidson</td>
                                            <td>Integration Specialist</td>
                                            <td>Tokyo</td>
                                            <td class="sorting_1">55</td>
                                            <td>2010/10/14</td>
                                            <td>$327,900</td>
                                        </tr>
                                        <tr role="row" class="even">
                                            <td>Haley Kennedy</td>
                                            <td>Senior Marketing Designer</td>
                                            <td>London</td>
                                            <td class="sorting_1">43</td>
                                            <td>2012/12/18</td>
                                            <td>$313,500</td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <th rowspan="1" colspan="1">Name</th>
                                            <th rowspan="1" colspan="1">Position</th>
                                            <th rowspan="1" colspan="1">Office</th>
                                            <th rowspan="1" colspan="1">Age</th>
                                            <th rowspan="1" colspan="1">Start date</th>
                                            <th rowspan="1" colspan="1">Salary</th>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-5">
                                    <div class="dataTables_info" id="order-table_info"
                                         role="status" aria-live="polite">Showing 1 to 10 of
                                        20 entries
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-7">
                                    <div class="dataTables_paginate paging_simple_numbers"
                                         id="order-table_paginate">
                                        <ul class="pagination">
                                            <li class="paginate_button page-item previous disabled"
                                                id="order-table_previous"><a href="#"
                                                                             aria-controls="order-table"
                                                                             data-dt-idx="0"
                                                                             tabindex="0"
                                                                             class="page-link">Previous</a>
                                            </li>
                                            <li class="paginate_button page-item active"><a
                                                    href="#" aria-controls="order-table"
                                                    data-dt-idx="1" tabindex="0"
                                                    class="page-link">1</a></li>
                                            <li class="paginate_button page-item "><a
                                                    href="#" aria-controls="order-table"
                                                    data-dt-idx="2" tabindex="0"
                                                    class="page-link">2</a></li>
                                            <li class="paginate_button page-item next"
                                                id="order-table_next"><a href="#"
                                                                         aria-controls="order-table"
                                                                         data-dt-idx="3"
                                                                         tabindex="0"
                                                                         class="page-link">Next</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
 -->