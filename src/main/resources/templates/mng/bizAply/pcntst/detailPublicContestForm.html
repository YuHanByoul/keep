<!-- Date-range picker css  -->
<link rel="stylesheet" type="text/css" href="/files/bower_components/bootstrap-daterangepicker/daterangepicker.css">
<form id="insertForm">
    <input type="hidden" name="pcntstid" id="pcntstid" th:value="${publicContestVo.pcntstid}" />
    <input type="hidden" name="bsnsBgngDe" id="bsnsBgngDe" th:value="${publicContestVo.bsnsBgngDe}" />
    <input type="hidden" name="bsnsEndDe" id="bsnsEndDe" th:value="${publicContestVo.bsnsEndDe}" />
	<!-- insert 부분 -->
	<div class="col-12">
	    <div class="card">
	        <!-- 기본정보 -->
	        <div class="card-header p-b-0">
	            <h3 class="sub-title"><strong>기본 정보</strong></h3>
	        </div>
	        <div class="card-block-small p-t-0">
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>사업분야</strong></div>
	                        <span kattr:select_code="fldCd" th:attr="selectedCd=${publicContestVo.fldCd}" grpCd="173" firstOptTxt="- 전체 -" addClass="input-sm" isAdmin="true">
	                    </div>
	                </div>
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>신청대상</strong></div>
	                        <div class="border-checkbox-section">
	                            <span kattr:radio_code="trgtCd" grpCd="175" isAdmin="true" th:attr="selectedCd=${publicContestVo.trgtCd}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-12 mb-3">
	                    <div class="mb-0 form-group">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="input01"><strong>공모명</strong></label>
	                        <div class="col-12">
	                            <input type="text" class="form-control form-control-sm" name="pcntstNm" id="pcntstNm" placeholder="Text Input Validation" th:value="${publicContestVo.pcntstNm}"/>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>신청기간 설정</strong></div>
	                        <div class="row">
	                            <div class="col-md-6">
	                                <input type="datetime-local" id="aplyBgngDt" name="aplyBgngDt" class="form-control form-control-sm" aria-label="신청기간 시작일시" th:value="${publicContestVo.aplyBgngDt}">
	                            </div>
	                            <div class="col-md-6">
	                                <input type="datetime-local" id="aplyEndDt" name="aplyEndDt" class="form-control form-control-sm" aria-label="신청기간 종료일시" th:value="${publicContestVo.aplyEndDt}">
	                            </div>
	                        </div>
	                    </div>
	                </div>
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="input01"><strong>사업기간 설정</strong></label>
	                        <div class="col-12">
	                            <input type="text" id="bsnsBgng" name="bsnsBgng" class="form-control form-control-sm" th:value="${publicContestVo.bsnsDe}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>중간보고 사용여부</strong></div>
	                        <div class="form-radio">
                                <span kattr:radio_yn="mdlReportYn" label1="Y" label2="N" th:attr="defaultVal=${publicContestVo.mdlReportYn == null ? 'Y' : publicContestVo.mdlReportYn}"></span>
	                        </div>
	                    </div>
	                </div>
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>컨설팅 사용여부</strong></div>
	                        <div class="form-radio">
	                            <span kattr:radio_code="cnsltngUseCd" grpCd="176" selectedCd="" isAdmin="true" th:attr="selectedCd=${publicContestVo.cnsltngUseCd}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>사업비 교부 횟수</strong></div>
	                        <div class="form-radio">
	                            <span kattr:radio_yn="wctDelvryCnt" label1="2회" label2="1회" th:attr="defaultVal=${publicContestVo.wctDelvryCntYn == null ? 'Y' : publicContestVo.wctDelvryCntYn}" isAdmin="true"></span>
	                        </div>
	                    </div>
	                </div>
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>온라인 심사유형</strong></div>
	                        <div class="col-12">
	                            <span kattr:select_code="onlnSrngTypeCd" th:attr="selectedCd=${publicContestVo.onlnSrngTypeCd}" grpCd="177" firstOptTxt="- 선택 -" addClass="input-sm" isAdmin="true">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-12 mb-3">
	                    <div class="mb-0 form-group">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="input02"><strong>사업안내</strong></label>
	                        <div class="col-12">
	                            <textarea class="form-control form-control-sm" id="bsnsCn" name="bsnsCn" th:utext="${publicContestVo.bsnsCn}"></textarea>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-12 mb-3">
	                    <div class="mb-0 form-group">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="detailFile"><strong>첨부파일</strong></label>
	                        <div class="col-12">
	                            <input id="multiFileInput" type="file" name="files" multiple accept="image/jpeg,image/gif,image/png,application/pdf" class="form-control form-control-sm"/>
	                        </div>
	                        <div class="mt-2 row">
	                            <div class="col-auto">
                                    <th:block th:if="${fileList != null}">
	                                    <div class="row">
	                                        <th:block th:if="${fileList != null}">
	                                            <div th:each="item : ${fileList}" th:id="${item.fileid}" class="col-auto">
	                                                <th:block th:if="${item.orginlFileNm != null}">
	                                                    <span th:fileid='${item.fileid}' th:fileIdntfcKey="${item.fileIdntfcKey}" th:onclick="downloadFileByFileid(this.getAttribute('fileid'),this.getAttribute('fileIdntfcKey'))" href="javascript:void(0)" class='label label-inverse'>
	                                                        <th:block th:text="${item.orginlFileNm}" /> 
	                                                           <a th:name="${item.fileid}" th:attr="data-idntfc-key=${item.fileIdntfcKey}" th:onclick="fn_deleteFileList(this.name, this.dataset.idntfcKey)" class='text-white'>
	                                                        <th:block th:text="X"></th:block></a>
	                                                    </span>
	                                                </th:block>
	                                            </div>
	                                         </th:block>
	                                     </div>
	                                </th:block>
	                                <div id="multipleFileUploadError"></div>
	                                <div id="multipleFileUploadSuccess"></div>
	                            </div>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>사용여부</strong></div>
	                        <div class="form-radio">
	                            <span kattr:radio_yn="useYn" label1="Y" label2="N" th:attr="defaultVal=${publicContestVo.useYn == null ? 'Y' : publicContestVo.useYn}"></span>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <input type="hidden" id="filegrpid" name="filegrpid" th:value="${(publicContestVo.filegrpid == '' or publicContestVo.filegrpid == null) ? 0 : publicContestVo.filegrpid}"/>
	        </div>
	        <!-- 1차 심사 설정 -->
	        <div class="card-header p-t-0 p-b-0">
	            <h3 class="sub-title"><strong>1차 심사 설정</strong></h3>
	        </div>
	        <div class="card-block-small p-t-0">
	            <div class="mb-3 form-group row">
	                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>담당자 배정</strong></div>
	                <div class="col-sm-12 btn-group-sm">
	                    <button type="button" class="btn btn-inverse" onclick="openSearchModal()">담당자 검색</button>
	                </div>
	                <div class="m-0 row">
	                    <div class="col-12 row border rounded p-t-10 p-b-10 m-0 mt-2">
	                        <div class="col-auto">
	                            <span class="label label-inverse">
	                                홍길동(cunsulting001) | ab****@naver.com | 010-0000-0000 <a href="javascript:void(0)" class="text-white">X</a>
	                            </span>
	                            <span class="label label-inverse">
	                                홍길동(cunsulting001) | ab****@naver.com | 010-0000-0000 <a href="javascript:void(0)" class="text-white">X</a>
	                            </span>
	                            <span class="label label-inverse">
	                                홍길동(cunsulting001) | ab****@naver.com | 010-0000-0000 <a href="javascript:void(0)" class="text-white">X</a>
	                            </span>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>심사표</strong></div>
	                        <div class="col-12">
	                            <select name="srngFormidFirst" id="srngFormidFirst" class="form-select form-select-sm">
	                                <option value="" disabled="" selected="">-선택-</option>
	                                <option value="opt1">Type 1</option>
	                                <option value="opt2">Type 2</option>
	                                <option value="opt3">Type 3</option>
	                                <option value="opt4">Type 4</option>
	                                <option value="opt5">Type 5</option>
	                                <option value="opt6">Type 6</option>
	                                <option value="opt7">Type 7</option>
	                                <option value="opt8">Type 8</option>
	                            </select>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <!-- 2차 심사 설정 -->
	        <div class="card-header p-t-0 p-b-0">
	            <h3 class="sub-title"><strong>2차 심사 설정</strong></h3>
	        </div>
	        <div class="card-block-small p-t-0">
	            <div class="mb-3 form-group row">
	                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>담당자 배정</strong></div>
	                <div class="col-sm-12 btn-group-sm">
	                    <button type="button" class="btn btn-inverse" data-bs-toggle="modal" data-bs-target="#managerSearchPopup">담당자 검색</button>
	                </div>
	                <div class="m-0 row" style="display:none;">
	                    <div class="col-12 row border rounded p-t-10 p-b-10 m-0 mt-2">
	                        <div class="col-auto">
	                            <span class="label label-inverse">
	                                홍길동(cunsulting001) | ab****@naver.com | 010-0000-0000 <a href="javascript:void(0)" class="text-white">X</a>
	                            </span>
	                            <span class="label label-inverse">
	                                홍길동(cunsulting001) | ab****@naver.com | 010-0000-0000 <a href="javascript:void(0)" class="text-white">X</a>
	                            </span>
	                            <span class="label label-inverse">
	                                홍길동(cunsulting001) | ab****@naver.com | 010-0000-0000 <a href="javascript:void(0)" class="text-white">X</a>
	                            </span>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group required">
	                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>심사표</strong></div>
	                        <div class="col-12">
	                            <select name="srngFormidScnd" id="srngFormidScnd" class="form-select form-select-sm">
	                                <option value="" disabled="" selected="">-선택-</option>
	                                <option value="opt1">Type 1</option>
	                                <option value="opt2">Type 2</option>
	                                <option value="opt3">Type 3</option>
	                                <option value="opt4">Type 4</option>
	                                <option value="opt5">Type 5</option>
	                                <option value="opt6">Type 6</option>
	                                <option value="opt7">Type 7</option>
	                                <option value="opt8">Type 8</option>
	                            </select>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <!-- 일정정보 -->
	        <div class="card-header p-t-0 p-b-0">
	            <h3 class="sub-title"><strong>일정정보</strong></h3>
	        </div>
	        <div class="card-block-small p-t-0">
<!-- 	            <div class="row"> -->
<!-- 	                <div class="col-lg-6 mb-3"> -->
<!-- 	                    <div class="mb-0 form-group row required"> -->
<!-- 	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod01"><strong>신청기간 설정</strong></label> -->
<!-- 	                        <div class="col-md-6"> -->
<!-- 	                            <input type="datetime-local" class="form-control form-control-sm" id="setPeriod01"> -->
<!-- 	                        </div> -->
<!-- 	                        <div class="col-md-6 mt-1 mt-md-0"> -->
<!-- 	                            <input type="datetime-local" class="form-control form-control-sm" id="setPeriod012"> -->
<!-- 	                        </div> -->
<!-- 	                    </div> -->
<!-- 	                </div> -->
<!-- 	            </div> -->
<!-- 	            <div class="row"> -->
<!-- 	                <div class="col-lg-6 mb-3"> -->
<!-- 	                    <div class="mb-0 form-group required"> -->
<!-- 	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod02"><strong>사업기간 설정</strong></label> -->
<!-- 	                        <div class="col-12"> -->
<!-- 	                            <input type="text" name="daterange" class="form-control form-control-sm" value="01/01/2015 - 01/31/2015" id="setPeriod02"> -->
<!-- 	                        </div> -->
<!-- 	                    </div> -->
<!-- 	                </div> -->
<!-- 	            </div> -->
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod03"><strong>심사기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="srngBgngDt" name="srngBgngDt" th:value="${publicContestVo.srngBgngDt}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="srngEndDt" name="srngEndDt" th:value="${publicContestVo.srngEndDt}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod04"><strong>교부신청발표기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryAplyPrsntnBgngDt" name="delvryAplyPrsntnBgngDt" th:value="${publicContestVo.delvryAplyPrsntnBgngDt}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryAplyPrsntnEndDt" name="delvryAplyPrsntnEndDt" th:value="${publicContestVo.delvryAplyPrsntnEndDt}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row required">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod05"><strong>교부신청기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryAplyBgngDtFirst" name="delvryAplyBgngDtFirst" th:value="${publicContestVo.delvryAplyBgngDtFirst}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryAplyEndDtFirst" name="delvryAplyEndDtFirst" th:value="${publicContestVo.delvryAplyEndDtFirst}">
	                        </div>
	                    </div>
	                </div>
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod06"><strong>교부신청기간(2차) 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryAplyBgngDtScnd" name="delvryAplyBgngDtScnd" th:value="${publicContestVo.delvryAplyBgngDtScnd}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryAplyEndDtScnd" name="delvryAplyEndDtScnd" th:value="${publicContestVo.delvryAplyEndDtScnd}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row required">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod07"><strong>교부확정발표기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryCfmtnPrsntnBgngDt" name="delvryCfmtnPrsntnBgngDt" th:value="${publicContestVo.delvryCfmtnPrsntnBgngDt}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="delvryCfmtnPrsntnEndDt" name="delvryCfmtnPrsntnEndDt" th:value="${publicContestVo.delvryCfmtnPrsntnEndDt}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row required">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod08"><strong>자금집행기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="cptalExcutBgngDtFirst" name="cptalExcutBgngDtFirst" th:value="${publicContestVo.cptalExcutBgngDtFirst}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="cptalExcutEndDtFirst" name="cptalExcutEndDtFirst" th:value="${publicContestVo.cptalExcutEndDtFirst}">
	                        </div>
	                    </div>
	                </div>
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod09"><strong>자금집행기간(2차) 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="cptalExcutBgngDtScnd" name="cptalExcutBgngDtScnd" th:value="${publicContestVo.cptalExcutBgngDtScnd}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="cptalExcutEndDtScnd" name="cptalExcutEndDtScnd" th:value="${publicContestVo.cptalExcutEndDtScnd}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod10"><strong>중간보고기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="mdlReportBgngDt" name="mdlReportBgngDt" th:value="${publicContestVo.mdlReportBgngDt}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="mdlReportEndDt" name="mdlReportEndDt" th:value="${publicContestVo.mdlReportEndDt}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row required">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod11"><strong>결과보고기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="rsltReportBgngDt" name="rsltReportBgngDt" th:value="${publicContestVo.rsltReportBgngDt}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="rsltReportEndDt" name="rsltReportEndDt" th:value="${publicContestVo.rsltReportEndDt}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="row">
	                <div class="col-lg-6 mb-3">
	                    <div class="mb-0 form-group row">
	                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="setPeriod12"><strong>정산보고기간 설정</strong></label>
	                        <div class="col-md-6">
	                            <input type="datetime-local" class="form-control form-control-sm" id="excclcReportBgngDt" name="excclcReportBgngDt" th:value="${publicContestVo.excclcReportBgngDt}">
	                        </div>
	                        <div class="col-md-6 mt-1 mt-md-0">
	                            <input type="datetime-local" class="form-control form-control-sm" id="excclcReportEndDt" name="excclcReportEndDt" th:value="${publicContestVo.excclcReportEndDt}">
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <!-- 하단버튼 -->
	        <div class="card-block-small">
	            <button type="button" class="btn btn-disabled m-r-5" id="cancelInsertEnvedu" onclick="gridHelper1.toggleContent()">취소</button>
                <th:block sec:authorize-url="/mng/bizAply/pcntst/insertPublicContest.do"><button type="button" class="btn btn-primary" id="insertEnvedu" onclick="fn_insert()">저장</button></th:block>
	        </div>
	        <!-- // -->
	    </div>
	</div>
	<!-- //insert 부분 -->
</form>

<!-- Date-range picker js -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="/files/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
<script th:inline="javascript">    
    var insertUrl = "/mng/bizAply/pcntst/insertPublicContest.do";
    var updateUrl = "/mng/bizAply/pcntst/updatePublicContest.do";
    var pcntstid = $("#pcntstid").val();
    var editor;
    var atchfileCnt = 5;
    var uploadFileCnt = 0;
    var managerSearchModal;
    
    var openSearchModal =()=> {
        var url = "/mng/bizAply/pcntst/managerSearchPopup.html";
        $("#searchModal").load(url, function(response, status, xhr) {
            if (status == "success") {
                managerSearchModal = new bootstrap.Modal($('#searchModal'));
                managerSearchModal.show();
            }
        });
    }
    
    $(function(){
		//editor = CKEDITOR.replace('bsnsCn');
        //에디터 엔터키 두줄 바꿈 제거 (shift + enter 처럼 바로 한줄 밑으로 떨어지게 함 )
        editor = CKEDITOR.replace('bsnsCn', {enterMode: CKEDITOR.ENTER_BR});
        
		$("#bsnsBgng").daterangepicker({
		    autoUpdateInput: false,
		    locale: {
		        format: "YYYY-MM-DD",
		    },
		});
		
		$("#bsnsBgng").on('apply.daterangepicker', function(ev, picker) {
			$("#bsnsBgngDe").val(picker.startDate.format('YYYY-MM-DD'));
            $("#bsnsEndDe").val(picker.endDate.format('YYYY-MM-DD'));
            $(this).val(picker.startDate.format('YYYY-MM-DD') + ' - ' + picker.endDate.format('YYYY-MM-DD'));
        });

        $("bsnsBgng").on('cancel.daterangepicker', function(ev, picker) {
            $(this).val('');
        });
        
        if ($("#atchfileCnt").val() != null && $("#atchfileCnt").val() != 0) {
            atchfileCnt = $("#atchfileCnt").val()
        }
        if ($("#atchfileSize").val() != null && $("#atchfileSize").val() != 0) {
            atchfileSize = $("#atchfileSize").val()
        }
        
	    var validator= $("#insertForm").validate({
	        rules: {
	        	fldCd    : { required: true }
	            , trgtCd : { required: true } 
	            , aplyBgngDt : { required: true } 
	            , aplyEndDt : { required: true } 
	            , bsnsBgng : { required: true } 
	            , onlnSrngTypeCd : { required: true } 
// 	            , srngFormidFirst : { required: true } 
// 	            , srngFormidScnd : { required: true } 
	            , delvryAplyBgngDtFirst : { required: true } 
	            , delvryAplyEndDtFirst : { required: true } 
	            , delvryCfmtnPrsntnBgngDt : { required: true } 
	            , delvryCfmtnPrsntnEndDt : { required: true } 
	            , cptalExcutBgngDtFirst : { required: true } 
	            , cptalExcutEndDtFirst : { required: true } 
	            , rsltReportBgngDt : { required: true } 
	            , rsltReportEndDt : { required: true } 
	        },
	        messages: {
	        	fldCd    :   { required: "사업분야를 선택해주십시오." }  
	            , trgtCd    :   { required: "신청대상을 선택해주십시오." }  
	            , aplyBgngDt    :   { required: "신청기간 시작일시를 선택해주십시오." }  
	            , aplyEndDt    :   { required: "신청기간 종료일시를 선택해주십시오." }  
	            , bsnsBgng    :   { required: "사업기간을 선택해주십시오." }  
	            , onlnSrngTypeCd    :   { required: "온라인 심사유형을 선택해주십시오." }  
// 	            , srngFormidFirst    :   { required: "1차 심사표를 선택해주십시오." }  
// 	            , srngFormidScnd    :   { required: "2차 심사표를 선택해주십시오." }  
	            , delvryAplyBgngDtFirst    :   { required: "교부신청기간 시작일시를 선택해주십시오." }  
	            , delvryAplyEndDtFirst    :   { required: "교부신청기간 종료일시를 선택해주십시오." }  
	            , delvryCfmtnPrsntnBgngDt    :   { required: "교부확정발표기간 시작일시를 선택해주십시오." }
	            , delvryCfmtnPrsntnEndDt    :   { required: "교부확정발표기간 종료일시를 선택해주십시오." }
	            , cptalExcutBgngDtFirst    :   { required: "자금집행기간 시작일시를 선택해주십시오." }
	            , cptalExcutEndDtFirst    :   { required: "자금집행기간 종료일시를 선택해주십시오." }
	            , rsltReportBgngDt    :   { required: "결과보고기간 시작일시를 선택해주십시오." }
	            , rsltReportEndDt    :   { required: "결과보고기간 종료일시를 선택해주십시오." }
	        }
	    });
	});
	
    $('#multiFileInput').on("change", function(event) {
        var objFile = document.querySelector('#multiFileInput');
        var formData = new FormData();
        var content = "";

        for( i = 0 ; i < objFile.files.length ; i++) {

               if(uploadFileCnt >= atchfileCnt){
                   alert("첨부파일은  "+atchfileCnt+ " 개 까지 가능합니다." ); break;
               }else{
                   formData.append("files", objFile.files[i]);
                   uploadFileCnt++;
               }
        }

        formData.append("filegrpid", $("#filegrpid").val());
        formData.append("filegrpNm", "pcntst");

        if(uploadFileCnt > 0){
            $.ajax({
                url : '/uploadMultipleFiles.do',
                processData : false,
                contentType : false,
                data : formData,
                type : 'POST',
                success : function(response) {
                    if(response.result == 'fail'){
                        alert(response.msg);
                    }else{
                        if($("#filegrpid").val()=='0' || $("#filegrpid").val()==''  || $("#filegrpid").val()==null){
                            $("#filegrpid").val( response[0].filegrpid );
                        }

                        for(i = 0 ;i < response.length; i++ ){
    //                         content = "<div class ='' id='"+response[i].fileid+"'><a href=javascript:downloadFileByFileid('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"')>"+response[i].orginlFileNm +"</a>";
    //                         content +="&nbsp;&nbsp;<input type='button'  class = 'btn btn-xs btn-danger' onclick =uploadFileCnt--;fn_deleteFileList('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') value='X'/></div>";
                            content =  "<span id='"+response[i].fileid+"' class='label label-inverse' href=javascript:downloadFileByFileid('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"')>"+response[i].orginlFileNm
                            content += "&nbsp;&nbsp;<a href='javascript:void(0)' onclick =uploadFileCnt--;fn_deleteFileList('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') class='text-white'>X</a></span>"
    //                         content += "<a type='button'  class = 'text-white' onclick =uploadFileCnt--;fn_deleteFileList('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') value='X'/></a></span>"


                            $('#multipleFileUploadSuccess').append(content);
                        }
                    }
                }
            });
           $("#sftyMngMnlFile").val("");
        }
    });

    function fn_deleteFileList(fileid, fileIdntfcKey){
        if(!confirm("파일을 삭제하시겠습니까?")){return;}
        fn_deleteFile(fileid, fileIdntfcKey);
        $("#"+fileid).remove();
    }

    function fn_deleteFile(fileid, fileIdntfcKey){
        var deleteFileUrl="/deleteFile.do?fileid="+fileid+"&file_idntfc_key=" + fileIdntfcKey;
          $.ajax({
            url : deleteFileUrl,
            type: 'GET',
            cache : false,
            dataType: 'json',
            success : function (data){
                console.log(data);
                if(data.result=="success"){
                    $("#"+fileid).remove();
                    alert("파일삭제가 완료 되었습니다.");
                }else{
                    alert("파일삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
                }
            },
            error : function (error){
            }
         })
    };
    
    function fn_insert(){
        if(!($("#insertForm").valid())) return;
        
        var editorData = editor.getData();
        $("#bsnsCn").val(editorData);
        
        if ($("input[name='wctDelvryCnt']:checked").val() == "Y") {
        	$("input[name='wctDelvryCnt']").val(2);
        } else {
        	$("input[name='wctDelvryCnt']").val(1);
        }
        
        if(!confirm("저장하시겠습니까?")) return;
        
        var data =  $("#insertForm").serialize();
        if(displayWorkProgress()){
            $.ajax({
                url : (pcntstid == "" || pcntstid == null) ? insertUrl : updateUrl,
                type: 'POST',
                cache : false,
                dataType: 'json',
                data : data,
                success : function (data){
                    if(data.result=="success"){
                        alert(data.msg);
                        gridHelper1.resetListContent();
                    }else{
                        alert(data.msg);
                    }
                    closeWorkProgress();
                }
            });
        }
    }
</script>