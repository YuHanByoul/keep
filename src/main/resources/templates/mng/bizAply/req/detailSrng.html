<form id="insertForm">
    <input type="hidden" name="aplyid" id="aplyid" th:value="${aplyid}" />
    <!-- [탭] 심사결과 -->
    <div class="tab-pane" id="tab_07" role="tabpanel">
        <div class="card">
            <!-- 심사결과 -->
            <div class="card-header p-b-0">
                <div class="text-right">
                    <button class="btn btn-disabled btn-sm m-r-5" onclick="updateResult('193103'); return false;">미선정</button>
                    <button class="btn btn-primary btn-sm" onclick="updateResult('193102'); return false;">선정</button>
                </div>
                <h3 class="sub-title"><strong><th:block th:if="${#lists.size(list_2) > 0}">1차 </th:block>심사결과</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="table-responsive">
                    <table class="table table-framed table-bordered" th:if="${#lists.size(list_1) > 0}">
                        <thead>
                        <tr class="border-bottom-inverse">
                            <th class="text-center table-active" th:each="list, i : ${list_1}"><th:block th:text="${list.nm}"/></th>
                            <th class="text-center table-active">총점</th>
                            <th class="text-center table-active">평균점수</th>
                            <th class="text-center table-active">평가등급</th>
                            <th class="text-center table-active">평가순위</th>
                            <th class="text-center table-active">선정결과</th>
                            <th class="text-center table-active">상세보기</th>
                            
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td class="text-center v-middle" th:each="list, i : ${list_1}"><strong><th:block th:text="${list.scr}"/></strong></td>
                            <td class="text-center v-middle"><strong><th:block th:text="${list_1[0].totScr}"/></strong></td>
                            <td class="text-center v-middle"><strong th:class="${list_1[0].lwetCrtrScrUseYnFirst == 'Y' and list_1[0].lwetCrtrScrFirst <= list_1[0].avgScr ? 'text-info' : (list_1[0].lwetCrtrScrUseYnFirst == 'Y' and list_1[0].lwetCrtrScrFirst > list_1[0].avgScr ? 'text-danger' : '')}"><th:block th:text="${list_1[0].totScr == '-' ? '-' : list_1[0].avgScr}"/></strong></td>
                            <td class="text-center v-middle"><strong><th:block th:text="${list_1[0].firstGrd}"/></strong></td>
                            <td class="text-center v-middle"><strong th:class="${list_1[0].nopeLmtUseYn == 'Y' and list_1[0].nopeLmt >= list_1[0].firstRkng ? 'text-info' : (list_1[0].nopeLmtUseYn == 'Y' and list_1[0].nopeLmt < list_1[0].firstRkng ? 'text-danger' : '')}"><th:block th:text="${list_1[0].firstRkng}"/></strong></td>
                            <td class="text-center v-middle"><strong><th:block th:text="${list_1[0].scndSrngTrgtYn == 'Y' ? '2차 대상' : list_1[0].slctnSttsNm}"/></strong></td>
                            <td class="text-center v-middle">
                                <button type="button" class="btn btn-primary btn-sm" onclick="loadSrngContent('1'); return false;">상세보기</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div th:if="${#lists.size(list_2) > 0 and list_2[0].scndSrngTrgtYn == 'Y'}" class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>2차 심사결과</strong></h3>
            </div>
            
            <div th:if="${#lists.size(list_2) > 0 and list_2[0].scndSrngTrgtYn == 'Y'}" class="card-block-small p-t-0">
                <div class="table-responsive">
                    <table class="table table-framed table-bordered">
                        <thead>
                        <tr class="border-bottom-inverse">
                            <th class="text-center table-active" th:each="list, i : ${list_2}"><th:block th:text="${list.nm}"/></th>
                            <th class="text-center table-active">총점</th>
                            <th class="text-center table-active">평균점수</th>
                            <th class="text-center table-active">평가등급</th>
                            <th class="text-center table-active">평가순위</th>
                            <th class="text-center table-active">선정결과</th>
                            <th class="text-center table-active">상세보기</th>
                            
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td class="text-center v-middle" th:each="list, i : ${list_2}"><strong><th:block th:text="${list.scr}"/></strong></td>
                            <td class="text-center v-middle"><strong><th:block th:text="${list_2[0].totScr}"/></strong></td>
                            <td class="text-center v-middle"><strong th:class="${list_1[0].lwetCrtrScrUseYnScnd == 'Y' and list_1[0].lwetCrtrScrScnd <= list_1[0].avgScr ? 'text-info' : (list_1[0].lwetCrtrScrUseYnScnd == 'Y' and list_1[0].lwetCrtrScrScnd > list_1[0].avgScr ? 'text-danger' : '')}"><th:block th:text="${list_2[0].totScr == '-' ? '-' : list_2[0].avgScr}"/></strong></td>
                            <td class="text-center v-middle"><strong><th:block th:text="${list_2[0].firstGrd}"/></strong></td>
                            <td class="text-center v-middle"><strong th:class="${list_1[0].nopeLmtUseYn == 'Y' and list_1[0].nopeLmt >= list_1[0].scndRkng ? 'text-info' : (list_1[0].nopeLmtUseYn == 'Y' and list_1[0].nopeLmt < list_1[0].scndRkng ? 'text-danger' : '')}"><th:block th:text="${list_2[0].scndRkng}"/></strong></td>
                            <td class="text-center v-middle"><strong><th:block th:text="${list_2[0].slctnSttsNm}"/></strong></td>
                            <td class="text-center v-middle">
                                <button type="button" class="btn btn-primary btn-sm" onclick="loadSrngContent('2'); return false;">상세보기</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>    
    </div>
    <!-- // [탭] -->
    
    <div class="col-12">
	    <div class="card">
	        <div id="srngContent"></div>
	    </div>
	</div>
</form>

<script th:inline="javascript">
    var listUrl = "/mng/bizAply/req/selectSrngList.do";
    /*<![CDATA[*/
    var aplyid = /*[[${aplyid}]]*/null;
    /*]]>*/
    $(function(){
//     	getList();
    });

    function loadSrngContent(cycl){
        $.ajax({
            cache   : false
          , url     : "/mng/bizAply/req/detailSrngDtl.html?aplyid=" + aplyid + '&cycl=' + cycl
          , type    : 'GET'
          , async   : 'false'
          , dataType: 'html'
          , success : function(result){ //요청이 성공했을때 실행되는 콜백 함수
              $('#srngContent').html(result);
              scrollIntoView('srngContent');
          }
        });
        showContent();
    }
    
    // 조회
    function getList(){
        $.ajax({
            url : listUrl + '?aplyid=' + aplyid,
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            cache : false,
            dataType: 'json',
            data : '',
            success : function (data){
            	var html = "";
            	for(var i = 0; i < data.length; i++) {
            		if (data[i].cycl == "1") {
            			
            		}
            	}
            }
        });
    }
    
    function updateResult(sttsCd) {
    	selectedItems = [];
    	selectedItems.push(aplyid);
    	slctnSttsUpdate(sttsCd);
    }

</script>