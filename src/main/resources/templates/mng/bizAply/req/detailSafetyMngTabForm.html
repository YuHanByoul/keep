<form id="insertForm">
    <input type="hidden" name="aplyid" id="aplyid" th:value="${detail.aplyid}" />
    <!-- [탭] 안전관리 적정성 -->
    <div class="tab-pane" id="tab_06" role="tabpanel">
        <div class="card">
            <!-- 안전교육계획 -->
            <div class="card-header p-b-0">
                <h3 class="sub-title"><strong>안전교육계획</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>안전관리 관련 자격 유무</strong></div>
                            <div class="form-radio">
                                <span kattr:radio_yn="qlfcYn" label1="있음" label2="없음" th:attr="defaultVal=${detail.qlfcYn == null ? 'Y' : detail.qlfcYn}" isAdmin="true"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>자격번호</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="qlfcNo" name="qlfcNo" placeholder="Text Input Validation" th:value="${detail.qlfcNo}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 프로그램 지도자 대상 교육 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>프로그램 지도자 대상 교육</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>교육시기</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="ldrEduSess" name="ldrEduSess" placeholder="Text Input Validation" th:value="${detail.ldrEduSess}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>담당자</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="ldrEduPic" name="ldrEduPic" placeholder="Text Input Validation" th:value="${detail.ldrEduPic}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row form-group mb-3">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>교육내용 개요</strong></label>
                    <div class="col-sm-12">
                        <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="Default textarea" id="ldrEduCn" name="ldrEduCn"><th:block th:text="${detail.ldrEduCn}"/></textarea>
                    </div>
                </div>
            </div>
            <!-- 프로그램 참가자 대상 교육 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>프로그램 참가자 대상 교육</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>교육시기</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="prtcpntEduSess" name="prtcpntEduSess" placeholder="Text Input Validation" th:value="${detail.prtcpntEduSess}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>담당자</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="prtcpntEduPic" name="prtcpntEduPic" placeholder="Text Input Validation" th:value="${detail.prtcpntEduPic}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row form-group mb-3">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>교육내용 개요</strong></label>
                    <div class="col-sm-12">
                        <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="Default textarea" id="prtcpntEduCn" name="prtcpntEduCn"><th:block th:text="${detail.prtcpntEduCn}"/></textarea>
                    </div>
                </div>
            </div>
            <!-- 비상연락체계 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>비상연락체계</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>총괄 담당자 성명</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="picNm" name="picNm" placeholder="Text Input Validation" th:value="${detail.picNm}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>총괄 담당자 연락처</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="picTelno" name="picTelno" placeholder="Text Input Validation" th:value="${detail.picTelno}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-6 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>주교사의 역할</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="mainTcherRole" name="mainTcherRole" placeholder="Text Input Validation" th:value="${detail.mainTcherRole}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>보조교사의 역할</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="asstnTcherRole" name="asstnTcherRole" placeholder="Text Input Validation" th:value="${detail.asstnTcherRole}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 응급시설 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>응급시설</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>소방서</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="frsttNm" name="frsttNm" placeholder="Text Input Validation" th:value="${detail.frsttNm}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>연락처</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="frsttTelno" name="frsttTelno" placeholder="Text Input Validation" th:value="${detail.frsttTelno}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>경찰서</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="polcsttnNm" name="polcsttnNm" placeholder="Text Input Validation" th:value="${detail.polcsttnNm}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>연락처</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="polcsttnTelno" name="polcsttnTelno" placeholder="Text Input Validation" th:value="${detail.polcsttnTelno}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>근거리 약국</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="parmacyNm" name="parmacyNm" placeholder="Text Input Validation" th:value="${detail.parmacyNm}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>연락처</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="parmacyTelno" name="parmacyTelno" placeholder="Text Input Validation" th:value="${detail.parmacyTelno}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>근거리 병원</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="hsptlNm" name="hsptlNm" placeholder="Text Input Validation" th:value="${detail.hsptlNm}">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-3 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>연락처</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="hsptlTelno" name="hsptlTelno" placeholder="Text Input Validation" th:value="${detail.hsptlTelno}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 프로그램 평가 체계 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>프로그램 평가 체계</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row">
                    <div class="col-12 mb-3">
                        <div class="mb-0 form-group">
                            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>평가 목적</strong></label>
                            <div class="col-sm-12">
                                <input type="text" class="form-control form-control-sm" id="evlPrps" name="evlPrps" placeholder="Text Input Validation" th:value="${detail2.evlPrps}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 평가방식 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>평가방식</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="table-responsive">
                    <table class="table table-framed table-bordered">
                        <thead>
                        <tr class="border-bottom-inverse">
                            <th class="text-center v-middle" style="width: 120px;">구분</th>
                            <th class="text-center v-middle" style="width: 80px;">평가시기</th>
                            <th class="text-center v-middle">평가 목표 및 항목</th>
                            <th class="text-center v-middle" style="width: 150px;">평가도구</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <th class="text-center v-middle table-active" rowspan="2">지도자 평가</th>
                            <td class="text-center v-middle">사전</td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="bfrLdrEvlArtcl" name="bfrLdrEvlArtcl" placeholder="Text Input Validation" th:value="${detail2.bfrLdrEvlArtcl}">
                            </td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="bfrLdrEvlTl" name="bfrLdrEvlTl" placeholder="Text Input Validation" th:value="${detail2.bfrLdrEvlTl}">
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center v-middle">사후</td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="aftrLdrEvlArtcl" name="aftrLdrEvlArtcl" placeholder="Text Input Validation" th:value="${detail2.aftrLdrEvlArtcl}">
                            </td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="aftrLdrEvlTl" name="aftrLdrEvlTl" placeholder="Text Input Validation" th:value="${detail2.aftrLdrEvlTl}">
                            </td>
                        </tr>
                        <tr>
                            <th class="text-center v-middle table-active" rowspan="2">참여자 평가</th>
                            <td class="text-center v-middle">사전</td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="bfrPrtpntEvlArtcl" name="bfrPrtpntEvlArtcl" placeholder="Text Input Validation" th:value="${detail2.bfrPrtpntEvlArtcl}">
                            </td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="bfrPrtpntEvlTl" name="bfrPrtpntEvlTl" placeholder="Text Input Validation" th:value="${detail2.bfrPrtpntEvlTl}">
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center v-middle">사후</td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="aftrPrtpntEvlArtcl" name="aftrPrtpntEvlArtcl" placeholder="Text Input Validation" th:value="${detail2.aftrPrtpntEvlArtcl}">
                            </td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="aftrPrtpntEvlTl" name="aftrPrtpntEvlTl" placeholder="Text Input Validation" th:value="${detail2.aftrPrtpntEvlTl}">
                            </td>
                        </tr>
                        <tr>
                            <th class="text-center v-middle table-active" rowspan="2">인솔자 평가</th>
                            <td class="text-center v-middle">사전</td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="bfrGdrEvlArtcl" name="bfrGdrEvlArtcl" placeholder="Text Input Validation" th:value="${detail2.bfrGdrEvlArtcl}">
                            </td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="bfrGdrEvlTl" name="bfrGdrEvlTl" placeholder="Text Input Validation" th:value="${detail2.bfrGdrEvlTl}">
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center v-middle">사후</td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="aftrGdrEvlArtcl" name="aftrGdrEvlArtcl" placeholder="Text Input Validation" th:value="${detail2.aftrGdrEvlArtcl}">
                            </td>
                            <td class="text-center v-middle">
                                <input type="text" class="form-control form-control-sm" id="aftrGdrEvlTl" name="aftrGdrEvlTl" placeholder="Text Input Validation" th:value="${detail2.aftrGdrEvlTl}">
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- 교육활동 기록/관리 -->
            <div class="card-header p-t-0 p-b-0">
                <h3 class="sub-title"><strong>교육활동 기록/관리</strong></h3>
            </div>
            <div class="card-block-small p-t-0">
                <div class="row align-items-center mb-3">
                    <div class="col-12 col-md-auto mb-2 mb-lg-0">
                        <div class="border-checkbox-section">
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="databaseWrtYn" id="databaseWrtYn" th:checked="${detail2.databaseWrtYn == 'Y' ? true : false}">
                                <label class="form-label form-label-sm border-checkbox-label mb-0" for="databaseWrtYn">
                                    데이터베이스(DB) 작성
                                </label>
                            </div>
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="clsjrnlWrtYn" id="clsjrnlWrtYn" th:checked="${detail2.clsjrnlWrtYn == 'Y' ? true : false}">
                                <label class="form-label form-label-sm border-checkbox-label mb-0" for="clsjrnlWrtYn">
                                    수업일지 작성
                                </label>
                            </div>
                            <div class="border-checkbox-group border-checkbox-group-inverse">
                                <input class="border-checkbox" type="checkbox" name="etcYn" id="etcYn" th:checked="${detail2.etcYn == 'Y' ? true : false}">
                                <label class="form-label form-label-sm border-checkbox-label mb-0" for="etcYn">
                                    기타
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md">
                        <input type="text" class="form-control form-control-sm" name="etcCn" id="etcCn" placeholder="Text Input Validation" th:value="${detail2.etcCn}" th:readonly="${detail2.etcYn == 'Y' ? false : true}">
                    </div>
                </div>
            </div>
            <!-- // -->
            <div class="card-block-small">
                <button class="btn btn-disabled m-r-5" onclick="gridHelper3.toggleContent(); return false;">취소</button>
                <button class="btn btn-primary" onclick="fn_save(); return false;">저장</button>
            </div>
        </div>
    </div>
</form>

<script th:inline="javascript">    
	/*<![CDATA[*/
	var popupYn = /*[[${popupYn}]]*/null;
	/*]]>*/
//     var listUrl = "/mng/bizAply/req/selectSuppList.do";
    var updateUrl = "/mng/bizAply/req/updateSafetyMng.do";
    
    $(function(){
    	if (popupYn == "Y") {
            $("input, select, textarea").prop("disabled", true);
            $("button").hide();
        }
    	$("#etcYn").click(function(){
    		if ($(this).is(":checked")) {
    			$("#etcCn").prop("readonly", false);    			
    		} else {
    			$("#etcCn").prop("readonly", true);
    			$("#etcCn").val("");
    		}
    	});
    });

    // 저장
    function fn_save(){
        if(!($("#insertForm").valid())) return;
        
        if(!confirm("저장하시겠습니까?")) return;
        
        if ($("#databaseWrtYn").is(":checked")) {
        	$("#databaseWrtYn").val("Y");
        } else {
        	$("#databaseWrtYn").val("N");
        }
        if ($("#clsjrnlWrtYn").is(":checked")) {
        	$("#clsjrnlWrtYn").val("Y");
        } else {
        	$("#clsjrnlWrtYn").val("N");
        }
        if ($("#etcYn").is(":checked")) {
        	$("#etcYn").val("Y");
        } else {
        	$("#etcYn").val("N");
        }
        
        var data =  $("#insertForm").serialize();        
        
        if(displayWorkProgress()){
            $.ajax({
                url : updateUrl,
                type: 'POST',
                cache : false,
                dataType: 'json',
                data : data,
                success : function (data){
                    if(data.result=="success"){
                        alert(data.msg);
                        gridHelper2.resetListContent();
                    }else{
                        alert(data.msg);
                    }
                    closeWorkProgress();
                }
            });
        }
    }

</script>