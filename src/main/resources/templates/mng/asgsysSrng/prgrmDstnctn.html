<form id="prgrmDstnctnFrm">
<input type="hidden" id="prgrmKey" name="prgrmKey" th:value="${prgrmDstnctnInfo.prgrmKey}"><!-- 우수성key -->
<input type="hidden" id="prgrmid" name="prgrmid" th:value="${prgrmDstnctnInfo.prgrmid}"><!-- 프로그램id -->
<input type="hidden" id="aplcntid" name="aplcntid" th:value="${prgrmDstnctnInfo.aplcntid}"><!-- 신청자 -->
<!-- <input type="hidden" id="eduSbjctCdLst" name="eduSbjctCdLst" th:value="${prgrmDstnctnInfo.eduSbjctCdLst}">교육주제코드 -->
<input type="hidden" id="eduPhotoFilegrpid" name="eduPhotoFilegrpid" th:value="${prgrmDstnctnInfo.eduPhotoFilegrpid}"> <!-- 교육사진파일그룹코드 -->



    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>프로그램 개요</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnGreatProgramName"><strong>프로그램명</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="prgrmNm" id="prgrmNm" placeholder="" th:value="${prgrmDstnctnInfo.prgrmNm}" />
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>컨설팅 진행여부</strong></div>
            <div class="col-12 row align-items-center">
                <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                    <div class="form-radio">
                        <span kattr:radio_yn="cnsltngPrgrsYn" label1="컨설팅 진행" label2="컨설팅 미진행" th:attr="defaultVal=${prgrmDstnctnInfo.cnsltngPrgrsYn == 'Y' ? 'Y': 'N'}" addStyle="margin-top:4px" addClass="col-sm-3" isAdmin="true" />
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
<!--                     <span kattr:select_code="cnsltngKndCd" th:attr="grpCd=130,selectedCd=${prgrmDstnctnInfo.cnsltngKndCd},disabled=${prgrmDstnctnInfo.cnsltngPrgrsYn != 'Y'?'disabled':''}" firstOptTxt="- 전체 -" addClass="form-select form-select-sm form-control-sm" isAdmin="true"> -->

                    <select title="컨설팅 진행"  id="cnsltngid" name="cnsltngid" th:attr="disabled=${prgrmDstnctnInfo.cnsltngPrgrsYn != Y ? 'disabled':''}" class="form-select form-select-sm form-control-sm">
                        <option value=""> - 선택 - </option>
                        <th:block th:if="${#lists.size(csltngList) > 0}" th:each="list, i: ${csltngList}">
                            <option th:value="${list.cnsltngid}" th:selected="${list.cnsltngid == prgrmDstnctnInfo.cnsltngid}"><th:block th:text="${list.prgrmNm}" /></option>
                        </th:block>
                    </select>

                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>숙박여부</strong></div>
                    <div class="col-12 row align-items-center">
                        <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                            <div class="form-radio">
                                <span kattr:radio_yn="styYn" label1="숙박" label2="비숙박" th:attr="defaultVal=${prgrmDstnctnInfo.styYn == 'Y' ? 'Y': 'N'}" addStyle="margin-top:4px" addClass="col-sm-3" isAdmin="true" />
                            </div>
                        </div>
                        <div class="col-12 col-lg-auto row align-items-center">
                            <div class="col-auto">
                                <input type="text" class="form-control form-control-sm text-right" name="styNight" id="styNight" placeholder="" th:value="${prgrmDstnctnInfo.styNight}" style="width: 40px;"/>
                            </div>
                            <div class="col-auto p-l-0">박</div>
                            <div class="col-auto">
                                <input type="text" class="form-control form-control-sm text-right" name="styDaytm" id="styDaytm" placeholder="" th:value="${prgrmDstnctnInfo.styDaytm}" style="width: 40px;"/>
                            </div>
                            <div class="col-auto p-l-0">일</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>운영형태</strong></div>
                    <div class="col-12">
                        <div class="form-radio bg-form"><!-- [230125] class bg-form 추가 -->
                            <span id="operFrmCd" kattr:radio_code="operFrmCd" th:attr="grpCd=120, selectedCd=${prgrmDstnctnInfo.operFrmCd}" addStyle="margin-top:4px" addClass="col-sm-3" isAdmin="true" disabled>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>운영일정</strong></div>
            <div class="border-checkbox-section bg-form"><!-- [230125] class bg-form 추가 -->
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="jan" id="jan" th:checked = "${prgrmDstnctnInfo.jan=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="jan">1월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="feb" id="feb" th:checked = "${prgrmDstnctnInfo.feb=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="feb">2월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="mar" id="mar" th:checked = "${prgrmDstnctnInfo.mar=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="mar">3월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="apr" id="apr" th:checked = "${prgrmDstnctnInfo.apr=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="apr">4월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="may" id="may" th:checked = "${prgrmDstnctnInfo.may=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="may">5월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="june" id="june" th:checked = "${prgrmDstnctnInfo.june=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="june">6월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="july" id="july" th:checked = "${prgrmDstnctnInfo.july=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="july">7월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="aug" id="aug" th:checked = "${prgrmDstnctnInfo.aug=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="aug">8월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="sept" id="sept" th:checked = "${prgrmDstnctnInfo.sept=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="sept">9월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="oct" id="oct" th:checked = "${prgrmDstnctnInfo.oct=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="oct">10월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="nov" id="nov" th:checked = "${prgrmDstnctnInfo.nov=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="nov">11월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="dcm" id="dcm" th:checked = "${prgrmDstnctnInfo.dcm=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="dcm">12월</label>
                </div>
            </div>
        </div>


         <div class="row">
            <div class="col-lg-6 mb-3">
                <div id="eduSbjctDiv" class="mb-0 form-group required">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>교육주제</strong></div>
                    <div id="dynamicDiv" class="dynamicDiv">

                        <div class="dynamicDiv" th:if="${#lists.size(eduSbjctCdLst) > 0}" th:each="cd, i : ${eduSbjctCdLst}">
                            <div class="row subjectCode mt-1" >
                                <div class="col-sm-3">
                                    <span kattr:select_code="eduSbjctCd1" th:attr="selectedCd=${cd.substring(0,6)}" grpcd="155" firstOptTxt="- 선택 -" addClass="input-sm" isAdmin="true"></span>
                                </div>
                                <div class="col-sm-3 mt-1 mt-sm-0">
                                    <select name="eduSbjctCds" th:id="'eduSbjctCd_'+${i.index+1}" class="form-select form-select-sm"></select>
                                </div>
                                <div class="col-sm-3 mt-2 mt-sm-0 btnList">
                                    <button type="button" onclick="addCode();" class="input-group-text btn btn-primary btn-sm">+</button>
                                    <button type="button" th:onclick="removeCode(${i.count});" class="input-group-text btn btn-primary btn-sm" th:if="${i.index > 0}">-</button>
                                </div>
                            </div>
                        </div>
                        <div class="dynamicDiv" th:unless="${#lists.size(eduSbjctCdLst) > 0}">
                            <div class="row subjectCode mt-1" >
                                <div class="col-sm-3 mt-1 mt-sm-0">
                                    <span kattr:select_code="eduSbjctCd1" grpcd="155" selectedCd='155101' firstOptTxt="- 선택 -" addClass="input-sm" isAdmin="true"></span>
                                </div>
                                <div class="col-sm-3 mt-1 mt-sm-0">
                                    <select name="eduSbjctCds" id="eduSbjctCd_1" class="form-select form-select-sm"></select>
                                </div>
                                <div class="col-sm-3 mt-2 mt-sm-0 btnList">
                                    <button type="button" onclick="addCode();" class="input-group-text btn btn-primary btn-sm">+</button>
                                </div>
                            </div>
                        </div>


<!--                         <div class="row subjectCode" id="eduSbjctCdDiv" th:each="cd :${eduSbjctCdLst}"> -->
<!--                             <div class="col-sm-3"> -->
<!--                                 <select name="eduSbjctCd" id="eduSbjctCd" class="form-select form-select-sm"> -->
<!--                                     <option value='' selected>- 선택 -</option> -->
<!--                                 </select> -->
<!--                             </div> -->
<!--                             <div class="col-sm-3 mt-1 mt-sm-0"> -->
<!--                                 <select name="sub_eduSbjctCd" id="sub_eduSbjctCd" class="form-select form-select-sm"> -->
<!--                                     <option value='' selected>- 선택 -</option> -->
<!--                                 </select> -->
<!--                             </div> -->
<!--                             <div class="col-sm-3 mt-2 mt-sm-0 btnList"> -->
<!--                                 <button type="button" onclick="addCode();" class="input-group-text btn btn-primary btn-sm">+</button> -->
<!--                             </div> -->
<!--                         </div> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>교육대상</strong></div>
            <div class="border-checkbox-section bg-form"><!-- [230125] class bg-form 추가 -->
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="infnt" id="infnt" th:checked="${prgrmDstnctnInfo.infnt=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="infnt">유아</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="schboy" id="schboy" th:checked="${prgrmDstnctnInfo.schboy=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="schboy">초등</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="msklsd" id="msklsd" th:checked="${prgrmDstnctnInfo.msklsd=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="msklsd">중등</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="hgschst" id="hgschst" th:checked="${prgrmDstnctnInfo.hgschst=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="hgschst">고등</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="adult" id="adult" th:checked="${prgrmDstnctnInfo.adult=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="adult">성인</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="wholAge" id="wholAge" th:checked="${prgrmDstnctnInfo.wholAge=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="wholAge">전연령</label>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatEduPlace"><strong>교육장소</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" name="eduPlc" id="eduPlc" placeholder="교육 장소" th:value="${prgrmDstnctnInfo.eduPlc}" />
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatEduPersonnel"><strong>교육인원</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm text-right" name="eduNope" id="eduNope" placeholder="교육 인원" th:value="${prgrmDstnctnInfo.eduNope}" />
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatEduTime1"><strong>교육시간</strong></label>
                    <div class="col-12 row align-items-center">
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm text-right" name="eduCnt" id="eduCnt" placeholder="" th:value="${prgrmDstnctnInfo.eduCnt}" style="width: 40px;"/>
                        </div>
                        <div class="col-auto p-l-0">회</div>
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm text-right" name="eduHr" id="eduHr" placeholder="" th:value="${prgrmDstnctnInfo.eduHr}" style="width: 40px;"/>
                        </div>
                        <div class="col-auto p-l-0">시간</div>
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm text-right" name="eduMnt" id="eduMnt" placeholder="" th:value="${prgrmDstnctnInfo.eduMnt}" style="width: 40px;"/>
                        </div>
                        <div class="col-auto p-l-0">분</div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>프로그램 참가비용</strong></div>
                    <div class="col-12 row align-items-center">
                        <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                            <div class="form-radio">

                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="prgrmDstnctnInfoGreatProgramCostStatus" checked/>
                                        <i class="helper"></i>무료
                                    </label>
                                </div>
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="prgrmDstnctnInfoGreatProgramCostStatus"/>
                                        <i class="helper"></i>유료
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-auto row align-items-center">
                            <div class="col-auto">
                                <input type="text" class="form-control form-control-sm text-right" name="etrfee" id="etrfee" th:value="${prgrmDstnctnInfo.etrfee}"/>
                            </div>
                            <div class="col-auto p-l-0">원 (1인당 비용)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>교육사진</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <p>권장 사진 크기(가로 800 X 세로 600px)</p>
        <!-- [230125] 교육사진 항목에 수정 시 - 이미지 등록, 삭제 버튼 추가 -->
        <div class="col-12 row" >
            <div id="delFileDiv1" class="col-12 col-lg-6 col-xl-4 mb-3">
                <div class="img-thum">
                    <img id="eduPhotoFile1" class="" th:if="${eduPhotoFileList[0].fileid==0}" alt="Generic placeholder image">
                    <img id="eduPhotoFile1" class="" th:if="${eduPhotoFileList[0].fileid!=0}" th:src="${ '/downloadFileByFileid.do?fileid=' + eduPhotoFileList[0].fileid + '&file_idntfc_key=' + eduPhotoFileList[0].fileIdntfcKey }" alt="Generic placeholder image">
                </div>
                <div class="mt-2 text-center">
                    <button id="eduPhotoFileDelBtn1" type="button" class="btn btn-inverse btn-sm" th:fileid="${eduPhotoFileList[0].fileid}" th:fileIdntfcKey="${eduPhotoFileList[0].fileIdntfcKey}" onclick="fn_deleteEduPhotoFile(this.id)">이미지 삭제</button>
                </div>
            </div>
            <div id="regFileDiv1" class="col-12 col-lg-6 col-xl-4 mb-3">
                <div class="mt-2 text-center">
                    <label class="btn btn-primary btn-sm">
                        이미지 등록 <input id="eduPhotoFileInpu1" type="file" name="eduPhotoFileInpu1" style="display: none;">
                    </label>
                </div>
            </div>

            <div id="delFileDiv2" class="col-12 col-lg-6 col-xl-4 mb-3">
                <div class="img-thum">
                    <img id="eduPhotoFile1" class="" th:if="${eduPhotoFileList[1].fileid==0}" src="../../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
                    <img id="eduPhotoFile1" class="" th:if="${eduPhotoFileList[1].fileid!=0}" th:src="${ '/downloadFileByFileid.do?fileid=' + eduPhotoFileList[1].fileid + '&file_idntfc_key=' + eduPhotoFileList[1].fileIdntfcKey }" alt="Generic placeholder image">
                </div>
                <div class="mt-2 text-center">
                    <button id="eduPhotoFileDelBtn2" type="button" class="btn btn-inverse btn-sm" th:fileid="${eduPhotoFileList[1].fileid}" th:fileIdntfcKey="${eduPhotoFileList[1].fileIdntfcKey}" onclick="fn_deleteEduPhotoFile(this.id)">이미지 삭제</button>
                </div>
            </div>
            <div id="regFileDiv2" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="mt-2 text-center">
                    <label class="btn btn-primary btn-sm">
                        이미지 등록 <input id="eduPhotoFileInpu2" type="file" name="eduPhotoFileInpu2" style="display: none;">
                    </label>
                </div>
            </div>
            <div id="delFileDiv3" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="img-thum">
                    <img id="eduPhotoFile1" th:if="${eduPhotoFileList[2].fileid==0}" src="../../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
                    <img id="eduPhotoFile1" th:if="${eduPhotoFileList[2].fileid!=0}" th:src="${ '/downloadFileByFileid.do?fileid=' + eduPhotoFileList[2].fileid + '&file_idntfc_key=' + eduPhotoFileList[2].fileIdntfcKey }" alt="Generic placeholder image">
                </div>
                <div class="mt-2 text-center">
                    <button id="eduPhotoFileDelBtn3" type="button" class="btn btn-inverse btn-sm" th:fileid="${eduPhotoFileList[2].fileid}" th:fileIdntfcKey="${eduPhotoFileList[2].fileIdntfcKey}" onclick="fn_deleteEduPhotoFile(this.id)">이미지 삭제</button>
                </div>
            </div>
            <div id="regFileDiv3" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="mt-2 text-center">
                    <label class="btn btn-primary btn-sm">
                        이미지 등록 <input id="eduPhotoFileInpu3" type="file" name="eduPhotoFileInp3" style="display: none;">
                    </label>
                </div>
            </div>
        </div>
        <!-- //[230125] 교육사진 항목에 수정 시 - 이미지 등록, 삭제 버튼 추가 -->
    </div>


    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>프로그램소개</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroEduPurpose"><strong>교육목적</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="eduPrps" id="eduPrps" placeholder="교육 목적" th:value="${prgrmDstnctnInfo.eduPrps}" >
            </div>
        </div>
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroProgramName1"><strong>환경교육 적절성</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="appro" id="appro" placeholder="환경교육 적절성" th:value="${prgrmDstnctnInfo.appro}" >
            </div>
        </div>
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroProgramName2"><strong>프로그램 우수성</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="dstnctn" id="dstnctn" placeholder="프로그램 우수성" th:value="${prgrmDstnctnInfo.dstnctn}" >
            </div>
        </div>
        <div class="mb-0 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroEduContents"><strong>교육내용(체험활동 등)</strong></label>
            <div class="col-12">
                <textarea rows="5" cols="5" class="form-control form-control-sm" id="eduCn" name="eduCn"><th:block th:text="${prgrmDstnctnInfo.eduCn}"></th:block></textarea>
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>프로그램 운영일정</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="col-12 table-border-style">
            <div class="col-12 table-responsive">
                <table class="table table-framed">
                    <thead>
                    <tr>
                        <th colspan="6" class="text-center">프로그램 전체 일정표</th>
                    </tr>
                    <tr>
                        <th class="text-center" style="width: 70px;">일정</th>
                        <th class="text-center" style="width: 130px;">시작시간</th>
                        <th class="text-center" style="width: 130px;">종료시간</th>
                        <th class="text-center">세부(단위) 프로그램명</th>
                        <th class="text-center">관련교육과정</th>
                        <th class="text-center" style="width: 117px;">설정</th>
                    </tr>
                    </thead>
                    <tbody id="schdlTbody">


                        <th:block th:unless="${#lists.isEmpty(prgrmSchdlList)}" th:each="schdl , i : ${prgrmSchdlList}" >

                            <tr th:id="${ 'schdlTr' + i.count }">
                                <td class="v-middle text-center" th:id="${ 'rnd' + i.count }"><th:block th:text="${schdl.rnd}" ></td>
                                <td>
                                    <div class="col-12 row m-0">
                                        <div class="col-6 p-l-0 p-r-5">
                                            <input type="number" class="form-control form-control-sm" pattern="[0-9]" min="0" max="23" name="bgngHr" th:id="${ 'bgngHr' + i.count }" placeholder="00" th:value="${schdl.bgngHr}"/>
                                        </div>
                                        <div class="col-6 p-r-0 p-l-5">
                                            <input type="number" class="form-control form-control-sm" pattern="[0-9]" min="0" max="59" name="bgngMnt" th:id="${ 'bgngMnt' + i.count }" placeholder="00" th:value="${schdl.bgngMnt}"/>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="col-12 row m-0">
                                        <div class="col-6 p-l-0 p-r-5">
                                            <input type="number" class="form-control form-control-sm" maxlength="2" min="0" max="23" name="endHr" th:id="${ 'endHr' + i.count }" placeholder="00" th:value="${schdl.endHr}"/>
                                        </div>
                                        <div class="col-6 p-r-0 p-l-5">
                                            <input type="number" class="form-control form-control-sm" maxlength="2" min="0" max="59" name="endMnt" th:id="${ 'endMnt' + i.count }" placeholder="00" th:value="${schdl.endMnt}"/>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="schdlPrgrmNm" th:id="${ 'schdlPrgrmNm' + i.count }" placeholder="프로그램 명" th:value="${schdl.prgrmNm}"/>
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="crs" th:id="${ 'crs' + i.count }" placeholder="관련교육과정" th:value="${schdl.crs}"/>
                                </td>
                                <td>
                                    <div class="btn-group-sm">
                                        <button type="button" class="btn btn-primary m-r-5" th:id="${ 'addBtnSchdl' + i.count }" th:onclick="addSchdl(this.id)" >추가</button>
                                        <button type="button" class="btn btn-inverse"       th:id="${ 'delBtnSchdl' + i.count }" th:onclick="deleteSchdl(this.id)" th:if="${i.index > 0}" >삭제</button>
                                    </div>
                                </td>
                            </tr>
                        </th:block>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>유사시 대처 계획</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatNeedCopingMethodWeather"><strong>기상상황</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="wetherSttn" id="wetherSttn" placeholder="" th:value="${prgrmDstnctnInfo.wetherSttn}" >
            </div>
        </div>
        <div class="mb-0 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatNeedCopingMethod"><strong>대처방법</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="actnMthd" id="actnMthd" placeholder="" th:value="${prgrmDstnctnInfo.actnMthd}" >
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>대처계획</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="col-12 table-border-style">
            <div class="col-12 table-responsive">
                <table class="table table-framed">
                    <thead>
                    <tr>
                        <th colspan="3" class="text-center">관련된 교육과정 내용</th>
                    </tr>
                    <tr>
                        <th class="text-center">본 프로그램명</th>
                        <th class="text-center">대체 프로그램명</th>
                        <th class="text-center" style="width: 117px;">설정</th>
                    </tr>
                    </thead>
                    <tbody id="planTbody">
                        <th:block th:each="plan , i : ${emrgcyActnPlanLst}" >
                            <tr th:id="${ 'planTr' + i.count}">
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="prgrmNm" th:id="${ 'planPrgrmNm' + i.count}" placeholder="본 프로그램명" th:value="${plan.prgrmNm}"/>
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="sbstnPrgrmNm" th:id="${'sbstnPrgrmNm' + i.count }" placeholder="대체 프로그램명" th:value="${plan.sbstnPrgrmNm}"/>
                                </td>
                                <td>
                                    <div class="btn-group-sm">
                                        <button type="button" class="btn btn-primary m-r-5" th:id="${ 'addBtnPlan' + i.count }" th:onclick="addPlan(this.id)" >추가</button>
                                        <button type="button" class="btn btn-inverse"       th:id="${ 'delBtnPlan' + i.count }" th:onclick="deletePlan(this.id)" th:if="${i.index > 0}" >삭제</button>
                                    </div>
                                </td>
                            </tr>
                        </th:block>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-block-small">
        <button type="button" id="btnLstDstnctn"  class="btn btn-inverse m-r-5" onclick="gridHelper1.resetListContent()">목록</button>
        <button type="button" id="btnSaveDstnctn" class="btn btn-primary m-r-5" onclick="prgrmDstnctnSaveBtn()">저장</button>
        <button type="button" id="btnNextDstnctn" class="btn btn-primary" onclick="fn_dstnctnNextbtn()">다음</button>
    </div>
</div>
</form>

<script th:inline="javascript">

var veduPhotoFileList = /*[[${eduPhotoFileList}]]*/null;
var eduSbjctCdLst = /*[[${eduSbjctCdLst}]]*/null;
/* 커스텀태그(공통코드) : 교육주제 */
var getCodeListUrl = "/mng/customAttr/grpCodeList.do"

var onImgId='';

function readImage() {
	for(var i=0; i < veduPhotoFileList.length; i++){
		if(veduPhotoFileList[i].fileid==0){
			$("#delFileDiv"+(i+1)).hide();
            $("#regFileDiv"+(i+1)).show();
		}else{
			$("#delFileDiv"+(i+1)).show();
            $("#regFileDiv"+(i+1)).hide();
		}
	}


	$('[id^=eduPhotoFile]').each(function(index, item){
		debugger;
	});
}

function setPhotoFileClass(file){

	var reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = function(){
        var image = new Image();
        image.src = reader.result;
        image.onload=function(){
            //이미지 파일의 넓이와 높이

            if(this.width < 236 || this.height < 126){
                $('#'+onImgid).addClass('scale-down');
            }
        };
    }
}

$('[id^=eduPhotoFileInpu]').on('change', function(event) {

	var trgtId = event.currentTarget.id;
	var trgtIdx = trgtId.substr(trgtId.length-1,1);

	onImgid='eduPhotoFile'+trgtIdx;

	var bEduFilegrpid= false;

	var bSmmall=false;

	var objFile = document.querySelector('#'+trgtId);

    var formData = new FormData();
    var content = "";



    formData.append("files", objFile.files[0]);

    formData.append("filegrpid", $("#eduPhotoFilegrpid").val() == "" ? 0 : $("#eduPhotoFilegrpid").val());
    formData.append("filegrpNm", "dstnctnEduPhoto_file");

    //file input 초기화
    $("#"+trgtId).val("");

    if(displayWorkProgress()){
        $.ajax({
            url : '/uploadMultipleFiles.do',
            processData : false,
            contentType : false,
            data : formData,
            type : 'POST',
            async : false,
            success : function(response) {

                if(response.result == 'fail'){
                    alert(response.msg);

                }else{
                    if($("#eduPhotoFilegrpid").val()=='0' || $("#eduPhotoFilegrpid").val()==''  || $("#eduPhotoFilegrpid").val()==null){
                    	$("#eduPhotoFilegrpid").val(response[0].filegrpid );
                    	bEduFilegrpid= true;
                    }else{
                    	loadJdsgTabContent("/mng/asgsysSrng/prgrmDstnctn.html?prgrmid=" + $("#prgrmid").val());    //재조회
                    }
                }
                closeWorkProgress();
            }
        });

    }

    if(bEduFilegrpid)fn_eduImgFileUpdate();

});

function fn_eduImgFileUpdate(){

	var formData = new FormData();
	formData.append("eduPhotoFilegrpid",$("#eduPhotoFilegrpid").val())
	formData.append("prgrmid", $("#prgrmid").val());

	if(displayWorkProgress()){
        $.ajax({
            url : "/mng/asgsysSrng/updateEduPhotoFilegrpid.do",
            processData : false,
            contentType : false,
            data : formData,
            async: false,
            type : 'POST',
            success : function(response) {

                if(response.result == 'fail'){
                    alert("교육사진파일 저장에 실패했습니다.");
                }else{
                	loadJdsgTabContent("/mng/asgsysSrng/prgrmDstnctn.html?prgrmid=" + $("#prgrmid").val());    //재조회
                }
                closeWorkProgress();
            }
        });
    }
}

function fn_deleteEduPhotoFile(btnid){

	var vFileid        = $("#"+btnid).attr("fileid");
	var vFileIdntfcKey = $("#"+btnid).attr("fileIdntfcKey");
	var trgtIdx = btnid.substr(btnid.length-1,1);

    if(!confirm("파일을 삭제하시겠습니까?")){return;}

    var deleteFileUrl="/deleteFile.do?fileid="+vFileid+"&file_idntfc_key=" + vFileIdntfcKey;

    $.ajax({
      url : deleteFileUrl,
      type: 'GET',
      cache : false,
      dataType: 'json',
      success : function (data){

    	  $("#regFileDiv" + trgtIdx).show();
          $("#delFileDiv" + trgtIdx).hide();

      },
      error : function (error){

      }
   })
}

//일정 추가 버튼
function addSchdl(btnid){
    var html;

    var trIdx = $("[id^=schdlTr]").length + 1;

    html +="<tr id='schdlTr" + trIdx + "'>                                                                                                               ";
    html +="    <td class='v-middle text-center'id='rnd"+trIdx+"'>"+ trIdx + "차시</td>                                                                  ";
    html +="    <td>                                                                                                                                     ";
    html +="        <div class='col-12 row m-0'>                                                                                                         ";
    html +="            <div class='col-6 p-l-0 p-r-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='bgngHr' id='bgngHr"+ trIdx + "' placeholder='00' value=''/>    ";
    html +="            </div>                                                                                                                           ";
    html +="            <div class='col-6 p-r-0 p-l-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='bgngMnt' id='bgngMnt"+ trIdx + "' placeholder='00' value=''/>  ";
    html +="            </div>                                                                                                                           ";
    html +="        </div>                                                                                                                               ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <div class='col-12 row m-0'>                                                                                                         ";
    html +="            <div class='col-6 p-l-0 p-r-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='endHr' id='endHr"+ trIdx + "' placeholder='00' value=''/>      ";
    html +="            </div>                                                                                                                           ";
    html +="            <div class='col-6 p-r-0 p-l-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='endMnt' id='endMnt"+ trIdx + "' placeholder='00' value=''/>    ";
    html +="            </div>                                                                                                                           ";
    html +="        </div>                                                                                                                               ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <input type='text' class='form-control form-control-sm' name='schdlPrgrmNm' id='schdlPrgrmNm"+ trIdx + "' placeholder='프로그램 명' value=''/> ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <input type='text' class='form-control form-control-sm' name='crs' id='crs"+ trIdx + "' placeholder='관련교육과정' value=''/>        ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <div class='btn-group-sm'>                                                                                                           ";
    html +="            <button type='button' class='btn btn-primary m-r-5' id='addBtnSchdl"+ trIdx + "' onclick='addSchdl(this.id)'    >추가</button>   ";
    html +="            <button type='button' class='btn btn-inverse'       id='delBtnSchdl"+ trIdx + "' onclick='deleteSchdl(this.id)' >삭제</button>   ";
    html +="        </div>                                                                                                                               ";
    html +="    </td>                                                                                                                                    ";
    html +="</tr>                                                                                                                                        ";

    $("#schdlTbody").append(html);


}

//일정 삭제 버튼
function deleteSchdl(btnid){

    var btnIdx = btnid.replace("delBtnSchdl","");
    $("#schdlTr"+btnIdx).remove();
}

//계획 추가 버튼
function addPlan(btnid){
    var html;

    var trIdx = $("[id^=planTr]").length + 1;

    html +="<tr id='planTr" + trIdx + "'>                                                                                                                              ";
    html +="    <td>                                                                                                                                                   ";
    html +="        <input type='text' class='form-control form-control-sm' name='prgrmNm' id='prgrmNm'" + trIdx +"' placeholder='본 프로그램명' value=''/>            ";
    html +="    </td>                                                                                                                                                  ";
    html +="    <td>                                                                                                                                                   ";
    html +="        <input type='text' class='form-control form-control-sm' name='sbstnPrgrmNm' id='sbstnPrgrmNm"+ trIdx + "' placeholder='대체 프로그램명' value=''/> ";
    html +="    </td>                                                                                                                                                  ";
    html +="    <td>                                                                                                                                                   ";
    html +="        <div class='btn-group-sm'>                                                                                                                         ";
    html +="            <button type='button' class='btn btn-primary m-r-5' id='addBtnPlan"+ trIdx + "' onclick='addPlan(this.id)'    >추가</button>                   ";
    html +="            <button type='button' class='btn btn-inverse'       id='delBtnPlan"+ trIdx + "' onclick='deletePlan(this.id)' >삭제</button>                   ";
    html +="        </div>                                                                                                                                             ";
    html +="    </td>                                                                                                                                                  ";
    html +="</tr>                                                                                                                                                      ";

    $("#planTbody").append(html);

}

//계획삭제 버튼
function deletePlan(btnid){

    var btnIdx = btnid.replace("delBtnPlan","");
    $("#planTr"+btnIdx).remove();
}

function validEduCd(){

	var flag = true;
	var itemId ="";
    //필수체크
    if(0== $(".subjectCode").length){
        alert("교육주제는 필수 입력입니다.");
        flag = false;
        return flag;
    }

    //교육주제
    $("select[id^=eduSbjctCd_").each(function(index, item) {

        if(item.value==null||item.value=="" ){
            flag = false;
            itemId = item.id;
        }

        if(!flag){
            alert("선택하지 않은 교육주제항목이 있습니다.");
            var offset = $("#"+itemId).offset();

            $('html, body').animate({scrollTop : offset.top - 300}, 300);
            $("#"+itemId).focus();
            return flag;
        }
    });
    return flag;
}

function prgrmDstnctnSaveBtn() {

    var vUrl = "";
    var param = {};

    if (!validEduCd()) return false;


    //컨설팅 진행여부
    if($("#cnsltngPrgrsYn1").prop("checked")){
        param["cnsltngPrgrsYn"] = 'Y';
        param["cnsltngid"] = $("#cnsltngid").val();
    }else{
    	param["cnsltngPrgrsYn"] = 'N';
        param["cnsltngid"] = '';
    }

    //교육주제
    $("select[id^=eduSbjctCd_").each(function(index, item) {
       if(index==0) param["eduSbjctCdLst"] = ""+item.value;
       if(index!=0) param["eduSbjctCdLst"] += ","+item.value;
    });

    //프로그램 일정
    $("[id^=schdlTr]").each(function(index, item)      { param["prgrmSchdlLst[" + index + "].prgrmid"] = $("#prgrmid").val()});    //프로그램 id (key)
    $("[id^=rnd]").each(function(index, item)          { param["prgrmSchdlLst[" + index + "].rnd"    ] = item.textContent; });    //차수
    $("[id^=bgngHr]").each(function(index, item)       {

    	param["prgrmSchdlLst[" + index + "].bgngHr" ] = item.value;
    });    //시작 시간

    $("[id^=bgngMnt]").each(function(index, item)      { param["prgrmSchdlLst[" + index + "].bgngMnt"] = item.value; });    //시작 분
    $("[id^=endHr]").each(function(index, item)        { param["prgrmSchdlLst[" + index + "].endHr"  ] = item.value; });    //종료 시간
    $("[id^=endMnt]").each(function(index, item)       { param["prgrmSchdlLst[" + index + "].endMnt" ] = item.value; });    //종료 분
    $("[id^=schdlPrgrmNm]").each(function(index, item) { param["prgrmSchdlLst[" + index + "].prgrmNm"] = item.value; });    //프로그램명
    $("[id^=crs]").each(function(index, item)          { param["prgrmSchdlLst[" + index + "].crs"    ] = item.value; });    //과정

    $("#prgrmDstnctnFrm input").each(function(index, item) {

        if("checkbox" == item.type){
        	if(item.checked ) {
        	    param[item.id] = "Y";
            }
            else{
                param[item.id] = "N";
            }
        }else{
        	param[item.id] = item.value;
        }
    });


    //숙박여부와 프로그램우수성의 운영형태로 체크리스트의 운영형태를 판단하여 체크리스트 결정

    var operFrmCd = $("[id^=operFrmCd]:checked").val();
    var styYn = $("[id^=styYn]:checked").val();
    param["styYn"] = styYn;

    if(operFrmCd!=null){

    	param["operFrmCd"]=operFrmCd;

        if(operFrmCd == "120104") {
            param["chkOperFrmCd"] = "145103";
        }
        else if ($("#operFrmCd").val() != "120104"){
            if(styYn=="Y"){
                param["chkOperFrmCd"] = "145101";
            }else if(styYn=="N"){
                param["chkOperFrmCd"] = "145102";
            }
        }
    }

    param["eduCn"] = $("#eduCn").val();    //교육 내용

    //프로그램 대처계획
    $("[id^=planTr]").each(function(index, item)       { param["emrgcyActnPlanLst[" + index + "].prgrmid"     ] = $("#prgrmid").val()});       //프로그램 id (key)
    $("[id^=sbstnPrgrmNm]").each(function(index, item) { param["emrgcyActnPlanLst[" + index + "].sbstnPrgrmNm"] = item.value; });    //차수
    $("[id^=planPrgrmNm]").each(function(index, item)  { param["emrgcyActnPlanLst[" + index + "].prgrmNm"     ] = item.value; });    //프로그램명

    var vprgrmKey = $("#prgrmKey").val();
    if( vprgrmKey != null && vprgrmKey != "" && vprgrmKey != 0 ) {
        // update
        vUrl = "/mng/asgsysSrng/updatePrgrmDstnctn.do";
    } else {
        //insert
        vUrl = "/mng/asgsysSrng/insertPrgrmDstnctn.do";
    }

    debugger;
    if(!confirm("저장 하시겠습니까?")){return;}

    $.ajax({
        url : vUrl,
        type: 'POST',
        cache : false,
        dataType: 'json',
        data : param,
        success : function (data){
            if(data.result=="success"){

                alert("저장이 완료 되었습니다.");
                gridHelper1.resetPageContent();
            }else{
                alert("저장중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
        },
        error : function (error){

        }
    });
}

function fn_dstnctnNextbtn(){

    $("#jdsgTab1Link").removeClass("active");
    $("#jdsgTab2Link").addClass("active");
    selectJdsgTab("jdsgTab2Link");
}

function fn_getNextDepthList(grpcd , upprcd, targetId){

    $.ajax({
        url : getCodeListUrl,
        type: 'GET',
        cache : false,
        dataType: 'json',
        async: false,
        data: {
              grpcd  : grpcd
            , upprcd : upprcd
        },
        success : function (data){
            writeHtml(grpcd,targetId,data,"");
        },
        error : function (error){
        }
    });
}

function writeHtml(grpcd,targetId,list,selected){

    var cntArr = targetId.split("_");
    var cnt = $(".subjectCode").length;
    var nextCnt = Number(cntArr[1]);
    var nextTarget = cntArr[0]+"_"+nextCnt;
    var html =``;

    html+=`
        <select id='${targetId}' class ='form-select form-select-sm'>
            <option value='' selected>- 선택 -</option>
    `;

    for(var i=0 ; i < list.length;i++){
        if(list[i].cdid==selected){
            html += `<option value=${list[i].cd} selected>${list[i].cdNm}</option>`;
        }else{
            html += `<option value=${list[i].cd}>${list[i].cdNm}</option>`;
        }
    }

    if(list.length == 0 && jQuery("#"+nextTarget)[0] != undefined){
        writeHtml(grpcd,nextTarget,list,selected);
    }

    html += `</select>`;
    $("#"+targetId).html(html);
}

function setNextDepth(grpcd , upprcd , targetId) {
    fn_getNextDepthList(grpcd , upprcd , targetId);
}

function addCode() {

    var idx = $(".subjectCode").length+1;

    var html = "<div class='row mt-2 subjectCode' id='eduSbjctCdDiv"+(idx)+"'>";
        html +=   "<div class='col-sm-3 mt-1 mt-sm-0'>";
        html +=       '<select name="eduSbjctCd1" id="eduSbjctCd'+(idx)+'" class="form-select form-select-sm" onchange="setNextDepth(\'155\', this.value, \'eduSbjctCd_'+(idx)+'\');">';
        html +=           $("#eduSbjctCd1_1").html();
        html +=       "</select>";
        html +=   "</div>";
        html += "<div class='col-sm-3 mt-1 mt-sm-0'>";
        html +=   "<select name='eduSbjctCds' id='eduSbjctCd_"+(idx)+"' class='form-select form-select-sm'>";
        html +=       "<option value='' selected>- 선택 -</option>";
        html +=       "</select>";
        html +=   "</div>";
        html += "<div class='col-sm-3 mt-1 mt-sm-0 btnList'>";
        html +=     "<button type='button' onclick='addCode();' class='input-group-text btn btn-primary btn-sm'>+</button>";
        html +=     "<button type='button' onclick='removeCode("+(idx)+");' class='input-group-text btn btn-primary btn-sm'>-</button>";
        html += "</div>";
    $("#dynamicDiv").append(html);

    fn_getNextDepthList('155','155101','eduSbjctCd_'+(idx));

}

function removeCode(idx){
	var idx = $("select[id^=eduSbjctCd]").length;
	$("#eduSbjctCdDiv"+idx).remove();
}

function setEduCdList(){
	var cdLst = $("#eduSbjctCdLst").val();
	var arr= cdLst.split(",");

	var idx =1;

	for( var i=1; i < arr.length; i++) {
		  addCode();
		  var cd = arr[i];
		  if ($("#eduSbjctCd" + idx).length == 0) addCode();

		  $("#eduSbjctCd" + idx).val(cd.substring(0, 6));
		  setNextDepth('155', cd.substring(0, 6), "sub_eduSbjctCd" + (idx));
		  $("#sub_eduSbjctCd" + idx).val(Number(cd));
		}

// 	for( var i=1; i < arr.length; i++) {
// 		addCode();
// 	};

// 	for( cd of arr) {
// 		if($("#eduSbjctCd"+idx).length==0) addCode();
// 		debugger;
// 		$("#eduSbjctCd" + idx).val(cd.substring(0, 6));
// 		setNextDepth('155', cd.substring(0, 6), "sub_eduSbjctCd"+(idx));
// 	    $("#sub_eduSbjctCd" + idx).val(Number(cd));
// 	}

}

function initPrgrmDstnctn(){

	//교육사진 set
	readImage();

	$("select[name='eduSbjctCd1']").each(function(i){
		var cd = $(this).val()

	    if(cd==""){
	    	cd ='155101'
	    }
	    $(this).prop("id", "eduSbjctCd1_"+(i+1));

        setNextDepth('155', cd, 'eduSbjctCd_'+(i+1));
    });

	$(eduSbjctCdLst).each(function(i){
        setTimeout(function(){
            $('#eduSbjctCd_'+(i+1)).val(eduSbjctCdLst[i]).prop("selected", true);
        }, 300);
    });

	$(".subjectCode").each(function(idx){
        $(this).eq(idx).find("select[name=eduSbjctCd1]").on('change', function(){
            setNextDepth('155',$(this).val(),'eduSbjctCd_'+(idx+1));
        });
    });


    $('#jdsgTab1Link').addClass("active");

    if( $("#styNight").val() == "" ) $("#styNight").val(0);
    if( $("#styDaytm").val() == "" ) $("#styDaytm").val(0);
    if( $("#etrfee").val()   == "" ) $("#etrfee").val(0);

    if( $("#eduNope").val()  == "" ) $("#eduNope").val(0);
    if( $("#eduCnt").val()   == "" ) $("#eduCnt").val(0);
    if( $("#eduHr").val()    == "" ) $("#eduHr").val(0);
    if( $("#eduMnt").val()   == "" ) $("#eduMnt").val(0);
    if( $("#pchrgYn").val()  == "" ) $("#pchrgYn").val(0);

    if( $("#wetherSttn").val() == "" ) $("#wetherSttn").val(0);
    if( $("#actnMthd").val()   == "" ) $("#actnMthd").val(0);
}

$(function(){
    initPrgrmDstnctn();

    //컨설팅 여부
    $("input[id^=cnsltngPrgrsYn]").on("change", function(e) {
        var id = e.originalEvent.target.id;

            if($("#"+id).val() == "Y") {
                $("#cnsltngid").prop("disabled", "")
            }else if($("#"+id).val() == "N") {
                $("#cnsltngid").val("");
                $("#cnsltngid").prop("disabled", "disabled")
            }
    });


});

</script>


