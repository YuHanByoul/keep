<form id="prgrmDstnctnFrm">
<input type="hidden" id="prgrmKey" name="prgrmKey" th:value="${prgrmDstnctnInfo.prgrmKey}"><!-- 프로그램id -->
<input type="hidden" id="prgrmid" name="prgrmid" th:value="${prgrmDstnctnInfo.prgrmid}"><!-- 우수성key -->
<input type="hidden" id="eduSbjctCdLst" name="eduSbjctCdLst" th:value="${prgrmDstnctnInfo.eduSbjctCdLst}"><!-- 교육주제코드 -->
<input type="hidden" id="eduPhotoFilegrpid" name="eduPhotoFilegrpid" th:value="${prgrmDstnctnInfo.eduPhotoFilegrpid}"> <!-- 교육사진파일그룹코드 -->



    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>프로그램 개요</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnGreatProgramName"><strong>프로그램명</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="prgrmNm" id="prgrmNm" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.prgrmNm}" readOnly/>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>컨설팅 진행여부</strong></div>
            <div class="col-12 row align-items-center">
                <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                    <div class="form-radio">
                        <span kattr:radio_yn="cnsltngPrgrsYn" label1="컨설팅 미진행" label2="컨설팅 진행" th:attr="defaultVal=${prgrmDstnctnInfo.cnsltngPrgrsYn == null ? 'N':prgrmDstnctnInfo.cnsltngPrgrsYn}" addStyle="margin-top:4px" addClass="col-sm-3" isAdmin="true" />
                    </div>
                </div>
                <div class="col-12 col-lg-auto">
                    <span kattr:select_code="cnsltngKndCd" th:attr="grpCd=130,selectedCd=${prgrmDstnctnInfo.cnsltngKndCd}" firstOptTxt="- 전체 -" addClass="form-select form-select-sm form-control-sm" isAdmin="true">
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>숙박여부</strong></div>
                    <div class="col-12 row align-items-center">
                        <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                            <div class="form-radio">
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="prgrmDstnctnGreatLodgmentStatus" checked/>
                                        <i class="helper"></i>비숙박
                                    </label>
                                </div>
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="prgrmDstnctnGreatLodgmentStatus"/>
                                        <i class="helper"></i>숙박
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-auto row align-items-center">
                            <div class="col-auto">
                                <input type="text" class="form-control form-control-sm text-right" name="styNight" id="styNight" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.styNight}" style="width: 40px;"/>
                            </div>
                            <div class="col-auto p-l-0">박</div>
                            <div class="col-auto">
                                <input type="text" class="form-control form-control-sm text-right" name="styDaytm" id="styDaytm" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.styDaytm}" style="width: 40px;"/>
                            </div>
                            <div class="col-auto p-l-0">일</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>운영형태</strong></div>
                    <div class="col-12">
                        <div class="form-radio bg-form"><!-- [230125] class bg-form 추가 -->
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" name="prgrmDstnctnInfoShape" checked/>
                                    <i class="helper"></i>실내
                                </label>
                            </div>
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" name="prgrmDstnctnInfoShape"/>
                                    <i class="helper"></i>실외
                                </label>
                            </div>
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" name="prgrmDstnctnInfoShape"/>
                                    <i class="helper"></i>실내·실외
                                </label>
                            </div>
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" name="prgrmDstnctnInfoShape"/>
                                    <i class="helper"></i>비대면
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>운영일정</strong></div>
            <div class="border-checkbox-section bg-form"><!-- [230125] class bg-form 추가 -->
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="jan" id="jan" th:checked = "${prgrmDstnctnInfo.jan=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="jan">1월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="feb" id="feb" th:checked = "${prgrmDstnctnInfo.feb=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="feb">2월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="mar" id="mar" th:checked = "${prgrmDstnctnInfo.mar=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="mar">3월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="apr" id="apr" th:checked = "${prgrmDstnctnInfo.apr=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="apr">4월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="may" id="may" th:checked = "${prgrmDstnctnInfo.may=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="may">5월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="june" id="june" th:checked = "${prgrmDstnctnInfo.june=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="june">6월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="july" id="july" th:checked = "${prgrmDstnctnInfo.july=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="july">7월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="aug" id="aug" th:checked = "${prgrmDstnctnInfo.aug=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="aug">8월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="sept" id="sept" th:checked = "${prgrmDstnctnInfo.sept=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="sept">9월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="oct" id="oct" th:checked = "${prgrmDstnctnInfo.oct=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="oct">10월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="nov" id="nov" th:checked = "${prgrmDstnctnInfo.nov=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="nov">11월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="dcm" id="dcm" th:checked = "${prgrmDstnctnInfo.dcm=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="dcm">12월</label>
                </div>
            </div>
        </div>


         <div class="row">
            <div class="col-lg-6 mb-3">
                <div id="eduSbjctDiv" class="mb-0 form-group required">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>교육주제</strong></div>
                    <!-- [230125] 교육주제 항목 내용 변경 -->
                    <!-- //[230125] 교육주제 항목 내용 변경 -->
                </div>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>교육대상</strong></div>
            <div class="border-checkbox-section bg-form"><!-- [230125] class bg-form 추가 -->
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="infnt" id="infnt" th:checked="${prgrmDstnctnInfo.infnt=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="infnt">유아</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="schboy" id="schboy" th:checked="${prgrmDstnctnInfo.schboy=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="schboy">초등</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="msklsd" id="msklsd" th:checked="${prgrmDstnctnInfo.msklsd=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="msklsd">중등</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="hgschst" id="hgschst" th:checked="${prgrmDstnctnInfo.hgschst=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="hgschst">고등</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="adult" id="adult" th:checked="${prgrmDstnctnInfo.adult=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="adult">성인</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="wholAge" id="wholAge" th:checked="${prgrmDstnctnInfo.wholAge=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="wholAge">전연령</label>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatEduPlace"><strong>교육장소</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" name="eduPlc" id="eduPlc" placeholder="교육 장소" th:value="${prgrmDstnctnInfo.eduPlc}" readOnly/>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatEduPersonnel"><strong>교육인원</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm text-right" name="eduNope" id="eduNope" placeholder="교육 인원" th:value="${prgrmDstnctnInfo.eduNope}" readOnly/>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatEduTime1"><strong>교육시간</strong></label>
                    <div class="col-12 row align-items-center">
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm text-right" name="eduCnt" id="eduCnt" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.eduCnt}" style="width: 40px;"/>
                        </div>
                        <div class="col-auto p-l-0">회</div>
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm text-right" name="eduHr" id="eduHr" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.eduHr}" style="width: 40px;"/>
                        </div>
                        <div class="col-auto p-l-0">시간</div>
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm text-right" name="eduMnt" id="eduMnt" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.eduMnt}" style="width: 40px;"/>
                        </div>
                        <div class="col-auto p-l-0">분</div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>프로그램 참가비용</strong></div>
                    <div class="col-12 row align-items-center">
                        <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                            <div class="form-radio">

                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="prgrmDstnctnInfoGreatProgramCostStatus" checked/>
                                        <i class="helper"></i>무료
                                    </label>
                                </div>
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="prgrmDstnctnInfoGreatProgramCostStatus"/>
                                        <i class="helper"></i>유료
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-auto row align-items-center">
                            <div class="col-auto">
                                <input type="text" class="form-control form-control-sm text-right" name="etrfee" id="etrfee" th:value="${prgrmDstnctnInfo.etrfee}"/>
                            </div>
                            <div class="col-auto p-l-0">원 (1인당 비용)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>교육사진</strong></h3>
    </div>
    <div class="card-block-small p-t-0">

        <!-- [230125] 교육사진 항목에 수정 시 - 이미지 등록, 삭제 버튼 추가 -->
        <div class="col-12 row mb-3" >


            <div id="delFileDiv1" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="ratio ratio-4x3">
                    <img id="eduPhotoFile1" class="img-fluid col-12" th:if="${eduPhotoFileList[0].fileid==0}" src="../../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
                    <img id="eduPhotoFile1" class="img-fluid col-12" th:if="${eduPhotoFileList[0].fileid!=0}" th:src="${ '/downloadFileByFileid.do?fileid=' + eduPhotoFileList[0].fileid + '&file_idntfc_key=' + eduPhotoFileList[0].fileIdntfcKey }" alt="Generic placeholder image">
                </div>
                <div class="mt-2 text-center">
                    <button id="eduPhotoFileDelBtn1" type="button" class="btn btn-inverse btn-sm" th:fileid="${eduPhotoFileList[0].fileid}" th:fileIdntfcKey="${eduPhotoFileList[0].fileIdntfcKey}" onclick="fn_deleteEduPhotoFile(this.id)">이미지 삭제</button>
                </div>
            </div>
            <div id="regFileDiv1" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="ratio ratio-4x3 text">
                    <i class="align-items-center d-flex f-48 fa fa-file-image-o justify-content-center"></i>
                </div>
                <div class="mt-2 text-center">
                    <label class="btn btn-primary btn-sm">
                        이미지 등록 <input id="eduPhotoFile1" type="file" name="eduPhotoFile" style="display: none;">
                    </label>
                </div>
            </div>

            <div id="delFileDiv2" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="ratio ratio-4x3">
                    <img id="eduPhotoFile1" class="img-fluid col-12" th:if="${eduPhotoFileList[1].fileid==0}" src="../../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
                    <img id="eduPhotoFile1" class="img-fluid col-12" th:if="${eduPhotoFileList[1].fileid!=0}" th:src="${ '/downloadFileByFileid.do?fileid=' + eduPhotoFileList[1].fileid + '&file_idntfc_key=' + eduPhotoFileList[1].fileIdntfcKey }" alt="Generic placeholder image">
                </div>
                <div class="mt-2 text-center">
                    <button id="eduPhotoFileDelBtn2" type="button" class="btn btn-inverse btn-sm" th:fileid="${eduPhotoFileList[1].fileid}" th:fileIdntfcKey="${eduPhotoFileList[1].fileIdntfcKey}" onclick="fn_deleteEduPhotoFile(this.id)">이미지 삭제</button>
                </div>
            </div>
            <div id="regFileDiv2" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="ratio ratio-4x3 text">
                    <i class="align-items-center d-flex f-48 fa fa-file-image-o justify-content-center"></i>
                </div>
                <div class="mt-2 text-center">
                    <label class="btn btn-primary btn-sm">
                        이미지 등록 <input id="eduPhotoFile2" type="file" name="eduPhotoFile" style="display: none;">
                    </label>
                </div>
            </div>
            <div id="delFileDiv3" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="ratio ratio-4x3">

                    <img id="eduPhotoFile1" class="img-fluid col-12" th:if="${eduPhotoFileList[2].fileid==0}" src="../../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
                    <img id="eduPhotoFile1" class="img-fluid col-12" th:if="${eduPhotoFileList[2].fileid!=0}" th:src="${ '/downloadFileByFileid.do?fileid=' + eduPhotoFileList[2].fileid + '&file_idntfc_key=' + eduPhotoFileList[2].fileIdntfcKey }" alt="Generic placeholder image">
                </div>
                <div class="mt-2 text-center">
                    <button id="eduPhotoFileDelBtn3" type="button" class="btn btn-inverse btn-sm" th:fileid="${eduPhotoFileList[2].fileid}" th:fileIdntfcKey="${eduPhotoFileList[2].fileIdntfcKey}" onclick="fn_deleteEduPhotoFile(this.id)">이미지 삭제</button>
                </div>
            </div>
            <div id="regFileDiv3" class="col-12 col-lg-4 mb-3 mb-lg-0" >
                <div class="ratio ratio-4x3 text">
                    <i class="align-items-center d-flex f-48 fa fa-file-image-o justify-content-center"></i>
                </div>
                <div class="mt-2 text-center">
                    <label class="btn btn-primary btn-sm">
                        이미지 등록 <input id="eduPhotoFile3" type="file" name="eduPhotoFile" style="display: none;">
                    </label>
                </div>
            </div>

        </div>
        <!-- //[230125] 교육사진 항목에 수정 시 - 이미지 등록, 삭제 버튼 추가 -->
    </div>


    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>프로그램소개</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroEduPurpose"><strong>교육목적</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="eduPrps" id="eduPrps" placeholder="교육 목적" th:value="${prgrmDstnctnInfo.eduPrps}" readonly>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroProgramName1"><strong>환경교육 적절성</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="appro" id="appro" placeholder="환경교육 적절성" th:value="${prgrmDstnctnInfo.appro}" readonly>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroProgramName2"><strong>프로그램 우수성</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="dstnctn" id="dstnctn" placeholder="프로그램 우수성" th:value="${prgrmDstnctnInfo.dstnctn}" readonly>
            </div>
        </div>
        <div class="mb-0 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatIntroEduContents"><strong>교육내용(체험활동 등)</strong></label>
            <div class="col-12">
                <textarea rows="5" cols="5" class="form-control form-control-sm" id="eduCn" name="eduCn"><th:block th:text="${prgrmDstnctnInfo.eduCn}"></th:block></textarea>
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>프로그램 운영일정</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="col-12 table-border-style">
            <div class="col-12 table-responsive">
                <table class="table table-framed">
                    <thead>
                    <tr>
                        <th colspan="6" class="text-center">프로그램 전체 일정표</th>
                    </tr>
                    <tr>
                        <th class="text-center" style="width: 70px;">일정</th>
                        <th class="text-center" style="width: 130px;">시작시간</th>
                        <th class="text-center" style="width: 130px;">종료시간</th>
                        <th class="text-center">세부(단위) 프로그램명</th>
                        <th class="text-center">관련교육과정</th>
                        <th class="text-center" style="width: 117px;">설정</th>
                    </tr>
                    </thead>
                    <tbody id="schdlTbody">


                        <th:block th:unless="${#lists.isEmpty(prgrmSchdlList)}" th:each="schdl , i : ${prgrmSchdlList}" >

                            <tr th:id="${ 'schdlTr' + i.count }">
                                <td class="v-middle text-center" th:id="${ 'rnd' + i.count }"><th:block th:text="${schdl.rnd}" ></td>
                                <td>
                                    <div class="col-12 row m-0">
                                        <div class="col-6 p-l-0 p-r-5">
                                            <input type="number" class="form-control form-control-sm" pattern="[0-9]" min="0" max="23" name="bgngHr" th:id="${ 'bgngHr' + i.count }" placeholder="00" th:value="${schdl.bgngHr}"/>
                                        </div>
                                        <div class="col-6 p-r-0 p-l-5">
                                            <input type="number" class="form-control form-control-sm" pattern="[0-9]" min="0" max="59" name="bgngMnt" th:id="${ 'bgngMnt' + i.count }" placeholder="00" th:value="${schdl.bgngMnt}"/>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="col-12 row m-0">
                                        <div class="col-6 p-l-0 p-r-5">
                                            <input type="number" class="form-control form-control-sm" maxlength="2" min="0" max="23" name="endHr" th:id="${ 'endHr' + i.count }" placeholder="00" th:value="${schdl.endHr}"/>
                                        </div>
                                        <div class="col-6 p-r-0 p-l-5">
                                            <input type="number" class="form-control form-control-sm" maxlength="2" min="0" max="59" name="endMnt" th:id="${ 'endMnt' + i.count }" placeholder="00" th:value="${schdl.endMnt}"/>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="schdlPrgrmNm" th:id="${ 'schdlPrgrmNm' + i.count }" placeholder="프로그램 명" th:value="${schdl.prgrmNm}"/>
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="crs" th:id="${ 'crs' + i.count }" placeholder="관련교육과정" th:value="${schdl.crs}"/>
                                </td>
                                <td>
                                    <div class="btn-group-sm">
                                        <button type="button" class="btn btn-primary m-r-5" th:id="${ 'addBtnSchdl' + i.count }" th:onclick="addSchdl(this.id)" >추가</button>
                                        <button type="button" class="btn btn-inverse"       th:id="${ 'delBtnSchdl' + i.count }" th:onclick="deleteSchdl(this.id)" th:if="${i.index > 0}" >삭제</button>
                                    </div>
                                </td>
                            </tr>
                        </th:block>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>유사시 대처 계획</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatNeedCopingMethodWeather"><strong>기상상황</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="wetherSttn" id="wetherSttn" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.wetherSttn}" >
            </div>
        </div>
        <div class="mb-0 form-group row">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctnInfoGreatNeedCopingMethod"><strong>대처방법</strong></label>
            <div class="col-12">
                <input type="text" class="form-control form-control-sm" name="actnMthd" id="actnMthd" placeholder="Text Input Validation" th:value="${prgrmDstnctnInfo.actnMthd}" >
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>대처계획</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="col-12 table-border-style">
            <div class="col-12 table-responsive">
                <table class="table table-framed">
                    <thead>
                    <tr>
                        <th colspan="3" class="text-center">관련된 교육과정 내용</th>
                    </tr>
                    <tr>
                        <th class="text-center">본 프로그램명</th>
                        <th class="text-center">대체 프로그램명</th>
                        <th class="text-center" style="width: 117px;">설정</th>
                    </tr>
                    </thead>
                    <tbody id="planTbody">
                        <th:block th:each="plan , i : ${emrgcyActnPlanLst}" >
                            <tr th:id="${ 'planTr' + i.count}">
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="prgrmNm" th:id="${ 'planPrgrmNm' + i.count}" placeholder="본 프로그램명" th:value="${plan.prgrmNm}"/>
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-sm" name="sbstnPrgrmNm" th:id="${'sbstnPrgrmNm' + i.count }" placeholder="대체 프로그램명" th:value="${plan.sbstnPrgrmNm}"/>
                                </td>
                                <td>
                                    <div class="btn-group-sm">
                                        <button type="button" class="btn btn-primary m-r-5" th:id="${ 'addBtnPlan' + i.count }" th:onclick="addPlan(this.id)" >추가</button>
                                        <button type="button" class="btn btn-inverse"       th:id="${ 'delBtnPlan' + i.count }" th:onclick="deletePlan(this.id)" th:if="${i.index > 0}" >삭제</button>
                                    </div>
                                </td>
                            </tr>
                        </th:block>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="card-block-small">
        <button type="button" id="btnLstDstnctn"  class="btn btn-inverse m-r-5" onclick="gridHelper1.resetListContent()">목록</button>
        <button type="button" id="btnSaveDstnctn" class="btn btn-primary m-r-5" onclick="prgrmDstnctnSaveBtn()">저장</button>
        <button type="button" id="btnNextDstnctn" class="btn btn-primary" onclick="fn_dstnctnNextbtn()">다음</button>
    </div>
</div>
</form>

<script th:inline="javascript">

var veduPhotoFileList = /*[[${eduPhotoFileList}]]*/null;

//커스텀 테그 라이브러리 임시 설정
var getCodeListUrl = "/mng/customAttr/grpCodeList.do";

function fn_getNextDepthList(grpcd , upprcd, selId, cd){


	$.ajax({
        url : getCodeListUrl,
        type: 'GET',
        cache : false,
        dataType: 'json',
        async: false,
        data: {
              grpcd  : grpcd
            , upprcd : upprcd
        },
        success : function (data){

        	writeHtml(grpcd, selId, data, cd);

        },
        error : function (error){
        }
    });
}


//교육주제 코드 목록
function setEduJbjct(){
    var cdLst = $("#eduSbjctCdLst").val().split(",");
    var cd      ="";
    var grpcd   ="";
    var upprcd  =0;

    var vHtml ="";
    var selId = "";
    var selSubId = "";
    var idx = 0;


    for( idx=0; idx < cdLst.length; idx++) {
    	subcd    = cdLst[idx];
    	cd       = cdLst[idx].substring(0,6);
    	grpcd    = cdLst[idx].substring(0,3);

    	selId    = "eduSbjctSel"+(idx+1);
    	selSubId = "sub_"+selId;
    	fn_getNextDepthList(grpcd , upprcd, selId, cd);

        setNextDepth(grpcd,cd,selSubId,subcd);

    }
}

function writeHtml(grpcd,selId,list,cd){

    var vHtml ="";
    var selSubId ="";

    var idx = selId.substring(selId.length-1, selId.length);

    if(selId.startsWith("sub")) {
    	vHtml += "        <select id='"+selId+"' name='sub_eduSbjctSel' class='form-select form-select-sm form-control-sm'>";
    	vHtml +="           <option  >전체</option>";
	if(list.length > 0){
    	for(var i=0 ; i < list.length;i++) {
            if(list[i].cd==cd){
                vHtml +="    <option value="+list[i].cd+" selected>"+ list[i].cdNm+ "</option>";
            }else{
                vHtml +="    <option value="+list[i].cd+">"+ list[i].cdNm+ "</option>";
            }
        }
    }
    	vHtml += "      </select>";

    	$("#"+selId).html(vHtml);

    }else{
        selSubId = "sub_"+selId;


        if(idx == "1"){
            vHtml += "<div class='row'>";
        }else{
            vHtml += "<div class='row mt-1'>";
        }

            vHtml += "    <div class='col-sm'>                                                                                                                                                            ";
            vHtml += "      <select id='"+selId+"' name='eduSbjctSel' class='form-select form-select-sm form-control-sm' value='"+cd+"' onchange=setNextDepth("+grpcd+",this.value,'"+selSubId+"') >";
            vHtml +="           <option  >전체</option>";

            if(list.length > 0){
                for(var i=0 ; i < list.length;i++) {
                    if(list[i].cd==cd){
                        vHtml +="    <option value="+list[i].cd+" selected>"+ list[i].cdNm+ "</option>";
                    }else{
                        vHtml +="    <option value="+list[i].cd+">"+ list[i].cdNm+ "</option>";
                    }
                }
                    vHtml += "      </select>";
                    vHtml += "    </div>                                                                                                                                                                          ";
                    vHtml += "    <div class='col-sm mt-1 mt-sm-0'>                                                                                                                                               ";
                    vHtml += "        <select id='"+selSubId+"' name='sub_eduSbjctSel' class='form-select form-select-sm form-control-sm'></select>                                          ";
                    vHtml += "    </div>                                                                                                                                                                          ";
                    vHtml += "    <div class='mt-1 mt-sm-0' style='width:100px;'>                                                                                                                                 ";
                    vHtml += "        <button type='button' class='input-group-text btn btn-primary btn-sm' onclick='eduSbjctBtn()'>+</button>                                                                    ";
                if(idx != "1"){
                    vHtml += "        <button type='button' class='input-group-text btn btn-primary btn-sm' onclick='eduSbjctBtn()'>-</button>";
                }
                    vHtml += '        </div>';
                    vHtml += '    </div>';

            }

        $("#eduSbjctDiv").append(vHtml);
    }
}


function setNextDepth(grpcd , upprcd , targetId, cd){
    fn_getNextDepthList(grpcd , upprcd , targetId, cd);
}

function setSubSel(){
	return;
	var cdLst = $("#eduSbjctCdLst").val().split(",");
    var cd="";

    for(var i=0; i < cdLst.length; i++) {
        var selSubId = "sub_eduSbjctSel"+(i+1);
        cd = cdLst[i];

        $("#"+selSubId)
    }
}

function eduSbjctBtn(){
	alert();
};

function readImage() {


	for(var i=0; i < veduPhotoFileList.length; i++){
		if(veduPhotoFileList[i].fileid==0){
			$("#delFileDiv"+(i+1)).hide();
            $("#regFileDiv"+(i+1)).show();
		}else{
			$("#delFileDiv"+(i+1)).show();
            $("#regFileDiv"+(i+1)).hide();

		}
	}


}


$('[id^=eduPhotoFile]').on('change', function(event) {

	var trgtId = event.currentTarget.id;
	var trgtIdx = trgtId.substr(trgtId.length-1,1);

	var objFile = document.querySelector('#'+trgtId);

    var formData = new FormData();
    var content = "";

    for( i = 0 ; i < objFile.files.length ; i++) {
        formData.append("files", objFile.files[i]);
    }

    formData.append("filegrpid", $("#eduPhotoFilegrpid").val());
    formData.append("filegrpNm", "dstnctnEduPhoto_file");


    if(displayWorkProgress()){
        $.ajax({
            url : '/uploadMultipleFiles.do',
            processData : false,
            contentType : false,
            data : formData,
            type : 'POST',
            success : function(response) {
                if(response.result == 'fail'){
                    alert(response.msg);
                }else{
                    if($("#eduPhotoFilegrpid").val()=='0' || $("#eduPhotoFilegrpid").val()==''  || $("#eduPhotoFilegrpid").val()==null){
                    	$("#eduPhotoFilegrpid").val(response[0].filegrpid );
                    }

                    $("#regFileDiv" + trgtIdx).show();
                    $("#delFileDiv" + trgtIdx).hide();

                }
                closeWorkProgress();
            }
        });

    }

});


function fn_deleteEduPhotoFile(btnid){


	var vFileid        = $("#"+btnid).attr("fileid");
	var vFileIdntfcKey = $("#"+btnid).attr("fileIdntfcKey");
	var trgtIdx = btnid.substr(btnid.length-1,1);
;

    if(!confirm("파일을 삭제하시겠습니까?")){return;}

    var deleteFileUrl="/deleteFile.do?fileid="+vFileid+"&file_idntfc_key=" + vFileIdntfcKey;

    $.ajax({
      url : deleteFileUrl,
      type: 'GET',
      cache : false,
      dataType: 'json',
      success : function (data){

    	  $("#regFileDiv" + trgtIdx).show();
          $("#delFileDiv" + trgtIdx).hide();

      },
      error : function (error){

      }
   })
}




//일정 추가 버튼
function addSchdl(btnid){
    var html;

    var trIdx = $("[id^=schdlTr]").length + 1;

    html +="<tr id='schdlTr" + trIdx + "'>                                                                                                               ";
    html +="    <td class='v-middle text-center'id='rnd"+trIdx+"'>"+ trIdx + "차시</td>                                                                  ";
    html +="    <td>                                                                                                                                     ";
    html +="        <div class='col-12 row m-0'>                                                                                                         ";
    html +="            <div class='col-6 p-l-0 p-r-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='bgngHr' id='bgngHr"+ trIdx + "' placeholder='00' value=''/>    ";
    html +="            </div>                                                                                                                           ";
    html +="            <div class='col-6 p-r-0 p-l-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='bgngMnt' id='bgngMnt"+ trIdx + "' placeholder='00' value=''/>  ";
    html +="            </div>                                                                                                                           ";
    html +="        </div>                                                                                                                               ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <div class='col-12 row m-0'>                                                                                                         ";
    html +="            <div class='col-6 p-l-0 p-r-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='endHr' id='endHr"+ trIdx + "' placeholder='00' value=''/>      ";
    html +="            </div>                                                                                                                           ";
    html +="            <div class='col-6 p-r-0 p-l-5'>                                                                                                  ";
    html +="                <input type='text' class='form-control form-control-sm' name='endMnt' id='endMnt"+ trIdx + "' placeholder='00' value=''/>    ";
    html +="            </div>                                                                                                                           ";
    html +="        </div>                                                                                                                               ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <input type='text' class='form-control form-control-sm' name='schdlPrgrmNm' id='schdlPrgrmNm"+ trIdx + "' placeholder='프로그램 명' value=''/> ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <input type='text' class='form-control form-control-sm' name='crs' id='crs"+ trIdx + "' placeholder='관련교육과정' value=''/>        ";
    html +="    </td>                                                                                                                                    ";
    html +="    <td>                                                                                                                                     ";
    html +="        <div class='btn-group-sm'>                                                                                                           ";
    html +="            <button type='button' class='btn btn-primary m-r-5' id='addBtnSchdl"+ trIdx + "' onclick='addSchdl(this.id)'    >추가</button>   ";
    html +="            <button type='button' class='btn btn-inverse'       id='delBtnSchdl"+ trIdx + "' onclick='deleteSchdl(this.id)' >삭제</button>   ";
    html +="        </div>                                                                                                                               ";
    html +="    </td>                                                                                                                                    ";
    html +="</tr>                                                                                                                                        ";

    $("#schdlTbody").append(html);


}

//일정 삭제 버튼
function deleteSchdl(btnid){

    var btnIdx = btnid.replace("delBtnSchdl","");
    $("#schdlTr"+btnIdx).remove();
}

//계획 추가 버튼
function addPlan(btnid){
    var html;

    var trIdx = $("[id^=planTr]").length + 1;

    html +="<tr id='planTr" + trIdx + "'>                                                                                                                              ";
    html +="    <td>                                                                                                                                                   ";
    html +="        <input type='text' class='form-control form-control-sm' name='prgrmNm' id='prgrmNm'" + trIdx +"' placeholder='본 프로그램명' value=''/>            ";
    html +="    </td>                                                                                                                                                  ";
    html +="    <td>                                                                                                                                                   ";
    html +="        <input type='text' class='form-control form-control-sm' name='sbstnPrgrmNm' id='sbstnPrgrmNm"+ trIdx + "' placeholder='대체 프로그램명' value=''/> ";
    html +="    </td>                                                                                                                                                  ";
    html +="    <td>                                                                                                                                                   ";
    html +="        <div class='btn-group-sm'>                                                                                                                         ";
    html +="            <button type='button' class='btn btn-primary m-r-5' id='addBtnPlan"+ trIdx + "' onclick='addPlan(this.id)'    >추가</button>                  ";
    html +="            <button type='button' class='btn btn-inverse'       id='delBtnPlan"+ trIdx + "' onclick='deletePlan(this.id)' >삭제</button>                  ";
    html +="        </div>                                                                                                                                             ";
    html +="    </td>                                                                                                                                                  ";
    html +="</tr>                                                                                                                                                      ";

    $("#planTbody").append(html);

}

//계획삭제 버튼
function deletePlan(btnid){

    var btnIdx = btnid.replace("delBtnPlan","");
    $("#planTr"+btnIdx).remove();
}

function prgrmDstnctnSaveBtn() {

    var vUrl = "";
    var param = {};

    //필수체크
    if(0== $("[id^=sub_eduSbjctSel]").length){
    	alert("교육주제는 필수 입력입니다.");
    	return;
    }

    //교육주제
    $("[id^=sub_eduSbjctSel]").each(function(index, item) {

        if(item.value=="전체"){
            alert("선택하지 않은 교육주제항목이 있습니다.");
            $("#"+item.id).focus();
            return;
        }
        if(index==0) param["eduSbjctCdLst"] = ""+item.value;
        if(index!=0) param["eduSbjctCdLst"] += ","+item.value;
    });

    //프로그램 일정
    $("[id^=schdlTr]").each(function(index, item)      { param["prgrmSchdlLst[" + index + "].prgrmid"] = $("#prgrmKey").val()});    //프로그램 id (key)
    $("[id^=rnd]").each(function(index, item)          { param["prgrmSchdlLst[" + index + "].rnd"    ] = item.textContent; });    //차수
    $("[id^=bgngHr]").each(function(index, item)       {

    	param["prgrmSchdlLst[" + index + "].bgngHr" ] = item.value;
    });    //시작 시간

    $("[id^=bgngMnt]").each(function(index, item)      { param["prgrmSchdlLst[" + index + "].bgngMnt"] = item.value; });    //시작 분
    $("[id^=endHr]").each(function(index, item)        { param["prgrmSchdlLst[" + index + "].endHr"  ] = item.value; });    //종료 시간
    $("[id^=endMnt]").each(function(index, item)       { param["prgrmSchdlLst[" + index + "].endMnt" ] = item.value; });    //종료 분
    $("[id^=schdlPrgrmNm]").each(function(index, item) { param["prgrmSchdlLst[" + index + "].prgrmNm"] = item.value; });    //프로그램명
    $("[id^=crs]").each(function(index, item)          { param["prgrmSchdlLst[" + index + "].crs"    ] = item.value; });    //과정

    if(!confirm("저장 하시겠습니까?")){return;}

    if( $("#prgrmid").val() == null || $("#prgrmid").val() == "" ) {
        //insert
        vUrl = "/mng/asgsysSrng/insertPrgrmDstnctn.do";
    } else {
        // update
        vUrl = "/mng/asgsysSrng/updatePrgrmDstnctn.do";
    }


    $("#prgrmDstnctnFrm input").each(function(index, item) {

        if("checkbox" == item.type && "on" == item.value) {
            param[item.id] = "Y";
        }
        else{
            param[item.id] = item.value;
        }
    });

    param["eduCn"] = $("#eduCn").val();    //교육 내용

    //프로그램 대처계획
    $("[id^=planTr]").each(function(index, item)       { param["emrgcyActnPlanLst[" + index + "].prgrmid"     ] = $("#prgrmKey").val()});       //프로그램 id (key)
    $("[id^=sbstnPrgrmNm]").each(function(index, item) { param["emrgcyActnPlanLst[" + index + "].sbstnPrgrmNm"] = item.value; });    //차수
    $("[id^=planPrgrmNm]").each(function(index, item)  { param["emrgcyActnPlanLst[" + index + "].prgrmNm"     ] = item.value; });    //프로그램명

    $.ajax({
        url : vUrl,
        type: 'POST',
        cache : false,
        dataType: 'json',
        data : param,
        success : function (data){
            if(data.result=="success"){

                alert("저장이 완료 되었습니다.");

                gridHelper1.resetPageContent();


            }else{

                alert("저장중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
        },
        error : function (error){

        }
    });
}

function fn_dstnctnNextbtn(){

    $("#jdsgTab1Link").removeClass("active");
    $("#jdsgTab2Link").addClass("active");
    selectJdsgTab("jdsgTab2Link");
}

function initPrgrmDstnctn(){

	//교육사진 set
	readImage();

	//교육주제 set
	setEduJbjct();

    $('#jdsgTab1Link').addClass("active");

    $("[id^=cnsltngPrgrsYn]").attr("disabled", true);

    if( $("#styNight").val() == "" ) $("#styNight").val(0);
    if( $("#styDaytm").val() == "" ) $("#styDaytm").val(0);
    if( $("#etrfee").val()   == "" ) $("#etrfee").val(0);

    if( $("#eduNope").val()  == "" ) $("#eduNope").val(0);
    if( $("#eduCnt").val()   == "" ) $("#eduCnt").val(0);
    if( $("#eduHr").val()    == "" ) $("#eduHr").val(0);
    if( $("#eduMnt").val()   == "" ) $("#eduMnt").val(0);
    if( $("#pchrgYn").val()  == "" ) $("#pchrgYn").val(0);

    if( $("#wetherSttn").val() == "" ) $("#wetherSttn").val(0);
    if( $("#actnMthd").val()   == "" ) $("#actnMthd").val(0);
    //if( $("#EDU_PHOTO_FILEGRPID").val()   == "" ) $("#EDU_PHOTO_FILEGRPID").val(0);
}

initPrgrmDstnctn();

</script>


