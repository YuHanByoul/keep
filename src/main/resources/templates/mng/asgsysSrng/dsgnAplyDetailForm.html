<div class="row">
	<div class="card">
	    <div class="card-header p-b-0">
	        <h3 class="sub-title"><strong>지정신청 진행상태</strong></h3>
	    </div>
	    <div class="card-block-small p-t-0">
	        <div class="row justify-content-center">
	            <div class="col-auto row align-items-center m-l-0 m-r-0" id="divSttsBar">
	                <div class="col-auto label label-inverse-info-border" th:classappend="111101 == ${sttsCd} ? 'bg-primary'">
	                    <span class="f-14 text-white">
	                       <a th:classappend="111101 == ${sttsCd} ? 'text-white'" href="#btnSel1" onclick="fnUpdateSttsCd(111101)">작성중</a>
	                   </span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border" th:classappend="111102 == ${sttsCd} ? 'bg-primary'">
	                    <span class="f-14 text-white">
	                       <a th:classappend="111102 == ${sttsCd} ? 'text-white'" href="#btnSel1" onclick="fnUpdateSttsCd(111102)">신청완료</a>
	                   </span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">요건검토중</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">서류요청</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">서류보완</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">심사위원심사</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">지원단심사</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">보완요청</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">보완완료</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">결과보고</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">지정승인</span>
	                </div>
	                <div class="col-auto text-primary fs-5">
	                    <i class="ion-arrow-right-c"></i>
	                </div>
	                <div class="col-auto label label-inverse-info-border">
	                    <span class="f-14">지정탈락</span>
	                </div>
	            </div>
	        </div>
	    </div>
	    <div class="card-header p-t-0 p-b-0">
	        <ul class="nav nav-tabs tabs" role="tablist">
	            <th:block sec:authorize-url="/mng/asgsysSrng/aplyInfoForm.html">
		            <li class="nav-item">
		                <a class="nav-link" data-bs-toggle="tab" href="#tabCon1" role="tab" id="tabCon1Link"><strong>신청정보</strong></a>
		            </li>
	            </th:block>
	            <th:block sec:authorize-url="/mng/asgsysSrng/jdgsSprtgrpAltmntForm.html">
		            <li class="nav-item">
		                <a class="nav-link" data-bs-toggle="tab" href="#tabCon2" role="tab" id="tabCon2Link"><strong>심사위원/지원단 배정</strong></a>
		            </li>
	            </th:block>
	            <th:block sec:authorize-url="/mng/asgsysSrng/jdgsSprtgrpAltmntForm.html">
		            <li class="nav-item">
		                <a class="nav-link" data-bs-toggle="tab" href="#tabCon3" role="tab" id="tabCon3Link"><strong>심사위원심사</strong></a>
		            </li>
	            </th:block>
	            <th:block sec:authorize-url="/mng/asgsysSrng/jdgsSprtgrpAltmntForm.html">
		            <li class="nav-item">
		                <a class="nav-link" data-bs-toggle="tab" href="#tabCon4" role="tab" id="tabCon4Link"><strong>지원단심사</strong></a>
		            </li>
	            </th:block>
	            <th:block sec:authorize-url="/mng/asgsysSrng/jdgsSprtgrpAltmntForm.html">
		            <li class="nav-item">
		                <a class="nav-link" data-bs-toggle="tab" href="#tabCon5" role="tab" id="tabCon5Link"><strong>결과보고</strong></a>
		            </li>
	            </th:block>
	        </ul>
	    </div>
		<!-- TAB CONTTENT -->
		<div id="myTabContent" class="tab-content tabs p-t-20"></div>
	</div>
</div>
<script th:inline="javascript">

    var prgrmid = [[${param.prgrmid}]];

    $('.nav-tabs a').on('show.bs.tab', function(event) {

        var tabId = event.currentTarget.attributes.id.value;
        console.log("############## tabId : " + tabId);
        selectTab(tabId);
    });

/*
    $("#divSttsBar").on('click',function(event){
debugger;
    });
*/

    $('.nav-tabs a').on('show.bs.tab', function(event) {
        debugger;
        var tabId = event.currentTarget.attributes.id.value;
        console.log("############## tabId : " + tabId);
        selectTab(tabId);
    });

    function selectTab(tabId) {
        if(tabId == "tabCon1Link") {
            loadTabContent("/mng/asgsysSrng/aplyInfoForm.html?prgrmid=" + prgrmid);
        } else if(tabId == "tabCon2Link") {
            loadTabContent("/mng/asgsysSrng/jdgsSprtgrpAltmntForm.html?prgrmid=" + prgrmid);
        } else if(tabId == "tabCon3Link") {
            loadTabContent("/mng/asgsysSrng/notiHistoryForm.html?prgrmid=" + prgrmid);
        } else if(tabId == "tabCon4Link") {
            loadTabContent("/mng/asgsysSrng/smsReceiveHistoryForm.html?prgrmid=" + prgrmid);
        } else if(tabId == "tabCon5Link") {
            loadTabContent("/mng/asgsysSrng/emailReceiveHistoryForm.html?prgrmid=" + prgrmid);
        } else if(tabId == "tabCon6Link") {
            loadTabContent("/mng/asgsysSrng/loginHistoryForm.html?prgrmid=" + prgrmid);
        }
        $("#" + tabId).parent().addClass("active");
    }

    function loadTabContent(uri){
        //$('#myTabContent').load(uri);
        $.ajax({
            cache   : false
          , url     : uri
          , type    : 'GET'
          , async   : 'false'
          , dataType: 'html'
          , success : function(result){ //요청이 성공했을때 실행되는 콜백 함수
                          $('#myTabContent').html(result);
                          scrollIntoView('contentPanel');
                      }
        });
        showContent();
    }

    function initTab() {

    	console.log("dsgnAplyDetailForm start");

    	//지정신청 진행상태 조회
    	fnSelectSttsCd(prgrmid);

        var tabFlag = false;

        if(tabFlag == false) {
            selectTab("tabCon1Link");
            tabFlag = true;
        }

        if(tabFlag == false) {
            selectTab("tabCon2Link");
            tabFlag = true;
        }

        if(tabFlag == false) {
            selectTab("tabCon3Link");
            tabFlag = true;
        }

        if(tabFlag == false) {
            selectTab("tabCon4Link");
            tabFlag = true;
        }

        if(tabFlag == false) {
            selectTab("tabCon5Link");
            tabFlag = true;
        }

        if(tabFlag == false) {
            selectTab("tabCon6Link");
            tabFlag = true;
        }

    }


    //지정신청 진행상태 조회
    function fnSelectSttsCd(prgrmid){

    }
    //지정신청 진행상태 변경
    function fnUpdateSttsCd(sttsCd){

    	console.log(" sttsCd  : " + sttsCd);
    	console.log(" prgrmid : " + prgrmid);

        var data = {
        		"sttsCd"  : sttsCd
              , "prgrmid" : ""+prgrmid

        }

        $.ajax({
            url :"/mng/asgsysSrng/updateSttsCd.do",
            type: 'POST',
            cache : false,
            dataType: 'json',
            data : data,
            success : function (data){
                 if(data.result=="success"){
                        alert("수정이 완료 되었습니다.");

                    }else{
                        alert("수정중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
                    }
                closeWorkProgress();
            },
            error : function (error){
            }
        })
    }

    initTab();


</script>