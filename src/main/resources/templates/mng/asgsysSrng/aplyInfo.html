<form id="aplyFrm">
    <div class="tab-pane active" id="applyInfo" role="tabpanel">
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>신청기관 정보</strong></h3>
        </div>
        <div class="card-block-small p-t-0 p-b-0">
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoProgramName"><strong>프로그램명</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="prgrmNm" id="prgrmNm" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.prgrmNm}" readonly/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoAgencyName"><strong>기관명</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoAgencyName" id="applyInfoAgencyName" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.instNm}"  readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>기관유형</strong></div>
                        <div class="col-12">
                            <span kattr:select_code="instTypeCd" th:attr="grpCd=108,selectedCd=${dsgnAplyInfo.instTypeCd}" firstOptTxt="- 전체 -" addClass="form-select form-select-sm form-control-sm" isAdmin="true" isDisable/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoRepresentativeName"><strong>대표자명</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoRepresentativeName" id="applyInfoRepresentativeName" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.prgrmNm}"  readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoApplicant"><strong>신청자</strong></label>
                        <div class="col-12 row">
                            <div class="col-8">
                                <input type="text" class="form-control form-control-sm" name="applyInfoApplicant" id="applyInfoApplicant" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.aplcntNm}" readonly/>
                            </div>
                            <div class="col-4 btn-group-sm">
                                <button type="button" class="btn btn-inverse" onclick="">담당자 변경</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoManagerPhoneNum"><strong>담당자연락처</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoManagerPhoneNum" id="applyInfoManagerPhoneNum" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.aplcntMoblphon}" readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoManagerEmail"><strong>담당자 이메일</strong></label>
                        <div class="col-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoManagerEmail" id="applyInfoManagerEmail" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.aplcntEml}" readonly/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoBusinessNum"><strong>사업자등록번호</strong></label>
                        <div class="col-12">
                            <input type="text" class="form-control form-control-sm" name="brno" id="brno" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.brno}" readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoAgencyEmail"><strong>기관 이메일</strong></label>
                        <div class="col-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoAgencyEmail" id="applyInfoAgencyEmail" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.instEml}" readonly/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoAgencyPhoneNum"><strong>기관 연락처</strong></label>
                        <div class="col-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoAgencyPhoneNum" id="applyInfoAgencyPhoneNum" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.instCntct}" readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>지역</strong></div>
                        <div class="col-12">
                            <span kattr:select_code="rgnCd" th:attr="grpCd=125,selectedCd=${dsgnAplyInfo.rgnCd}" firstOptTxt="- 전체 -" addClass="form-select form-select-sm form-control-sm" isAdmin="true" isDisable>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="applyInfoAgencyHomePage"><strong>기관 홈페이지</strong></label>
                        <div class="col-12">
                            <input type="text" class="form-control form-control-sm" name="applyInfoAgencyHomePage" id="applyInfoAgencyHomePage" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.instHmpg}" readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="agencyAddress"><strong>기관주소</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="agencyAddress" id="agencyAddress" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.instAddr}" readonly/>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="agencyDetailAddress"><strong>상세주소</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="agencyDetailAddress" id="agencyDetailAddress" placeholder="Text Input Validation" th:value="${dsgnAplyInfo.instDtladdr}" readonly/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>증빙서류</strong></div>
                        <div class="col-sm-12">

                            <input type="file" id="evdncDcmntFile" name="evdncDcmntFile" class="form-control form-control-sm"/>

		                    <div class="row">
                                <th:block th:if="${fileList != null}">


                                <div class="row">
                                <th:block th:if="${fileList != null}">
                                    <div th:each="item : ${fileList}" th:id="${item.fileid}" class="col-auto">
                                        <th:block th:if="${item.orginlFileNm != null}">
                                            <span th:fileid='${item.fileid}' th:fileIdntfcKey="${item.fileIdntfcKey}" th:onclick="downloadFileByFileid(this.getAttribute('fileid'),this.getAttribute('fileIdntfcKey'))" href="javascript:void(0)" class='label label-inverse'>
                                                <th:block th:text="${item.orginlFileNm}" /> <a th:name="${item.fileid}" th:attr="data-idntfc-key=${item.fileIdntfcKey}" th:onclick="fn_deleteFileList(this.name, this.dataset.idntfcKey)" class='text-white'><th:block th:text="X"</th:block></a>
                                            </span>
                                        </th:block>
                                    </div>
                                 </th:block>
                                 </div>
                           </div>

						</div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>진행상태</strong></div>
                        <div class="col-12">
                            <span kattr:select_code="sttsCd" th:attr="grpCd=111,selectedCd=${dsgnAplyInfo.sttsCd}" firstOptTxt="- 전체 -" addClass="form-select form-select-sm form-control-sm" isAdmin="true">
                        </div>
                    </div>
                </div>
                <div class="card-block-small">
                    <button type="button" class="btn btn-primary m-r-5" onclick="fn_updateSttsReqsRvw()"  >요건검토중 상태변경</button>
                    <button type="button" class="btn btn-primary m-r-5" onclick="fn_openSplmntDmndPopup()">서류요청</button>
                    <button type="button" class="btn btn-primary m-r-5" onclick="fn_jdgsSrngDmnd()"       >심사위원심사 요청</button>
                    <button type="button" class="btn btn-primary"       onclick="fn_sprtgrpSrngDmnd()"    >지원단심사 요청</button>
                </div>
                <div class="card-header p-t-0 p-b-0">
                    <h3 class="sub-title"><strong>심사위원 배정 정보</strong></h3>
                </div>
                <div class="card-block-small p-t-0">
                    <div class="mb-0 form-group row">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>담당자 배정</strong></div>
                        <div class="col-sm-12 btn-group-sm">
                            <button type="button" class="btn btn-inverse" onclick="openPicChgModal()">담당자 검색</button>
                        </div>
                        <div class="mt-2 row">
                            <div id="jdgsPicList" class="col-auto"></div>
                        </div>
                    </div>
                </div>
                <div class="card-header p-t-0 p-b-0">
                    <h3 class="sub-title"><strong>지원단 배정 정보</strong></h3>
                </div>
                <div class="card-block-small p-t-0">
                    <div class="mb-0 form-group row">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>담당자 배정</strong></div>
                        <div class="col-sm-12 btn-group-sm">
                            <button type="button" class="btn btn-inverse" onclick="openPicChgModal('Y')">담당자 검색</button>
                        </div>
                        <div class="mt-2 row">
                            <div id="sprtgrpPicList" class="col-auto"></div>
                        </div>
                    </div>
                </div>
                <div class="card-header p-t-0">
                    <div class="sub-title row m-l-0 m-r-0 m-b-0 align-items-center">
                        <div class="col-12 col-lg-6 mb-2 mb-lg-0 p-l-0">
                            <strong>보완요청</strong>
                        </div>
                        <div class="col-12 col-lg-6 text-right p-r-0 btn-group-sm">
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#redeemInsertPopup">보완요청</button>
                        </div>
                    </div>
                </div>
                <!-- 그리드-->
                <div class="card-block-small p-t-0">
                    <div class="dt-responsive table-responsive">
                        <div id="order-table_wrapper" class="dataTables_wrapper dt-bootstrap4">
                            <table id="splmntDmndGrid" class="table-responsive"></table>
                            <div id="splmntDmndListPager" class="text-center"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- 탭 -->
<div class="card-header p-t-0 p-b-0">
    <ul class="nav nav-pills flex-column flex-lg-row" role="tablist">
        <li class="nav-item flex-lg-fill text-center">
            <a class="nav-link" data-bs-toggle="tab" id="jdsgTab1Link" href="#jdsgTab1" role="tab" ><strong>프로그램 우수성</strong></a>
        </li>
        <li class="nav-item flex-lg-fill text-center">
            <a class="nav-link" data-bs-toggle="tab" id="jdsgTab2Link" href="#jdsgTab2" role="tab"><strong>프로그램 운영관리</strong></a>
        </li>
        <li class="nav-item flex-lg-fill text-center">
            <a class="nav-link" data-bs-toggle="tab" id="jdsgTab3Link" href="#jdsgTab3" role="tab"><strong>프로그램 평가</strong></a>
        </li>
        <li class="nav-item flex-lg-fill text-center">
            <a class="nav-link" data-bs-toggle="tab" id="jdsgTab4Link" href="#jdsgTab4" role="tab"><strong>지도자의 자격 및 배치</strong></a>
        </li>
        <li class="nav-item flex-lg-fill text-center">
            <a class="nav-link" data-bs-toggle="tab" id="jdsgTab5Link" href="#jdsgTab5" role="tab"><strong>안전관리</strong></a>
        </li>
        <li class="nav-item flex-lg-fill text-center">
            <a class="nav-link" data-bs-toggle="tab" id="jdsgTab6Link" href="#jdsgTab6" role="tab"><strong>체크리스트</strong></a>
        </li>
    </ul>
</div>

<!-- TAB CONTTENT -->
<div id="jdgsSprtgrpAltmntTabContent" class="tab-content tabs p-t-20"></div>

<!-- 담당자변경 회원검색 팝업 Start -->
<div class="modal fade" id="picAltmntPopup" aria-hidden="true" data-bs-backdrop="static"></div>
<!-- 담당자변경 회원검색 팝업 end  -->

<!--서류요청(보완요청)팝업-->
<div class="modal fade" id="splmntDmndPopup" aria-hidden="true" data-bs-backdrop="static"></div>
<!--서류요청(보완요청)팝업-->

<script th:inline="javascript">

var splmntDmndGridHelper;    //보완요청그리드

//tabEvent
$('.nav-pills a').on('show.bs.tab', function(event) {
    var tabId = event.currentTarget.attributes.id.value;
    console.log("############## tabId : " + tabId);

    selectJdsgTab(tabId);
});

function selectJdsgTab(tabId) {

    if(tabId == "jdsgTab1Link") {
    	loadJdsgTabContent("/mng/asgsysSrng/prgrmDstnctn.html?prgrmid=" + prgrmid);
    } else if(tabId == "jdsgTab2Link") {
        loadJdsgTabContent("/mng/asgsysSrng/prgrmOperMngForm.html?prgrmid=" + prgrmid);
    } else if(tabId == "jdsgTab3Link") {
        loadJdsgTabContent("/mng/asgsysSrng/prgrmEvl.html?prgrmid=" + prgrmid);
    } else if(tabId == "jdsgTab4Link") {
        loadJdsgTabContent("/mng/asgsysSrng/prgrmLdr.html?prgrmid=" + prgrmid);
    } else if(tabId == "jdsgTab5Link") {
        loadJdsgTabContent("/mng/asgsysSrng/sftyMngForm.html?prgrmid=" + prgrmid);
    } else if(tabId == "jdsgTab6Link") {
        loadJdsgTabContent("/mng/asgsysSrng/assChklst.html?prgrmid=" + prgrmid);
    }
    $("#" + tabId).parent().addClass("active");
}

function loadJdsgTabContent(uri){
    //$('#myTabContent').load(uri);
    $.ajax({
        cache   : false
      , url     : uri
      , type    : 'GET'
      , async   : 'false'
      , dataType: 'html'
      , success : function(result){ //요청이 성공했을때 실행되는 콜백 함수
                      $('#jdgsSprtgrpAltmntTabContent').html(result);

      ;
                      scrollIntoView('jdgsSprtgrpAltmntTabContent');
                  }
    });
    ;
    showContent();
}

function initJdsgTab() {
	;

    console.log("dsgnAplyDetailForm start");

    var tabFlag = false;
;
    if(tabFlag == false) {
        selectJdsgTab("jdsgTab1Link");
        tabFlag = true;
    }

    if(tabFlag == false) {
        selectJdsgTab("jdsgTab2Link");
        tabFlag = true;
    }

    if(tabFlag == false) {
        selectJdsgTab("jdsgTab3Link");
        tabFlag = true;
    }

    if(tabFlag == false) {
        selectJdsgTab("jdsgTab4Link");
        tabFlag = true;
    }

    if(tabFlag == false) {
        selectJdsgTab("jdsgTab5Link");
        tabFlag = true;
    }

    if(tabFlag == false) {
        selectJdsgTab("jdsgTab6Link");
        tabFlag = true;
    }
}


function initAplyInfoForm(){

	gridHelper1 = new GridHelper('jsGrid','contentPanel');
	writeSplmntDmndGridData();

	$('#applyInfo').focus();
	$("#instTypeCd").attr("disabled", true);
	$("#rgnCd").attr("disabled", true);
	$("#sttsCd").attr("disabled", true);

}

//보완요청 그리드
function writeSplmntDmndGridData(){

    $("#splmntDmndGrid").jsGrid({
        height: "auto",
        width: "100%",
        autoload: true,
        sorting: true,
        paging: true,
        pagerContainer: "#splmntDmndListPager",
        pagerFormat: "{first} {prev} {pages} {next} {last}",
        pagePrevText: "이전",
        pageNextText: "다음",
        pageFirstText: " < 처음 ㅣ",
        pageLastText: " | 마지막 >",
        pageSize: 10,
        pageButtonCount: 10,
        pageLoading: true,
        pageIndex: 1,
        noDataContent: "데이터가 없습니다.",

        controller: {
            loadData: function (filter) {
                var data = $.Deferred();

                var formData = $('#searchFrm').serializeArray();
                var formData = $('#searchFrm').serializeArray();
                var params = [
                        {name: "pageNumber", value: filter.pageIndex},
                        {name: "rowPerPage", value: filter.pageSize},
                        {name: "prgrmid", value: prgrmid},

                ]

                if(filter.sortField != undefined){
                    params.push({name: "orderField", value: filter.sortField});
                    params.push({name: "orderDirection", value: filter.sortOrder});
                }else{
                    params.push({name: "orderField", value: 'reg_dt'});
                }

                formData = formData.concat(params);

                $.ajax({
                  type: "GET",
                  contentType: "application/json; charset=utf-8",
                  url: "/mng/asgsysSrng/selectSplmntDmndList.do",
                  dataType: "json",
                  data: formData
                }).done(function(response){

console.log("@@@@@1");
//
console.log("@@@@@2");
                    var da = {
                            data : escapeGridData(response.splmntDmndList)
                            ,itemsCount : response.totalCount
                        };
                  data.resolve(da);
                });
                return data.promise();
            },
        },
        fields: [
             { name: 'prgrmid', css:'hide'}
            ,{ title: 'No.'           ,name: 'rowNumber',   type: "number", width : "80", align:"center",  sorting :false }
            ,{ title: '등록 진행상태' ,name: 'sttsCd',      type: "text", width: "100", aline:"center"}
            ,{ title: '요청내용'      ,name: 'opnnCn',      type: "text", width: "100", aline:"left"}
            ,{ title: '요청일'        ,name: 'regDt',       type: "text", width: "100", aline:"center" }
            ,{ title: '완료처리일'    ,name: 'cmptnPrcsDe', type: "text", align:"center" }
        ],

        rowClick: function(args) {

            if(args.event.originalEvent.target.cellIndex == 0 || isNaN(args.event.originalEvent.target.cellIndex)) return;

            var detailUrl = "/mng/asgsysSrng/dsgnAplyDetailForm.html?prgrmid=" + args.item.prgrmid;

            gridHelper1.loadContent(detailUrl);
            gridHelper1.rowClick(args);
        },
        onPageChanged: function(args) {
            selectedItems = [];
        }
    });

    var selectItem = function(item) {
        selectedItems.push(item);
        if($(".singleCheckbox").length == $(".singleCheckbox:checked").length) {
            $("#selectAllCheckbox").prop("checked", true);
        } else {
            $("#selectAllCheckbox").prop("checked", false);
        }
    };

    var unselectItem = function(item) {
        selectedItems = $.grep(selectedItems, function(i) {
        return i !== item;
        });
        if(selectedItems.length == 0) {
            $('#selectAllCheckbox').attr('checked', false);
        }
        if($(".singleCheckbox").length == $(".singleCheckbox:checked").length) {
            $("#selectAllCheckbox").prop("checked", true);
        } else {
            $("#selectAllCheckbox").prop("checked", false);
        }
    };

    $("#selectAllCheckbox").click(function(item) {
        selectedItems = [];
        if(this.checked) { // check select status
            $('.singleCheckbox').each(function() {
                this.checked = true;
                selectItem($(this).parent().next().text());
            });
        }else {
            $('.singleCheckbox').each(function() {
                this.checked = false;
                unselectItem(item);
            });
            selectedItems = [];
        }
    });
}


//요건검토중 상태변경
//“요건검토중 상태변경”으로 변경되며, 사용자 페이지에서 신청자가 신청정보를 수정 불가하다.(제출취소 및 신청정보 수정 불가)
function fn_updateSttsReqsRvw(){

	if(!confirm("진행상태가 요건검토중로 변경됩니다. 변경 하시겠습니까?")){return;}

    var data = {
            "sttsCd"  : '111103'    // 요건검토중
          , "prgrmid" : ""+prgrmid
    }

    $.ajax({
        url :"/mng/asgsysSrng/updateSttsCd.do",
        type: 'POST',
        cache : false,
        dataType: 'json',
        data : data,
        success : function (data){

            if(data.result=="success"){

                alert("진행상태가 변경 되었습니다.");
                var uri = "/mng/asgsysSrng/aplyInfoForm.html?prgrmid=" + prgrmid;

            }else{
                alert("진행상태변경중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
            closeWorkProgress();
        },
        error : function (error){
        }
    })
}

//담당자변경
var picAltmntModal;
var openPicChgModal = (modeYn) => {
	var mode = modeYn
    var url = "/mng/asgsysSrng/picAltmntPopup.html?mode="+mode;

    $("#picAltmntPopup").load(url, function(response, status, xhr) {
        if (status == "success") {
            picAltmntModal = new bootstrap.Modal($('#picAltmntPopup'));
            picAltmntModal.show();
        }
    });
}


//서류요청(보완요청popup)
var splmntDmndAddModal;
fn_openSplmntDmndPopup = () => {

    //var blcklstIds = selectedItems.join(",")

    //데이터 보내기
    //var url = "/mng/asgsysSrng/splmntDmndPopup.html?prgrmid="+prgrmid + "&frmNm=aplyInfo";
    var url = "/mng/asgsysSrng/splmntDmndPopup.html?prgrmid=111&sttsCd=111106";

    $("#splmntDmndPopup").load(url, function(response, status, xhr) {

        if (status == "success") {

            splmntDmndAddModal = new bootstrap.Modal($('#splmntDmndPopup'));
            splmntDmndAddModal.show();

        }
    });
}

//심사위원심사 요청
//“심사위원심사”로 변경되며, 심사위원 심사를 진행할 수 있다.
function fn_jdgsSrngDmnd(){

	//- 심사위원 배정이 안 되어 있을 경우
	if(1==2){
		alert("심사위원 배정이 되어 있지 않습니다. 심사위원 배정 후 심사위원심사 요청이 가능합니다.");
		return;
	}

    if(!confirm("진행상태가 심사위원심사로 변경됩니다. 변경 하시겠습니까?")){return;}

    var data = {
            "sttsCd"  : '111106'    //심사위원심사
          , "prgrmid" : ""+prgrmid
    }

    $.ajax({
        url :"/mng/asgsysSrng/updateSttsCd.do",
        type: 'POST',
        cache : false,
        dataType: 'json',
        data : data,
        success : function (data){

            if(data.result=="success"){

                alert("진행상태가 변경 되었습니다.");
                var uri = "/mng/asgsysSrng/aplyInfoForm.html?prgrmid=" + prgrmid;

            }else{
                alert("진행상태변경중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
            closeWorkProgress();
        },
        error : function (error){
        }
    })

}

//지원단심사요청
//진행상태 항목값이 “지원단심사”로 변경되며, 지원단 심사를 진행할 수 있다.
function fn_sprtgrpSrngDmnd(){

    //- 지원단 배정이 안 되어 있을 경우
    if(1==2){
        alert("지원단 배정이 되어 있지 않습니다. 지원단 배정 후 지원단심사 요청이 가능합니다.");
        return;
    }

    if(!confirm("진행상태가 지원단심사로 변경됩니다. 변경 하시겠습니까?")){return;}

    var data = {
            "sttsCd"  : '111107'    //지원단심사
          , "prgrmid" : ""+prgrmid
    }

    $.ajax({
        url :"/mng/asgsysSrng/updateSttsCd.do",
        type: 'POST',
        cache : false,
        dataType: 'json',
        data : data,
        success : function (data){

            if(data.result=="success"){

                alert("진행상태가 변경 되었습니다.");
                var uri = "/mng/asgsysSrng/aplyInfoForm.html?prgrmid=" + prgrmid;

            }else{
                alert("진행상태변경중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
            closeWorkProgress();
        },
        error : function (error){
        }
    })
}

function fn_deleteFileList(fileid, fileIdntfcKey){
    if(!confirm("파일을 삭제하시겠습니까?")){return;}
    fn_deleteFile(fileid, fileIdntfcKey);
    $("#"+fileid).remove();
}

function fn_deleteFile(fileid, fileIdntfcKey){

    var deleteFileUrl="/deleteFile.do?fileid="+fileid+"&file_idntfc_key=" + fileIdntfcKey;
      $.ajax({
        url : deleteFileUrl,
        type: 'GET',
        cache : false,
        dataType: 'json',
        success : function (data){
            console.log(data);
            if(data.result=="success"){
                $("#"+fileid).remove();
                alert("파일삭제가 완료 되었습니다.");
            }else{
                alert("파일삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
        },
        error : function (error){
        }
     })
};

function removePicInfo(userid){

	$("#picId-"+userid).remove();
}

initAplyInfoForm();

</script>