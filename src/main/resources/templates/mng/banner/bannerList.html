<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorator="layout/mng/mainLayout">

<body>
	<div layout:fragment="content">
		<style>
		.hide
		{
		   display:none;
		}
		</style>
		
	<form name="searchFrm" id="searchFrm" th:action="@{/}" method="POST" class="form-inline" onsubmit="return false;">
		<div class="page-body">
			<div class="row">
				<div class="col-12">
					<div class="card">
						<div class="card-block-small">
							<!-- 키워드 filter -->
							<div class="row">
		                        <div class="card-block-small">
		                            <div class="mb-0 form-group row">
		                                <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>사이트 선택</strong></div>
		                                <div class="col-sm-12">
		                                    <select name="siteid" id="siteid" class="form-select form-select-sm form-control-sm">
		                                        <option value="">- 선택 -</option>
												<th:block th:each="siteList : ${siteList}">
													<option th:value="${siteList.siteid}"><th:block th:text="${siteList.siteNm}" /></option>
												</th:block>
		                                    </select>
		                                </div>
		                            </div>
		                        </div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-12">
					<div class="card">
						<div class="card-header p-b-0">
							<ul class="nav nav-tabs  tabs" role="tablist">
								<li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#mainBanner" id="mainBanner" role="tab"><strong>메인배너</strong></a></li>
								<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#subBanner1" id="subBanner1" role="tab"><strong>서브배너1</strong></a></li>
								<li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#subBanner2" id="subBanner2" role="tab"><strong>서브배너2</strong></a></li>
							</ul>
						</div>
						<div class="tab-content tabs p-t-20" id="tabContent">
						</div>
					</div>
				</div>
			</div>
		</div>
		<input type="hidden" id="pageNumber" name="pageNumber" value="1">
		<input type="hidden" id="ORDER_DIRECTION" name="orderDirection" value="desc"> 
		<input type="hidden" id="orderField" name="orderField" value="BANNERID ASC, REG_DT">
		<input type="hidden" id="bannerPstnCd" name="bannerPstnCd" value="">
		</form>
		
		<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>		
		
		<script th:inline="javascript">
        var banner = {
                init: function() {
                    this.setTab();
                    this.registEvent();                
                },
                
                registEvent: function() {
                    var _this = this;
                    $(".nav-tabs a").on("show.bs.tab", function(event) {
                        var tabId = event.currentTarget.attributes.id.value;
                        _this.selectTab(tabId);
                    });
                },
                
                setTab: function() {
                    var tabFlag = false;
                    if(tabFlag == false) {
                        this.selectTab("mainBanner");
                        tabFlag = true;
                    }
                    if(tabFlag == false) {
                        this.selectTab("subBanner1");
                        tabFlag = true;
                    }
                    if(tabFlag == false) {
                        this.selectTab("subBanner2");
                        tabFlag = true;
                    }
                },
                
                selectTab: function(tabId) {
                    if(tabId == "mainBanner") {
                        this.loadTabContent("/mng/banner/mainBannerListForm.html");
                        $("#bannerPstnCd").val("233101");
                    } else if(tabId == "subBanner1") {
                        this.loadTabContent("/mng/banner/subBannerListForm1.html");
                        $("#bannerPstnCd").val("233102");
                    }  else if(tabId == "subBanner2") {
                        this.loadTabContent("/mng/banner/subBannerListForm2.html");
                        $("#bannerPstnCd").val("233103");
                    }
                    $("#" + tabId).parent().addClass("active");
                },
                
                loadTabContent: function(uri) {
                    $.ajax({
                        cache: false,
                        url: uri, 
                        type: "GET",
                        async: "false",
                        dataType: "html",
                        success: function(result) { //요청이 성공했을때 실행되는 콜백 함수
                            $("#tabContent").html(result);
                        }
                    });
                }
            };
            
            $(function() {
                banner.init();
            });
		</script>
	</div>
</body>
</html>

			
			
