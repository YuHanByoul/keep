<form id="blcklstFrm">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content type_2">
			<div class="modal-header">
				<h4 class="modal-title">배너 수정</h4>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
					<span aria-hidden="true"></span>
				</button>
			</div>
			<div class="modal-body">
				<div class="card m-b-10">
					<div class="card-block-small">
						<div class="mb-2 form-group row required">
							<div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>사이트</strong></div>
							<div class="col-sm-12">
								<select name="siteid" id="siteid" class="form-select form-select-sm form-control-sm">
									<option value="0">- 선택 -</option>
									<th:block th:each="siteList : ${siteList}">
									<option th:value="${siteList.siteid}"><th:block th:text="${siteList.siteNm}" /></option>
									</th:block>
								</select>
							</div>
						</div>
						<div class="mb-2 form-group row required">
							<label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="bannerInsertTitle"><strong>제목</strong></label>
							<div class="col-sm-12">
								<input type="text" class="form-control form-control-sm" name="bannerTtl" id="bannerTtl" placeholder="제목" th:value="${banner.bannerTtl}"/>
							</div>
						</div>
						<div class="mb-0 form-group row required">
							<div class="mb-0 form-group">
								<label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>배너 이미지</strong></label>
								<div class="col-sm-12 mb-2">
									<input type="file" class="form-control form-control-sm" />
								</div>
								<div class="mb-2 row">
									<div class="col-auto">
										<span class="label label-inverse"> sampleFile.pptx <a href="javascript:void(0)" class="text-white">X</a></span>
									</div>
								</div>
								<p class="text-warning m-b-0">* 사이즈 가로 000px, 세로 000px. png, jpg 포맷</p>
							</div>
						</div>
						<div class="mb-0 form-group row">
							<label class="form-label col-sm-12 col-form-label p-t-0 pb-1"
								for="bannerInsertLinkUrl"><strong>링크 URL</strong></label>
							<div class="col-sm-12">
								<input type="text" class="form-control form-control-sm" name="url" id="url" placeholder="Text Input Validation" />
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-inverse" onclick="updateModal_close();">삭제</button>
				<button type="button" class="btn btn-primary waves-effect waves-light" onclick="updateBanner();">저장</button>
			</div>
		</div>
	</div>
</form>

<script th:inline="javascript">

	var users = [[${users}]];
	var names = [];
	var ids = [];
	
	$(function(){
		users.forEach((item)=>{
			names.push(item.nm+"("+item.acnt+") &nbsp;&nbsp;");
			ids.push(item.userid);
		})
		$(".blck-names").html(names.join(","))
	});

	
    var validator= $("#blcklstFrm").validate({
        rules: {
        	blcklstRsn : { required: true , maxlength: 1000 }
        },
        messages: {
        	blcklstRsn : { required:"블랙리스트 사유를 입력해주십시오"   , maxlength:  "블랙리스트 사유는 1,000자 이하여야 합니다."}
        }
    })
	
	applyBlcklst =()=>{

        if(!($("#blcklstFrm").valid())) return;
        
        var params ={
        	    blcklstIds : ids.join(",")
                ,blcklstYn : 'Y'
                ,blcklstRsn : $("#blcklstRsn").val()
        }
        
	    if(displayWorkProgress()){
	        $.ajax({
	            url : "/mng/member/updatetBlcklstDsctn.do",
	            type: 'POST',
	            cache : false,
	            dataType: 'json',
	            data : params,
	            success : function (data){
	               alert(data.msg);
	               userAddModal.hide();
	               gridHelper1.resetListContent();
	               selectedItems = [];
	               closeWorkProgress();
	            }
	        });
	    }
	}
	
</script>