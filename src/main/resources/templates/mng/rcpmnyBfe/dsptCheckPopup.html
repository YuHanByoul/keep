<form id="dsptCheckFrm">
<input type="hidden" id="aplyid" name="aplyid" th:value="${rcpmnyBfe.aplyid}">

    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content type_2">
            <div class="modal-header">
                <h4 class="modal-title">입금확인</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card m-b-10">
                    <div class="card-block-small">
                        <div class="table-responsive">
                            <table class="table table-bordered td-wrap">
                                <colgroup>
                                    <col style="width:18%">
                                    <col style="width:32%">
                                    <col style="width:18%">
                                    <col style="width:32%">
                                </colgroup>
                                <tbody>
                                <tr>
                                    <th class="text-center v-middle table-light">시설</th>
                                    <td class="v-middle"><th:block th:text="${rcpmnyBfe.fcltNm}"/></td>
                                    <th class="text-center v-middle table-light">공간</th>
                                    <td class="v-middle"><th:block th:text="${rcpmnyBfe.spceNm}"/></td>
                                </tr>
                                <tr>
                                    <th class="text-center v-middle table-light">이용일(시)</th>
                                    <td class="v-middle">
                                        <th:block th:if ="${#dates.format(rcpmnyBfe.bgngDt, 'yyyy-MM-dd')} != ${#dates.format(rcpmnyBfe.endDt, 'yyyy-MM-dd')}">
                                            <th:block th:text="${#dates.format(rcpmnyBfe.bgngDt, 'yyyy-MM-dd')}+' ~ '+${#dates.format(rcpmnyBfe.endDt, 'yyyy-MM-dd')}"/>
                                        </th:block>
                                        <th:block th:if ="${#dates.format(rcpmnyBfe.bgngDt, 'yyyy-MM-dd')} == ${#dates.format(rcpmnyBfe.endDt, 'yyyy-MM-dd')}">
                                            <th:block th:text="${#dates.format(rcpmnyBfe.bgngDt, 'yyyy-MM-dd HH:mm')}+' ~ '+${#dates.format(rcpmnyBfe.endDt, 'HH:mm')}"/>
                                        </th:block>
                                    </td>
                                    <th class="text-center v-middle table-light">결제금액</th>
                                    <td class="v-middle"><th:block th:text="${#numbers.formatInteger(rcpmnyBfe.amt, 0, 'COMMA') + '원'}"/></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <h3 class="sub-title mt-2"><strong>입금 정보</strong></h3>
                        <div class="row">
                            <div class="col-12 col-lg-6 mb-2">
                                <div class="mb-0 form-group required">
                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="dpstDe"><strong>입금일</strong></label>
                                    <div class="col-12">
                                        <input type="date" class="form-control form-control-sm" name="dpstDe" id="dpstDe" th:value="${rcpmnyBfe.dpstDe}">
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6 mb-3">
                                <div class="mb-0 form-group required">
                                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="dpstAmt"><strong>입금금액</strong></label>
                                    <div class="d-flex align-items-center">
                                        <div class="col">
                                            <input type="text" class="form-control form-control-sm" name="dpstAmt" id="dpstAmt" th:value="${rcpmnyBfe.dpstAmt}">
                                        </div>
                                        <span class="ps-2">원</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="saveBtn" class="btn btn-primary waves-effect waves-light "   onclick="saveDsptCheck()">저장</button>
            </div>
        </div>
    </div>
</form>
<script th:inline="javascript">

function saveDsptCheck() {

	if(!confirm("입금확인처리 하시겠습니까?")){return;}

	var data = {
        "aplyid"      : $("#aplyid").val()
        , "dpstDe"      : $("#dpstDe").val()
        , "dpstAmt" : $("#dpstAmt").val()
    }

    $.ajax({
        url: "/mng/rcpmnyBfe/updateDsptCheck.do",
        type: 'POST',
        cache : false,
        dataType: 'json',
        data : data,
        success : function (data){
            if(data.result=="success"){
                alert("입금확인이 완료 되었습니다.");
                dsptCheckAddModal.hide();
                gridHelper2.resetPageContent();
            }else{
                alert("입금확인중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
            }
        },
        error : function (error){
        }
    });
};

</script>