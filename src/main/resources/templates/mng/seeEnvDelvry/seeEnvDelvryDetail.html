<form id="insertForm">
	<input type="hidden" name="aplyid" id="aplyid" th:value="${detail.aplyid}" /> 
    <div class="card">
        <div class="card-header p-b-0">
            <h3 class="sub-title"><strong>기본정보</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="row">
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>시도</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.ctprvnNm}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>지정번호</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.dsgnno}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>기관명</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.instNm}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>기관유형</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.instTypeNm}" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>대표자명</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.rprsvNm}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>대표자 생년월일</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.rprsvBrdt}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>법인등록번호(사업자등록번호)</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.brno}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>기관 이메일</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.instEml}" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>기관 연락처</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.instCntct}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>신청자</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.aplcntNm + '(' + detail.acnt + ')'}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>신청자 이메일</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.aplcntEml}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>신청자 연락처</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.aplcntMoblphon}" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-lg-6 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>기관주소</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${'우)' + detail.zip + ' ' + detail.addr}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>상세주소</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.addrDtl}" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>교부상태</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${detail.delvrySttsNm}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>발급일</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${#strings.isEmpty(detail.issuDe) ? '-' : detail.issuDe}" readonly>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for=""><strong>재발급일</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="" placeholder="" th:value="${#strings.isEmpty(detail.isgnDe) ? '-' : detail.isgnDe}" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-block-small">
            <button type="button" class="btn btn-disabled" onclick="gridHelper1.toggleContent(); return false;">취소</button>
            <button type="button" class="btn btn-primary" onclick="print();">지정서 출력</button>
            <button type="button" class="btn btn-primary" th:if="${detail.delvrySttsNm == '발급전'}" onclick="fn_issue('1'); return false;">발급</button>
            <button type="button" class="btn btn-primary" th:if="${detail.delvrySttsNm == '발급완료' or detail.delvrySttsNm == '재발급'}" onclick="fn_issue('2'); return false;">재발급</button>
        </div>
    </div>
</form>

<script th:inline="javascript">
    function fn_issue(num) {
    	var title = num == "1" ? "발급" : "재발급";
    	if (!confirm(title + " 하시겠습니까?")) return;
    	if(displayWorkProgress(true)){
            $.ajax({
                url : "/mng/seeEnvDelvry/updateIssue.do",
                type: 'POST',
                cache : false,
                dataType: 'json',
                data : {
                	aplyid: $("#aplyid").val()
                	, issueType: num
                },
                success : function (data){
                    if(data.result=="success"){
                        alert(data.msg);
                        gridHelper1.resetListContent();
                    }else{
                        alert(data.msg);
                    }
                    closeWorkProgress();
                }
            });
        }
    }
    
    var vPrint = "";
    function print() {
//         var popUrl = "/cmm/reporting/prgrmDetail.html?id="+aplyid;
//         var popupOption="scrollbars=yes,top=300, left=900,width=1000, height=600";
//         vPrint = window.open(popUrl, "_blank", popupOption);
    }
</script>