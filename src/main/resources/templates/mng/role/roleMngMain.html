<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorator="layout/mng/mainLayout"
>
<head>
<meta charset="utf-8" />
<body>
	<div layout:fragment="content" class="page-body">
	    <script type="text/javascript" charset="utf-8" src="/js/common/jquery/jquery.js"></script>
        <script src="/js/common/common.js"></script>
        <script th:inline="javascript">
        /*<![CDATA[*/
        
            var _ROLE_LEVEL = /*[[${rolelevel}]]*/ 'A'; //Controller로 부터 받아서 사용. main.js에서 사용.
        
        /*]]>*/
        
            $(document).ready(function(){
                //console.log("Start : " + _ROLE_LEVEL);
                
                var tabFlag = false;
                /*[# sec:authorize-url="/mng/roleauth/defineRole.html"]*/
                if(tabFlag == false) {
                    tabFlag = true;
                    loadTabContent('#defineRoleContent', '/mng/roleauth/defineRole.html?seCd='+_ROLE_LEVEL);
                    $('a[href="#defineRole"').addClass('active');    
                }
                /*[/]*/
                /*[# sec:authorize-url="/mng/roleauth/mappingUserForm.html"]*/
                if(tabFlag == false) {
                    tabFlag = true;
                    loadTabContent('#mappingUserContent', '/mng/roleauth/mappingUserForm.html?seCd='+_ROLE_LEVEL);
                    $('a[href="#mappingUser"').addClass('active');        
                }
                /*[/]*/
                /*[# sec:authorize-url="/mng/roleauth/configRoleMenuForm.html"]*/
                if(tabFlag == false) {
                    tabFlag = true;
                    loadTabContent('#configMenuContent', '/mng/roleauth/configRoleMenuForm.html?seCd='+_ROLE_LEVEL);
                    $('a[href="#configMenu"').addClass('active');        
                }
                /*[/]*/
                /*[# sec:authorize-url="/mng/roleauth/configRoleMenuForm.html"]*/
                if(tabFlag == false) {
                    tabFlag = true;
                    loadTabContent('#configInstContent', '/mng/roleauth/configRoleInstForm.html?seCd='+_ROLE_LEVEL);
                    $('a[href="#configInst"').addClass('active');        
                }
                /*[/]*/
                /*[# sec:authorize-url="/mng/roleauth/configRoleMenuForm.html"]*/
                if(tabFlag == false) {
                    tabFlag = true;
                    loadTabContent('#configRgnContent', '/mng/roleauth/configRoleRgnForm.html?seCd='+_ROLE_LEVEL);
                    $('a[href="#configRgn"').addClass('active');        
                }
                /*[/]*/
            });
            
        </script>
        <script src="/js/mng/role/main.js"></script>

        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-block-small">
                        <ul class="nav nav-tabs  tabs" role="tablist" id="roleMngMainTab">
                            <th:block sec:authorize-url="/mng/roleauth/defineRole.html">
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#defineRole" role="tab"><strong>역할정의</strong></a>
                            </li>
                            </th:block>
                            <th:block sec:authorize-url="/mng/roleauth/mappingUserForm.html">
                            <li class="nav-item" th:if="${'A'.equals(rolelevel)}">
                                <a class="nav-link" data-bs-toggle="tab" href="#mappingUser" role="tab"><strong>사용자매핑</strong></a>
                            </li>
                            </th:block>
                            <th:block sec:authorize-url="/mng/roleauth/configRoleMenuForm.html">                        
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#configMenu" role="tab"><strong>메뉴권한설정</strong></a>
                            </li>
                            </th:block>
                            <th:block sec:authorize-url="/mng/roleauth/configRoleInstForm.html">
                            <li class="nav-item" th:if="${'A'.equals(rolelevel)}">
                                <a class="nav-link" data-bs-toggle="tab" href="#configInst" role="tab"><strong>기관권한설정</strong></a>
                            </li>
                            </th:block>
                            <th:block sec:authorize-url="/mng/roleauth/configRoleRgnForm.html">
                            <li class="nav-item" th:if="${'A'.equals(rolelevel)}">
                                <a class="nav-link" data-bs-toggle="tab" href="#configRgn" role="tab"><strong>지역권한설정</strong></a>
                            </li>
                            </th:block>
                        </ul>
                        <div class="tab-content tabs p-t-20">
                            <div class="tab-pane active" id="defineRole" role="tabpanel">
                                <div id="defineRoleContent"></div>
                            </div>
                            <div class="tab-pane" id="mappingUser" role="tabpanel">
                                <div class="row" id="mappingUserContent"></div>
                            </div>
                            <div class="tab-pane" id="configMenu" role="tabpanel">
                                <div id="configMenuContent"></div>
                            </div>
                            <div class="tab-pane" id="configInst" role="tabpanel">
                                <div id="configInstContent"></div>
                            </div>
                            <div class="tab-pane" id="configRgn" role="tabpanel">
                                <div id="configRgnContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>