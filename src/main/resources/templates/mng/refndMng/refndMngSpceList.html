  <!--탭영역 start --> 
  <div class="tab-content tabs p-t-20">

      <div class="row p-20 p-b-0">
          <div class="col-12 col-md-6 mb-2 mb-md-0">
              <h5><strong>공간 정보</strong></h5>
          </div>
      </div>
      <div class="card-block-small">
          <div class="dt-responsive table-responsive">
              <div id="order-table_wrapper" class="dataTables_wrapper dt-bootstrap4">
                      <table id="fclgMngSpceGrid" class="table-responsive"></table>
                      <div id="refndMngMemListPager" class="text-center"></div>
             </div>
          </div>
      </div>
 </div>
    
<form id="searchManagerFrm" >
   <input type="hidden" id="refndMngid" name="refndMngid" th:value="${param.refndMngid}"/>
</form>

<!-- 담당자정보 회원검색 팝업 Start -->
<div class="modal fade" id="managerInsertPopup" aria-hidden="true" data-bs-backdrop="static"></div>
<!-- 담당자정보 회원검색 팝업 end  -->

<script type="text/javascript" src="/files/assets/pages/advance-elements/swithces.js"></script>
<script type="text/javascript" src="/files/assets/pages/advance-elements/select2-custom.js"></script>

<script th:inline="javascript">

    var selectedItems = [];
    var gridHelper1;
    $(function(){
        writeSpceMemGridData();
    });

    function writeSpceMemGridData(){
        $("#fclgMngSpceGrid").jsGrid({
            height: "auto",
            width: "100%",
            autoload: true,
            sorting: true,
            paging: true,
            pagerContainer: "#refndMngMemListPager",
            pagerFormat: "{first} {prev} {pages} {next} {last}",
            pagePrevText: "이전",
            pageNextText: "다음",
            pageFirstText: " < 처음 ㅣ",
            pageLastText: " | 마지막 >",
            pageSize: 10,
            pageButtonCount: 10,
            pageLoading: true,
            pageIndex: 1,
            noDataContent: "데이터가 없습니다.",
            
            controller: {
                loadData: function (filter) {
                    var data = $.Deferred();
                                            
                    var formData = $('#searchManagerFrm').serializeArray();
                    var params = [
                            {name: "pageNumber", value: filter.pageIndex},
                            {name: "rowPerPage", value: filter.pageSize},
                            {name: "refndid", value: refndid[0]},
                    ]
                    
                    if(filter.sortField != undefined){
                        params.push({name: "orderField", value: filter.sortField});
                        params.push({name: "orderDirection", value: filter.sortOrder});
                    }else{
                        params.push({name: "orderField", value: 'reg_dt'});
                    }
                    formData = formData.concat(params);

                    $.ajax({
                      type: "GET",
                      contentType: "application/json; charset=utf-8",
                      url: "/mng/refndMng/selectRefndMngSpceList.do",
                      dataType: "json",
                      data: formData,
                    }).done(function(response){
                        var da = {
                                data : escapeGridData(response.list)
                                ,itemsCount : response.totalCount
                            };
                      data.resolve(da);
                    });
                    return data.promise();
                },
            },
            fields: [
                { title: '번호'   ,name: 'rowNumber'       ,type: "number", width : "80", align:"center",  sorting :false }
                ,{ title: '공간번호'   ,name: 'spceNo'              ,type: "text" , width: "100" ,align:"center"}
                ,{ title: '공간'  ,name: 'spceNm'            ,type: "text" , width: "200"  ,align:"center"}
                ,{ title: '평형'   ,name: 'size'             ,type: "text" , width: "200" ,align:"center"
                , itemTemplate: function(value, item){ return value+'평형'; }
                }
                ,{ title: '최대 수용인원'   ,name: 'maxNope' ,type: "text" , align:"center"}
                ,{ title: '사용여부'  ,name: 'useYn' ,type: "text" , width: "120", align:"center" 
                , itemTemplate: function(value, item){ if(value=='Y'){return "사용";}else{return "사용안함";} }
                }
            ]
        });
    }
</script>