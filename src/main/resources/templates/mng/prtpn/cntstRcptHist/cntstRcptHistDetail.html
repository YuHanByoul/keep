<!DOCTYPE html>
<html
>
<div class="card" id="cntstAplyDetail">
    <!-- 기본정보 -->
    <div class="card-header p-b-0">
        <h3 class="sub-title"><strong>공모전 정보</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group required">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="clsfCd">분류</label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="clsfCd" readonly th:value="${cntstClsfCdMap[cntstInfo.clsfCd]}">
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group required">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>중복참여</strong></div>
                    <div class="mt-1">
                        <div class="form-radio">
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" th:checked="${cntstInfo.dpcnPsbltyYn == 'Y'}">
                                    <i class="helper"></i>가능
                                </label>
                            </div>
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" th:checked="${cntstInfo.dpcnPsbltyYn == 'N'}">
                                    <i class="helper"></i>불가능
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="date_01"><strong>접수시작일시</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="date_01" readonly th:value="${cntstInfo.aplyBgngDt}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="date_02"><strong>접수종료일시</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="date_02" readonly th:value="${cntstInfo.aplyEndDt}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="date_03"><strong>당첨자발표일시</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="date_03" readonly th:value="${cntstInfo.prsntnDt}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="row form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="ttl"><strong>제목</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" th:value="${cntstInfo.ttl}" id="ttl" readonly placeholder="제목을 입력해 주세요."/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 접수 정보 -->
    <div class="card-header p-b-0">
        <h3 class="sub-title"><strong>접수정보</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="aplyno"><strong>접수번호</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="aplyno" readonly th:value="${cntstAplyVO.aplyno}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>응모구분</strong></label>
                    <div class="mt-1">
                        <span kattr:radio_code="aplySeCd"
                              grpCd="168"
                              th:attr="selectedCd=${cntstAplyVO.aplySeCd}"
                              isAdmin="true">
                        </span>
                    </div>
                </div>
                </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>공모분야</strong></label>
                    <div class="mt-1">
                        <div class="form-radio">
                            <div class="radio radio-inline" th:each="cntstFldCd: ${cntstFldCdList}">
                                <label class="mb-0 form-label">
                                    <input type="radio" name="cntstFldCd" th:checked="${cntstAplyVO.pcntstFldCd eq cntstFldCd}">
                                    <i class="helper"></i>
                                    <span th:text="${cntstFldCdMap.get(cntstFldCd)}"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>지원경로</strong></label>
                    <div class="mt-1">
                        <span kattr:radio_code="aplyPathCd"
                            grpCd="167"
                            th:attr="selectedCd=${cntstAplyVO.aplyPathCd}"
                            isAdmin="true">
                        </span>
                    </div>
                </div>
                </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rprsvNm"><strong>접수자 성명</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="rprsvNm" readonly th:value="${cntstAplyVO.rprsvNm + (cntstAplyVO.instid ne null ? ' ('+ cntstAplyVO.instNm + ')' : '')}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="brdt"><strong>생년월일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="brdt" readonly th:value="${cntstAplyVO.brdt}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rprsvMoblphon"><strong>휴대전화</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="rprsvMoblphon" readonly th:value="${cntstAplyVO.rprsvMoblphon}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="eml"><strong>이메일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="eml" readonly th:value="${cntstAplyVO.eml}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="addr"><strong>주소</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="addr" readonly th:value="${cntstAplyVO.addr}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="addrDtl"><strong>상세주소</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="addrDtl" readonly th:value="${cntstAplyVO.addrDtl}"/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 작품정보 -->
    <div class="card-header p-b-0">
        <h3 class="sub-title"><strong>작품정보</strong></h3>
    </div>
    <div class="card-block-small p-t-0" th:if="${cntstInfo.clsfCd ne '165105'}">
        <div class="row">
            <div class="col-lg-12 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prdctTtl"><strong>작품제목</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="prdctTtl" readonly th:value="${cntstAplyVO.prdctTtl}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prdctExpln"><strong>작품설명</strong></label>
                    <div class="col-sm-12">
                        <textarea  class="form-control form-control-sm" id="prdctExpln" readonly th:text="${cntstAplyVO.prdctExpln}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>작품업로드</strong></label>
                    <div class="col-sm-12">
                        <div id="prdctFileList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-block-small p-t-0" th:if="${cntstInfo.clsfCd eq '165105'}">

        <div class="dt-responsive table-responsive">
            <div id="order-table_wrapper"
                 class="dataTables_wrapper dt-bootstrap4">
                <table id="cntstAplySchlList" class="table-responsive"></table>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>제출서류</strong></label>
                    <div class="col-sm-12">
                        <div id="prdctFileList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:inline="javascript">


    $(function(){
        const prdctFileList = /*[[${prdctFileList}]]*/null;
        const cntstAplySchlList = /*[[${cntstAplySchlList}]]*/null;
        const cntstFldCdMap = /*[[${cntstFldCdMap}]]*/null;
        fileUploader($("#prdctFileList"), '', '', prdctFileList, {multiple: true, readonly: true});
        const cntstAplySchlListData = cntstAplySchlList.map((item, i) => ({rowNumber: i+1, ...item}));

        $("#cntstAplyDetail").find("input[type=checkbox], input[type=radio]").on('change click', function () {
            return false;
        })
        $("#cntstAplySchlList").jsGrid({
            height: "auto",
            width: "100%",
            autoload: true,
            sorting: false,
            paging: false,
            data: cntstAplySchlListData,
            noDataContent: "데이터가 없습니다.",
            fields: [
                {title:'연번', name:'rowNumber', align:"center", width:80}
                , {title:'학교명', name:'schlNm', align:"center", width:400}
                , {title:'지도교사 성함', name:'tcherNm', width:200, align: "center"}
                , {title:'지도교사 성별', name:'tcherGndr', width:100, align: "center"}
                , {title:'연락처', name:'telno', width: 150, align: "center"}
                , {title:'신청대상', name:'pcntstFldCd', width: 150, align: "center", itemTemplate: value => cntstFldCdMap[value]}
                , {title:'남학생', name:'stdntMale', width: 90, align: "center", itemTemplate: value => `${value} 명`}
                , {title:'여학생', name:'stdntFemale', width: 90, align: "center", itemTemplate: value => `${value} 명`}
            ]
        });
    })
</script>
