<!DOCTYPE html>
<html
>
<div class="card" id="cntstAplyDetail">
    <!-- 기본정보 -->
    <div class="card-header p-b-0">
        <h3 class="sub-title"><strong>공모전 정보</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="clsfCd"><strong>분류</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="clsfCd" readonly th:value="${cntstClsfCdMap[cntstInfo.clsfCd]}">
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>중복참여</strong></div>
                    <div class="mt-1">
                        <div class="form-radio">
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" th:checked="${cntstInfo.dpcnPsbltyYn == 'Y'}">
                                    <i class="helper"></i>가능
                                </label>
                            </div>
                            <div class="radio radio-inline">
                                <label class="mb-0 form-label">
                                    <input type="radio" th:checked="${cntstInfo.dpcnPsbltyYn == 'N'}">
                                    <i class="helper"></i>불가능
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="date_01"><strong>접수시작일시</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="date_01" readonly th:value="${cntstInfo.aplyBgngDt}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="date_02"><strong>접수종료일시</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="date_02" readonly th:value="${cntstInfo.aplyEndDt}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="date_03"><strong>당첨자발표일시</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="date_03" readonly th:value="${cntstInfo.prsntnDt}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="row form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="ttl"><strong>제목</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" th:value="${cntstInfo.ttl}" id="ttl" readonly placeholder="제목을 입력해 주세요."/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 접수 정보 -->
    <div class="card-header p-b-0">
        <h3 class="sub-title"><strong>접수정보</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="aplyno"><strong>접수번호</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="aplyno" readonly th:value="${cntstAplyVO.aplyno}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3" th:if="${cntstInfo.clsfCd ne '165103'}">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>응모구분</strong></label>
                    <div class="mt-1">
                        <span kattr:radio_code="aplySeCd"
                              grpCd="168"
                              th:attr="selectedCd=${cntstAplyVO.aplySeCd}"
                              isAdmin="true">
                        </span>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>공모분야</strong></label>
                    <div class="mt-1">
                        <div class="form-radio">
                            <div class="radio radio-inline" th:each="cntstFldCd: ${cntstFldCdList}">
                                <label class="mb-0 form-label">
                                    <input type="radio" name="cntstFldCd" th:checked="${cntstAplyVO.pcntstFldCd eq cntstFldCd}">
                                    <i class="helper"></i>
                                    <span th:text="${cntstFldCdMap.get(cntstFldCd)}"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>지원경로</strong></label>
                    <div class="mt-1">
                        <span kattr:radio_code="aplyPathCd"
                            grpCd="167"
                            th:attr="selectedCd=${cntstAplyVO.aplyPathCd}"
                            isAdmin="true">
                        </span>
                    </div>
                </div>
                </div>
        </div>
        </div>
            <!-- 접수 정보 -->
	<div class="card-header p-t-0 p-b-0">
	    <h3 class="sub-title"><strong>접수 정보</strong></h3>
	</div>
    <div class="card-block-small p-t-0">
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rprsvNm"><strong>접수자 성명</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="rprsvNm" readonly th:value="${cntstAplyVO.rprsvNm + (cntstAplyVO.instid ne null ? ' ('+ cntstAplyVO.instNm + ')' : '')}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="brdt"><strong>생년월일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="brdt" readonly th:value="${cntstAplyVO.brdt}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rprsvMoblphon"><strong>휴대전화</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="rprsvMoblphon" readonly th:value="${cntstAplyVO.rprsvMoblphon}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="eml"><strong>이메일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="eml" readonly th:value="${cntstAplyVO.eml}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="addr"><strong>주소</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="addr" readonly th:value="${cntstAplyVO.addr}"/>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-3">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="addrDtl"><strong>상세주소<th:block th:if="${cntstInfo.clsfCd eq '165103'}">(일기장 수령장소)</th:block></strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" id="addrDtl" readonly th:value="${cntstAplyVO.addrDtl}"/>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 작품 정보 -->
    <th:block th:if="${cntstInfo.clsfCd ne '165103'}">
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>작품 정보</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        
            <div class="row">
                <div class="col-lg-12 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prdctTtl"><strong>작품제목</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" id="prdctTtl" readonly th:value="${cntstAplyVO.prdctTtl}"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 mb-3">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prdctExpln"><strong>작품설명</strong></label>
                        <div class="col-sm-12">
                            <textarea  class="form-control form-control-sm" id="prdctExpln" readonly th:text="${cntstAplyVO.prdctExpln}"/>
                        </div>
                    </div>
                </div>
            </div>
	        <div class="row form-group mb-3">
	            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="WorkContents"><strong>참여학생명단 업로드</strong></label>
	            <div class="m-0 row">
	                <div class="col-12 row border rounded p-t-10 p-b-10 m-0 mt-2">
	                    <div class="col-auto">
	                    	<th:block th:each="item: ${prdctFileList}">
	                    		<span class="label label-inverse" th:id="${item.fileid}">
										<a class='text-white' href="javascript:void(0)" th:name="${item.fileid}" th:onclick="downloadFileByFileid([[${item.fileid}]],[[${item.fileIdntfcKey}]])">
										<th:block th:text="${item.orginlFileNm}"></th:block>&nbsp;&nbsp;</a>
										<a class='text-white' href="javascript:void(0)" th:onclick="fn_deleteFileList([[${item.fileid}]],[[${item.fileIdntfcKey}]])">X</a>
	                    		</span>
	                    	</th:block>
	                    	<th:block th:if="${#lists.size(prdctFileList)} == 0">
	                    		등록된 파일이 없습니다.
	                    	</th:block>
	                    </div>
	                </div>
	            </div>
	        </div>
            
    </div>
    </th:block>
    <th:block th:if="${cntstInfo.clsfCd eq '165103'}">
	    <div class="card-header p-t-0 p-b-0">
	        <h3 class="sub-title"><strong>참여자 정보</strong></h3>
	    </div>
	    <div class="card-block-small p-t-0">
	        <div class="row">
	            <div class="col-lg-6 mb-3">
	                <div class="mb-0 form-group">
	                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="depositorNum42"><strong>학교명</strong></label>
	                    <div class="col-12">
	                        <input type="text" class="form-control form-control-sm" name="schlNm" id="schlNm" placeholder="Text Input Validation" th:value="${cntstAplyVO.schlNm}" disabled="">
	                    </div>
	                </div>
	            </div>
	            <div class="col-lg-6 mb-3">
	                <div class="mb-0 form-group">
	                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="depositorNum52"><strong>학년</strong></label>
	                    <div class="col-12">
	                        <input type="text" class="form-control form-control-sm" name="grade" id="grade" placeholder="Text Input Validation" th:value="${cntstAplyVO.grade}+학년" disabled="">
	                    </div>
	                </div>
	            </div>
	        </div>
	        <div class="row">
	            <div class="col-lg-6 mb-3">
	                <div class="mb-0 form-group">
	                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="depositorPhone12"><strong>참여학생수</strong></label>
	                    <div class="col-12">
	                        <input type="text" class="form-control form-control-sm" name="stdntNope" id="stdntNope" th:value="${cntstAplyVO.stdntNope}+명" disabled="">
	                    </div>
	                </div>
	            </div>
	        </div>
	        <div class="row form-group mb-3">
	            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="WorkContents"><strong>참여학생명단 업로드</strong></label>
	            <div class="m-0 row">
	                <div class="col-12 row border rounded p-t-10 p-b-10 m-0 mt-2">
	                    <div class="col-auto">
	                    	<th:block th:each="item: ${stdntFileList}">
	                    		<span class="label label-inverse" th:id="${item.fileid}">
										<a class='text-white' href="javascript:void(0)" th:name="${item.fileid}" th:onclick="downloadFileByFileid([[${item.fileid}]],[[${item.fileIdntfcKey}]])">
										<th:block th:text="${item.orginlFileNm}"></th:block>&nbsp;&nbsp;</a>
										<a class='text-white' href="javascript:void(0)" th:onclick="fn_deleteFileList([[${item.fileid}]],[[${item.fileIdntfcKey}]])">X</a>
	                    		</span>
	                    	</th:block>
	                    	<th:block th:if="${#lists.size(stdntFileList)} == 0">
	                    		등록된 파일이 없습니다.
	                    	</th:block>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
    </th:block>
</div>
<script th:inline="javascript">
    $(function(){
        const cntstFldCdMap = /*[[${cntstFldCdMap}]]*/null;

        $("#cntstAplyDetail").find("input[type=checkbox], input[type=radio]").on('change click', function () {
            return false;
        })
    })
    
    /* 파일삭제 */
	function fn_deleteFileList(fileid, fileIdntfcKey){
	    if(!confirm("파일을 삭제하시겠습니까?")){return;}
	    fn_deleteFile(fileid, fileIdntfcKey);
	    $("#"+fileid).remove();
	} 
	
	function fn_deleteFile(fileid, fileIdntfcKey){
	               
	    var deleteFileUrl="/deleteFile.do?fileid="+fileid+"&file_idntfc_key=" + fileIdntfcKey; 
	      $.ajax({
	        url : deleteFileUrl,
	        type: 'GET',
	        cache : false,
	        dataType: 'json',
	        success : function (data){
	            if(data.result=="success"){
	                $("#"+fileid).remove();
	                $('#rprsImgFileid').val(0);
	                $('#rprsImgFilegrpid').val(0);
	                $('#rprsImgFile').val('');
	                alert("파일삭제가 완료 되었습니다.");
	            }else{
	                alert("파일삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
	            }
	        },
	        error : function (error){
	        } 
	     })
	};
</script>
