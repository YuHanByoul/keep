<form id ="eduClssRmUpdateForm">
<input type="hidden" id="clssrmId" name="clssrmId" th:value="${eduClssRm.clssrmId}">
		 <!-- UPDATE -->
         <div class="card-header p-b-0">
             <h3 class="sub-title"><strong>교육관 정보</strong></h3>
         </div>
          
        <!-- Tab Container Start -->
         <div class="card-block-small p-t-0">
             <div class="row">
                 <div class="col-lg-6 mb-3">                 
                     <div class="mb-0 form-group required">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="clssrmNm"><strong>교육관명</strong></label>
                         <div class="col-sm-12">
                             <input type="text" class="form-control form-control-sm" name="clssrmNm" id="clssrmNm" placeholder="교육관명" th:value="${eduClssRm.clssrmNm}"/>
                             <span class="messages"></span>
                         </div>
                     </div>
                 </div>      
                 <div class="col-lg-6 mb-3">                 
                     <div class="mb-0 form-group required">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>교육관지역</strong></label>
                         <div class="col-sm-12">
                             <th:block kattr:select_code="ctprvnCd" th:attr="grpCd=143,selectedCd=${eduClssRm.ctprvnCd}" firstOptTxt="- 선택 -" isAdmin="true"></th:block>
                         </div>
                     </div>
                 </div>                                      
             </div>
             <div class="row">             
                 <div class="col-lg-6 mb-3">                 
                     <div class="mb-0 form-group required">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>교육유형</strong></label>
                         <div class="col-sm-12">
                             <th:block kattr:select_code="eduTypeCd" th:attr="grpCd=144,selectedCd=${eduClssRm.eduTypeCd}" firstOptTxt="- 선택 -" isAdmin="true"></th:block>                             
                         </div>
                     </div>
                 </div>    
                 <div class="col-lg-6 mb-3">    
                     <div class="mb-0 form-group required">                     
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>위탁기관</strong></label>
                         <div class="col-12 row">
                             <div class="col-8">
                                 <input type="text" class="form-control form-control-sm" name="cnsgnInstNm" id="instNm" placeholder="기관" th:value="${eduClssRm.cnsgnInstNm}"/>
                                 <input type="hidden" name="cnsgnInstId" id="instid" th:value="${eduClssRm.cnsgnInstId}"/>
                             </div>
                             <div class="col-4 btn-group-sm">
                                 <button type="button" class="btn btn-inverse" onclick="fn_openInstSearchModal();">
                                     기관검색
                                 </button>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>           
             <div class="row">
                 <div class="col-lg-6 mb-3">
                     <div class="mb-0 form-group">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rcptBgngDt"><strong>접수시작일시 설정</strong></label>
                         <div class="row">
                             <div class="col-sm-6">
                                <input class="form-control form-control-sm" type="datetime-local" name="rcptBgngDt" id="rcptBgngDt" th:value="${ #strings.substring(eduClssRm.rcptBgngDt, 0,16)}"/>
                             </div>   
                         </div>
                     </div>
                 </div>                     
                 <div class="col-lg-6 mb-3">     
                     <div class="mb-0 form-group">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rcptEndDt"><strong>접수종료일시 설정</strong></label>
                         <div class="row">
                             <div class="col-sm-6">                         
                                <input class="form-control form-control-sm" type="datetime-local" name="rcptEndDt" id="rcptEndDt" th:value="${ #strings.substring(eduClssRm.rcptEndDt, 0,16)}"/>
                             </div>                                
                         </div>
                     </div>
                 </div>                     
             </div>           
             <div class="row">              
                 <div class="col-lg-6 mb-3">                                 
                     <div class="mb-0 form-group required" >
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="clssrmFyerAplyLmtCnt"><strong>교육관 신청 기관별 연간 횟수 제한</strong></label>
                         <div class="col-sm-12">
                             <input type="text" class="form-control form-control-sm" name="clssrmFyerAplyLmtCnt" id="clssrmFyerAplyLmtCnt" placeholder="제한이 없을 경우는 0으로 입력해 주시기 바랍니다." th:value="${eduClssRm.clssrmFyerAplyLmtCnt}">
                             <span class="messages"></span>
                         </div>
                     </div>
                 </div>    
                 <div class="col-lg-6 mb-3">
                     <div class="mb-0 form-group required">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="clssrmPrgrmMaxAplyInstCnt"><strong>교육관 프로그램별 최대 신청 기관수</strong></label>
                         <div class="col-sm-12">
                             <input type="text" class="form-control form-control-sm" name="clssrmPrgrmMaxAplyInstCnt" id="clssrmPrgrmMaxAplyInstCnt" placeholder="제한이 없을 경우는 0으로 입력해 주시기 바랍니다." th:value="${eduClssRm.clssrmPrgrmMaxAplyInstCnt}">
                             <span class="messages"></span>
                         </div>
                     </div>
                 </div>
             </div>
             <div class="row">              
                 <div class="col-lg-6 mb-3">                                 
                     <div class="mb-0 form-group required">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="clssrmViewngMaxAplyNope"><strong>교육관 관람 최대 신청 인원수</strong></label>
                         <div class="col-sm-12">
                             <input type="text" class="form-control form-control-sm" name="clssrmViewngMaxAplyNope" id="clssrmViewngMaxAplyNope" placeholder="제한이 없을 경우는 0으로 입력해 주시기 바랍니다." th:value="${eduClssRm.clssrmViewngMaxAplyNope}">
                             <span class="messages"></span>
                         </div>
                     </div>
                 </div>
                 <div class="col-lg-6 mb-3">                                  
                     <div class="mb-0 form-group required">
                         <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rcptPsbltyBfrDaycnt"><strong>교육 당일 이전 접수 가능 일수</strong></label>
                         <div class="col-sm-12">                         
                            교육일 기준 D -<input type="text" class="form-control form-control-sm d-inline-block ms-2" name="rcptPsbltyBfrDaycnt" id="rcptPsbltyBfrDaycnt" style="width: 50px;"  th:value="${eduClssRm.rcptPsbltyBfrDaycnt}">
                            일 부터 접수 가능
                         </div>   
                     </div>                     
                 </div>       
             </div>      
             <div class="row form-group mb-3">                     
                 <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="rmrk"><strong>비고</strong></label>
                 <div class="col-sm-12">
                     <textarea rows="5" cols="5" name="rmrk" id="rmrk" class="form-control form-control-sm" placeholder="내용을 입력해주세요." th:text="${eduClssRm.rmrk}"></textarea>
                 </div>
             </div>
         </div>  
         <div class="card-block-small">
             <button type="button" class="btn btn-disabled m-r-5" id="cancelInsertEnvedu" onclick="gridHelper1.toggleContent()">취소</button>
             <th:block sec:authorize-url="/mng/prtpn/eduClssRm/updateEduClssRm.do"><button type="button" class="btn btn-primary" id="updateEnvedu" onclick="fn_updateEnvedu()">저장</button></th:block>
         </div>
         <!-- Tab Container End -->
</form>
<div class="modal fade" id="instSearchPopup" data-bs-backdrop="static"></div>
<script type="text/javascript">

	var instSearchPopupUrl = "/mng/envtcherTrnngInst/instSearchPopup.html";
	var instSearchAddModal;
	
	fn_openInstSearchModal = () => {
	    $("#instSearchPopup").load(instSearchPopupUrl, function(response, status, xhr) {
	        if (status == "success") {
	            instSearchAddModal = new bootstrap.Modal($('#instSearchPopup'));
	            instSearchAddModal.show();
	        }
	    });
	}
	
 	function fn_updateEnvedu(){
	 	if(!($("#eduClssRmUpdateForm").valid())) return;

  	 	if(!confirm("저장하시겠습니까?")) return;
  	 	
	    var data =  $("#eduClssRmUpdateForm").serialize();
	    if(displayWorkProgress()){
			$.ajax({
				url : "/mng/prtpn/eduClssRm/updateEduClssRm.do",
				type: 'POST',
				cache : false,
				dataType: 'json',
				data : data,
				success : function (data){
					if(data.result=="success"){
						alert(data.msg);
						gridHelper1.resetListContent();
					}else{
						alert(data.msg);
					}
					closeWorkProgress();
				}
			});
		}
	}
</script>