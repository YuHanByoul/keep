<form id="cmntyUpdateForm">
    <input type="hidden" name="operYn" th:value="${cmnty.cmntyInfo.operYn}">
    <div class="tab-pane active" id="cmnty" role="tabpanel">
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>기본정보</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="mb-2 row align-items-end">
                <div class="col-12 col-lg-3 mb-2 mb-lg-0">
                    <th:block th:if ="${cmnty.fileInfo != null}">
                        <img class="img-fluid col-12" th:src="'/downloadFileByFileid.do?fileid='+${cmnty.fileInfo.fileid}+'&file_idntfc_key='+${cmnty.fileInfo.fileIdntfcKey}" alt="logo image" style="max-width: 300px; height: auto;">
                    </th:block>
                    <th:block th:unless ="${cmnty.fileInfo != null}">
                        <img class="img-fluid col-12" src="/images/mng/default_logo.png" alt="logo image">
                    </th:block>
                </div>
                <div class="col-12 col-lg-9 form-group mb-0">
                    <div class="mb-0 form-group row">
                        <div class="col-12">
                            <span kattr:switch_yn="operYn" label="커뮤니티 운영" th:attr="defaultVal=${cmnty.cmntyInfo.operYn}" isAdmin="true">
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-2 form-group row">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="cmntyNm"><strong>커뮤니티명</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="cmntyNm" id="cmntyNm" th:value="${cmnty.cmntyInfo.joinaprvmthdCd}" readonly/>
                </div>
            </div>
            <div class="mb-2 form-group row">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="communityIntro"><strong>커뮤니티 소개</strong></label>
                <div class="col-sm-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" th:text="${cmnty.cmntyInfo.cmntyIntrcn}" id="cmntyIntrcn" name="cmntyIntrcn" readonly></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="communityFounder"><strong>개설자</strong></label>
                <div class="col-sm-12">
                    <input type="text" class="form-control form-control-sm" name="communityFounder" id="communityFounder" value="keepgo" readonly/>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-lg-4 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>가입승인 방식</strong></div>
                        <div class="col-12 mt-1">
                            <span kattr:radio_code="joinaprvmthdCd" th:attr="grpCd=115, selectedCd=${cmnty.cmntyInfo.joinaprvmthdCd}" disabled="115100|115101" isAdmin="true">
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-4 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>공개여부 설정</strong></div>
                        <div class="col-12 mt-1">
                            <div class="form-radio">
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="rlsYn" th:checked="${cmnty.cmntyInfo.rlsYn == 'Y'}" onclick="return false;"/>
                                        <i class="helper"></i>공개
                                    </label>
                                </div>
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="rlsYn" th:checked="${cmnty.cmntyInfo.rlsYn == 'N'}" onclick="return false;"/>
                                        <i class="helper"></i>비공개
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-4">
                    <div class="mb-0 form-group">
                        <div class="form-label col-sm-12 col-form-label p-t-0 pb-1"><strong>검색노출 동의 여부</strong></div>
                        <div class="col-12 mt-1">
                            <div class="form-radio">
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="srchExpsrYn" th:checked="${cmnty.cmntyInfo.srchExpsrYn == 'Y'}" onclick="return false;"/>
                                        <i class="helper"></i>동의함
                                    </label>
                                </div>
                                <div class="radio radio-inline">
                                    <label class="mb-0 form-label">
                                        <input type="radio" name="srchExpsrYn" th:checked="${cmnty.cmntyInfo.srchExpsrYn == 'N'}" onclick="return false;"/>
                                        <i class="helper"></i>동의하지 않음
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>카테고리 설정</strong></h3>
            <li th:each="ctgry: ${ctgryList}">
                <span th:text="${ctgry.cmntyBbsTmplatid}"></span>
            </li>
        </div>
        <div class="card-block-small p-t-0">
            <div class="border-checkbox-section">
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="ntcmttrYn" id="ntcmttrYn" onclick="return false;">
                    <label class="form-label form-label-sm border-checkbox-label" for="ntcmttrYn">
                        공지사항
                    </label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="infobbsYn" id="infobbsYn" onclick="return false;">
                    <label class="form-label form-label-sm border-checkbox-label" for="infobbsYn">
                        정보게시판
                    </label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="recsroomYn" id="recsroomYn" onclick="return false;">
                    <label class="form-label form-label-sm border-checkbox-label" for="recsroomYn">
                        자료실
                    </label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="envobservactvtYn" id="envobservactvtYn" onclick="return false;">
                    <label class="form-label form-label-sm border-checkbox-label" for="recsroomYn">
                        환경관찰활동
                    </label>
                </div>
            </div>
        </div>
    </div>
</form>

<script th:inline="javascript">
    var cmntyUpdate = {
        init: function() {
            var elemsingleSmallList = document.querySelectorAll('.js-single-small');
            for(var i = 0; i < elemsingleSmallList.length; i++) {
                new Switchery(elemsingleSmallList[i], {color: "#93BE52", jackColor: "#fff", size: "small"});
           }
           $(".switchery").css({pointerEvents: "none"});
           
           $(cmntyDetail.ctgryList).each(function(index, item) { // 카테고리 설정
               var tmplatid = item.cmntyBbsTmplatid;
               if(tmplatid == 1) { // 공지사항
                   $('#ntcmttrYn').prop("checked", true);
               } else if(tmplatid == 2) { // 정보게시판
                   $('#infobbsYn').prop("checked", true);
               }  else if(tmplatid == 3) { // 자료실
                   $('#recsroomYn').prop("checked", true);
               }  else if(tmplatid == 4) { // 환경관찰활동
                   $('#envobservactvtYn').prop("checked", true);
               }
           });
           
           this.registEvent();
        },
        
        registEvent: function() {
            // TODO
        },
    };
    
    cmntyUpdate.init();
</script>