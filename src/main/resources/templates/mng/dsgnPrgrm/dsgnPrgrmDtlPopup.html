<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="layout/mng/popupLayout">


<div layout:fragment="content">
    <!-- Pre-loader start -->

    <!-- Pre-loader end -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">


            <div class="pcoded-main-container" style="margin-top: 0 !important">
                <div class="pcoded-wrapper">

                    <!-- <div class="pcoded-content"> -->
                    <div class="pcoded-inner-content">
                        <!-- Main-body start -->
                        <div class="main-body">
                            <!-- 회원관리 sm 버전 -->
                            <div class="">
                                <!-- Page-header start -->

                                <!-- Page-header end -->
                                <!-- Page-body start -->
                                <div class="page-body">


                                    <form id="dsgnPrgrmDtlFrm" class="card">
                                        <input type="hidden" id="prgrmid" name="prgrmid" th:value="${dsgnPrgrmInfo.prgrmid}">

                                        <div class="card-header p-b-10">
                                            <div class="mb-2 row btn-group-sm justify-content-end">
                                                <button type="button" class="col-auto btn btn-primary" onclick="openPrint()">인쇄</button>
                                            </div>
                                            <ul class="nav nav-tabs tabs active" role="tablist">
                                                <!-- [230125] nav-pills flex-column flex-lg-row -> nav-tabs tabs 탭 변경 (첫번째 탭 활성화) -->
                                                <th:block sec:authorize-url="/mng/asgsysSrng/aplyInfoForm.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab1Link" href="#jdsgTab1" role="tab"><strong>신청 정보</strong></a></li>
                                                </th:block>
                                                <th:block sec:authorize-url="/mng/asgsysSrng/prgrmDstnctnForm.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab2Link" href="#jdsgTab2" role="tab"><strong>프로그램 우수성</strong></a></li>
                                                </th:block>
                                                <th:block sec:authorize-url="/mng/asgsysSrng/prgrmOperMngForm.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab3Link" href="#jdsgTab3" role="tab"><strong>프로그램 운영관리</strong></a></li>
                                                </th:block>
                                                <th:block sec:authorize-url="/mng/asgsysSrng/prgrmEvl.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab4Link" href="#jdsgTab4" role="tab"><strong>프로그램 평가</strong></a></li>
                                                </th:block>
                                                <th:block sec:authorize-url="/mng/asgsysSrng/ldrQlfcForm.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab5Link" href="#jdsgTab5" role="tab"><strong>지도자의 자격 및 배치</strong></a></li>
                                                </th:block>
                                                <th:block sec:authorize-url="/mng/asgsysSrng/sftyMngForm.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab6Link" href="#jdsgTab6" role="tab"><strong>안전관리</strong></a></li>
                                                </th:block>
                                                <th:block sec:authorize-url="/mng/asgsysSrng/assChklstForm.html">
                                                    <li class="nav-item flex-lg-fill text-center"><a class="nav-link" data-bs-toggle="tab" id="jdsgTab7Link" href="#jdsgTab7" role="tab"><strong>체크리스트</strong></a></li>
                                                </th:block>
                                            </ul>
                                        </div>
                                        <div id="jdgsSprtgrpAltmntTabContent" class="tab-content tabs p-t-20"></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script th:inline="javascript">

            //tabEvent
            $('.nav-item a').on('show.bs.tab', function(event) {
                debugger;
                var tabId = event.currentTarget.attributes.id.value;
                console.log("############## tabId : " + tabId);

                selectJdsgTab(tabId);

            });

            //init
            function initAplyInfoForm(){



                $('#applyInfo').focus();
                $("#instTypeCd").attr("disabled", true);
                $("#rgnCd").attr("disabled", true);
                $("#sttsCd").attr("disabled", true);

                $("#aplcntNm").val($("#aplcntNm").val()+"("+$("#acnt").val()+ ")");

                initJdsgTab();
                setPic();

            }

            function selectJdsgTab(tabId) {

                var vPrgrmid = $("#prgrmid").val();
                if(tabId == "jdsgTab1Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/aplyInfoForm.html?prgrmid=" + vPrgrmid);
                } else if(tabId == "jdsgTab2Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/prgrmDstnctnForm.html?prgrmid=" + vPrgrmid);
                } else if(tabId == "jdsgTab3Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/prgrmOperMngForm.html?prgrmid=" + vPrgrmid);
                } else if(tabId == "jdsgTab4Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/prgrmEvl.html?prgrmid=" + vPrgrmid);
                } else if(tabId == "jdsgTab5Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/prgrmLdr.html?prgrmid=" + vPrgrmid);
                } else if(tabId == "jdsgTab6Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/sftyMngForm.html?prgrmid=" + vPrgrmid);
                } else if(tabId == "jdsgTab7Link") {
                    loadJdsgTabContent("/mng/asgsysSrng/assChklstForm.html?prgrmid=" + vPrgrmid);
                }

                $("#" + tabId).parent().addClass("active");
            }

            function loadJdsgTabContent(uri) {

                $.ajax({
                    cache   : false
                  , url     : uri
                  , type    : 'GET'
                  , async   : 'false'
                  , dataType: 'html'
                  , success : function(result){ //요청이 성공했을때 실행되는 콜백 함수
                                  $('#jdgsSprtgrpAltmntTabContent').html(result);
                              }
                });
                ;
                showContent();
            }

            function initJdsgTab() {

                console.log("dsgnAplyDetailForm start");

                var tabFlag = false;

                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab1Link");
                    tabFlag = true;
                }

                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab2Link");
                    tabFlag = true;
                }

                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab3Link");
                    tabFlag = true;
                }

                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab4Link");
                    tabFlag = true;
                }

                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab5Link");
                    tabFlag = true;
                }

                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab6Link");
                    tabFlag = true;
                }
                if(tabFlag == false) {
                    selectJdsgTab("jdsgTab7Link");
                    tabFlag = true;
                }
            }

            var vPrint = "";
            function openPrint(){
                var id = $("#prgrmid").val();
                var popUrl = "/cmm/reporting/dsgnPrgrmDetail.html?id="+id;

                var popupOption="scrollbars=yes,top=300, left=900,width=1000, height=600";
                vPrint = window.open(popUrl, "_blank", popupOption);
            }

            $(function(){
                initJdsgTab();

            });
    </script>
    </div>
    </body>
</html>