<form id="operRsltRegForm">
    <input type="hidden" id="cyclid" name="cyclid" th:value="${cyclid}">

    <h3 class="blind">운영결과</h3>

    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>운영결과서 확인 - 프로그램 개요</strong></h3>
    </div>

    <div class="card-block-small p-t-0">
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmNm"><strong>프로그램명</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="prgrmNm" id="prgrmNm" placeholder="" th:value="${dstnctnInfo.prgrmNm}" readonly="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="instNm"><strong>기관명</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="instNm" id="instNm" placeholder="" th:value="${dstnctnInfo.instNm}" readonly="">
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>기관유형</strong></div>
                    <div class="col-12">
                        <select id ="instTypeCd" name="instTypeCd" class="form-select form-select-sm form-control-sm" disabled>
                             <option value="">- 선택 -</option>
                             <option th:value="${item.CD}" th:each="item:${typeCdList}" th:selected='${item.CD==dstnctnInfo.instTypeCd?selected:""}'><th:block th:text="${item.CD_NM}"/></option>
                         </select>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>지역</strong></div>
                    <div class="col-12">
                        <select id="instRgnCd" name="instRgnCd" class="form-select form-select-sm form-control-sm" disabled>
                            <option value="">- 선택 -</option>
                            <option th:each="item:${sidoList}" th:value="${item.CTPRVN_CD}" th:selected='${item.CTPRVN_CD==dstnctnInfo.instRgnCd?selected:""}'><th:block th:text="${item.CTPRVN_NM}" ></th:block></option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprNm"><strong>책임개발자 이름</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprNm" id="snrstfdvlprNm" placeholder="" value="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprTelno"><strong>책임개발자 연락처(Tel)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprTelno" id="snrstfdvlprTelno" placeholder="" value="">
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprEml"><strong>책임개발자 이메일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprEml" id="snrstfdvlprEml" placeholder="" value="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprMoblphon"><strong>책임개발자 연락처(HP)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprMoblphon" id="snrstfdvlprMoblphon" placeholder="" value="">
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="picNm"><strong>운영책임자(실무자) 이름</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picNm" id="picNm" placeholder="" value="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="picTelno"><strong>운영책임자(실무자) 연락처(Tel)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picTelno" id="picTelno" placeholder="" value="">
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="picEml"><strong>운영책임자(실무자) 이메일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picEml" id="picEml" placeholder="" value="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="picMoblphon"><strong>운영책임자(실무자) 연락처(HP)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picMoblphon" id="picMoblphon" placeholder="" value="">
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>운영형태</strong></div>
                    <div class="col-12">
                        <div class="form-radio">
                            <span kattr:radio_code="prgrmTypeCd" th:attr='grpCd=120, selectedCd=${dstnctnInfo.operFrmCd}' isAdmin="true" >
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>숙박여부</strong></div>
                    <div class="col-12">
                        <span kattr:radio_yn="styYn" label1="숙박" label2="비숙박" th:attr="defaultVal=${dstnctnInfo.styYn== null ? 'N':dstnctnInfo.styYn}" isAdmin="true"></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>(실외활동)보험가입여부</strong></div>
                    <div class="col-12 row align-items-center">
                        <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                            <div class="form-radio">
                                <span kattr:radio_yn="insrncJoinYn" label1="가입" label2="미가입" isAdmin="true"></span>
                            </div>
                        </div>
                        <div class="col-12 col-lg-auto">
                            <input type="text" class="form-control form-control-sm" name="insrncRsn" id="insrncRsn" placeholder="미가입 사유" value="" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>변경여부</strong></div>
                    <div class="col-12">
                        <div class="form-radio">
                            <span kattr:radio_yn="chgYn" label1="변경됨" label2="변경 없음" isAdmin="true"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-0 row">
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>교육대상</strong></div>
                    <div class="border-checkbox-section">
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="infnt" id="infnt" th:checked="${dstnctnInfo.infnt== 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="infnt"> 유아 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="schboy" id="schboy" th:checked="${dstnctnInfo.schboy == 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="schboy"> 초등 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="msklsd" id="msklsd" th:checked="${dstnctnInfo.msklsd == 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="msklsd"> 중등 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="hgschst" id="hgschst" th:checked="${dstnctnInfo.hgschst == 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="hgschst"> 고등 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="adult" id="adult" th:checked="${dstnctnInfo.adult== 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="adult"> 성인 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="wholAge" id="wholAge" th:checked="${dstnctnInfo.wholAge== 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="wholAge"> 전연령 </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoEduPersonnel"><strong>교육인원 (1회기준)</strong></label>
                    <div class="col-12">
                        <input type="number" class="form-control form-control-sm" placeholder="교육인원" name="eduNope" id="eduNope" th:value="${dstnctnInfo.eduNope}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoActionPlace"><strong>활동장소</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" name="actvtPlc" id="actvtPlc" placeholder="활동장소" th:value="${dstnctnInfo.eduPlc}" >
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoAttendCost"><strong>참가비용</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" name="etrfee" id="etrfee" placeholder="참가비용" th:value="${dstnctnInfo.etrfee}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoEduTime1"><strong>교육시간</strong></label>
                    <div class="col-12 row align-items-center">
                        <div class="col-auto">
                            <input type="number" class="form-control form-control-sm" name="eduCnt" id="eduCnt" placeholder="" th:value="${dstnctnInfo.eduCnt}" style="width: 40px;">
                        </div>
                        <div class="col-auto p-l-0">회</div>
                        <div class="col-auto">
                            <input type="number" class="form-control form-control-sm" name="eduHr" id="eduHr" placeholder="" th:value="${dstnctnInfo.eduHr}" style="width: 40px;">
                        </div>
                        <div class="col-auto p-l-0">시간</div>
                        <div class="col-auto">
                            <input type="number" class="form-control form-control-sm" name="eduMnt" id="eduMnt" placeholder="" th:value="${dstnctnInfo.eduMnt}" style="width: 40px;">
                        </div>
                        <div class="col-auto p-l-0">분</div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>안전사고유무</strong></div>
                    <div class="col-12">
                        <div class="form-radio">
                            <span kattr:radio_yn="sftyacdntEnnc" label1="있음" label2="없음" isAdmin="true"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                <strong>프로그램운영시기</strong></div>
            <div class="border-checkbox-section">


                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="jan" id="jan" th:checked = "${dstnctnInfo.jan=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="jan">1월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="feb" id="feb" th:checked = "${dstnctnInfo.feb=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="feb">2월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="mar" id="mar" th:checked = "${dstnctnInfo.mar=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="mar">3월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="apr" id="apr" th:checked = "${dstnctnInfo.apr=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="apr">4월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="may" id="may" th:checked = "${dstnctnInfo.may=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="may">5월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="june" id="june" th:checked = "${dstnctnInfo.june=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="june">6월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="july" id="july" th:checked = "${dstnctnInfo.july=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="july">7월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="aug" id="aug" th:checked = "${dstnctnInfo.aug=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="aug">8월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="sept" id="sept" th:checked = "${dstnctnInfo.sept=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="sept">9월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="oct" id="oct" th:checked = "${dstnctnInfo.oct=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="oct">10월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="nov" id="nov" th:checked = "${dstnctnInfo.nov=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="nov">11월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="dcm" id="dcm" th:checked = "${dstnctnInfo.dcm=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="dcm">12월</label>
                </div>
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>운영결과서 확인 - 프로그램 운영실적</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="col-12 table-border-style">
            <div class="col-12 table-responsive">
                <table class="table table-framed">
                    <thead>
                    <tr>
                        <th colspan="9" class="text-center">교육실적 세부내용</th>
                    </tr>
                    <tr>
                        <th class="text-center v-middle">실시일자</th>
                        <th class="text-center v-middle">대상</th>
                        <th class="text-center v-middle">시간(h)</th>
                        <th class="text-center v-middle">인원(명)</th>
                        <th class="text-center v-middle">횟수(회)</th>
                        <th class="text-center v-middle">총 시간(h)<br/>(시간X횟수)</th>
                        <th class="text-center v-middle">총 인원(명)<br/>(인원X횟수)</th>
                        <th class="text-center v-middle">지도자 배치 비율</th>
                        <th class="text-center" style="width: 117px;">설정
                        </th>
                    </tr>
                    </thead>
                    <tbody >
                        <tr id="prfmncTr_1">
                            <td><input type="date" class="form-control form-control-sm" name="oprtnDe" id="oprtnDe" placeholder="" value=""></td>
                            <td><input type="text" maxlength="60" title="대상은 60자 이하여야 합니다." class="form-control form-control-sm" name="trgt" id="trgt" value=""></td>
                            <td><input type="number" maxlength="8" title="시간은 8자 이하여야 합니다." class="form-control form-control-sm" name="hr" id="hr" placeholder="" value="0"></td>
                            <td><input type="number" maxlength="10" title="인원수는 10자 이하여야 합니다." class="form-control form-control-sm" name="nope" id="nope" placeholder="" value="0"></td>
                            <td><input type="number" maxlength="10" title="횟수는 10자 이하여야 합니다." class="form-control form-control-sm" name="cnt" id="cnt" placeholder="" value="0"></td>
                            <td><input type="number" maxlength="8" title="전체시간은 8자 이하여야 합니다." class="form-control form-control-sm" name="wholHr" id="wholHr" placeholder="0" value="0" ></td>
                            <td><input type="number" maxlength="10" title="전체인원수는 10자 이하여야 합니다." class="form-control form-control-sm" name="wholNope" id="wholNope" placeholder="0" value="0" ></td>
                            <td><input type="number" maxlength="10" title="지도자배치비율은 10자 이하여야 합니다." class="form-control form-control-sm" name="ldrPostngRt" id="ldrPostngRt" placeholder="" value="0"></td>
                            <td>
                                <div class="btn-group-sm">
                                    <button type="button" class="btn btn-primary m-r-5" onclick="operRsltReg.addRow()">추가</button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th colspan="4" class="table-active text-center v-middle">합계</th>
                            <td class="text-center v-middle">
                                <div class="col-12 row m-0 align-items-center">
                                    <div class="col-10 p-l-0">
                                        <input type="text" class="form-control form-control-sm" name="sumCnt" id="sumCnt" placeholder="" value="0" />
                                    </div>
                                    <div class="col-2 p-0">회</div>
                                </div>
                            </td>
                            <td class="text-center v-middle">
                                <div class="col-12 m-0 row align-items-center">
                                    <div class="col-10 p-l-0">
                                        <input type="text" class="form-control form-control-sm" name="sumHr" id="sumHr" placeholder="" value="0">
                                    </div>
                                    <div class="col-2 p-0">시간</div>
                                </div>
                            </td>
                            <td colspan="3" class="text-center v-middle">
                                <div class="col-12 row m-0 align-items-center">
                                    <div class="col-auto p-l-0">
                                        <input type="text" class="form-control form-control-sm" name="sumNope" id="sumNope" placeholder="" value="0">
                                    </div>
                                    <div class="col-auto p-0">명</div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                        <th colspan="4" rowspan="2" class="table-active text-center v-middle">활동기록확인서 발급여부<br/>(초·중·고등학생일 경우 발급가능)</th>
                        <th class="table-active text-center v-middle">발급여부</th>
                        <td colspan="4">
                            <div class="mb-0 form-group">
                                <div class="col-12">
                                    <div class="form-radio">
                                        <span kattr:radio_yn="issuYn" label1="발급" label2="미발급" isAdmin="true"></span>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th class="table-active text-center v-middle">발급건수</th>
                        <td colspan="4">
                            <div class="col-12 row m-0 align-items-center">
                                <div class="col-auto p-l-0">
                                    <input type="number" class="form-control form-control-sm" name="issuNocs" id="issuNocs" placeholder="" value="0" style="max-width: 100px;">
                                </div>
                                <div class="col-auto p-0">
                                     1회 (총
                                </div>
                                <div class="col-auto">
                                    <input type="number" class="form-control form-control-sm" name="issuSum" id="issuSum" placeholder="" value="0" style="max-width: 100px;">
                                    </div>
                                    <div class="col-auto p-0">
                                        건 발급)
                                    </div>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>운영결과서 확인 - 프로그램 운영성과</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctn"><strong>프로그램 우수성</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="prgrmDstnctn" name="prgrmDstnctn">[[${dstnctnInfo.dstnctn}]]</textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="operMng"><strong>프로그램 운영관리</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="operMng" name="operMng"></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="evl"><strong>프로그램 평가</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="evl" name="evl"></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="qlfcPostng"><strong>지도자 자격 및 배치</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="qlfcPostng" name="qlfcPostng"></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="sftyMng"><strong>교육활동 환경 안전관리</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="sftyMng" name="sftyMng"></textarea>
                </div>
            </div>
            <div class="mb-0 form-group row">
                <div class="form-label col-12 col-form-label p-t-0 pb-1">
                    <strong>첨부파일</strong></div>
                <div class="col-sm-12">
                    <input id="multiFileInput" type="file" name="files" multiple accept="image/jpeg,image/gif,image/png,application/pdf" class="form-control form-control-sm"/>
                    <input type="hidden" name="filegrpid" id="filegrpid" value="0">
                </div>
                <div class="mt-2 row">
                    <div class="col-auto" id="fileListArea">
                    </div>
                </div>
            </div>
        </div>
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>운영결과서 확인 - 차년도 운영계획</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationProgram"><strong>프로그램</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="nextYrPrgrm" name="nextYrPrgrm"><th:block text="${dstnctnInfo.nextYrPrgrm}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationLeader"><strong>지도자</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="nextYrLdr" name="nextYrLdr"><th:block text="${dstnctnInfo.nextYrLdr}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationEnvironment"><strong>교육활동환경</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="nextYrEduEnv" name="nextYrEduEnv"><th:block text="${dstnctnInfo.nextYrEduEnv}"></th:block></textarea>
                </div>
            </div>

        </div>
        <div class="card-block-small">
            <button type="button" onclick="gridHelper1.toggleContent()" class="btn btn-inverse m-r-5" id="listBtn">취소</button>
            <button type="button" onclick="operRsltReg.doSave()"           class="btn btn-primary" id="saveBtn">저장</button>
        </div>
</form>

<script th:inline="javascript">
    var dstnctnInfo = /*[[${dstnctnInfo}]]*/null;

    var operRsltReg = {
    	insertUrl:"/mng/dsgnPrgrm/insertOperRslt.do",

    	init(){
    		operRsltReg.setValid();

    		$("[id^=prgrmTypeCd]").prop("disabled",true);
    		$("[id^=styYn]").prop("disabled",true);
    	},

    	setValid(){

    		var validator = $("#operRsltRegForm").validate({
    	        rules: {
    	        	  snrstfdvlprNm       : {maxlength: 60 }
    	        	, snrstfdvlprEml      : {maxlength: 200 }
    	        	, snrstfdvlprTelno    : {maxlength: 40 }
    	        	, snrstfdvlprMoblphon : {maxlength: 40 }

    	            , picNm               : {maxlength: 60 }
    	            , picEml              : {maxlength: 200 }
    	            , picTelno            : {maxlength: 40 }
    	            , picMoblphon         : {maxlength: 40 }

    	        	, styNight    : {maxlength: 10 }
    	        	, styDaytm    : {maxlength: 10 }
    	        	, insrncRsn   : {maxlength: 100 }
    	        	, eduNope     : {maxlength: 10 }
    	        	, actvtPlc    : {maxlength: 100 }
    	        	, etrfee      : {maxlength: 10 }
    	        	, eduCnt      : {maxlength: 10 }
    	        	, eduHr       : {maxlength: 10 }
    	        	, eduMnt      : {maxlength: 10 }
    	        	, issuNocs    : {maxlength: 10 }
    	        	, issuSum     : {maxlength: 10 }

    	            , prgrmDstnctn : {required: true, maxlength: 2000 }
    	            , operMng      : {required: true, maxlength: 2000 }
    	            , evl          : {required: true, maxlength: 2000 }
    	            , qlfcPostng   : {required: true, maxlength: 2000 }
    	            , sftyMng      : {required: true, maxlength: 2000 }
    	            , nextYrPrgrm  : {required: true, maxlength: 2000 }
    	            , nextYrLdr    : {required: true, maxlength: 1000 }
    	            , nextYrEduEnv : {required: true, maxlength: 2000 }
    	        }
    	        , messages: {
        	          snrstfdvlprNm       : {maxlength: "책임개발자 이름은 60자 이하여야 합니다."}
                    , snrstfdvlprEml      : {maxlength: "책임개발자 이메일은 200자 이하여야 합니다."}
                    , snrstfdvlprTelno    : {maxlength: "책임개발자 전화번호는 40자 이하여야 합니다."}
                    , snrstfdvlprMoblphon : {maxlength: "책임개발자 휴대폰번호는 40자 이하여야 합니다."}

                    , picNm               : {maxlength: "운영책임자(실무자) 이름은 60자 이하여야 합니다." }
                    , picEml              : {maxlength: "운영책임자(실무자) 이메일은 40자 이하여야 합니다." }
                    , picTelno            : {maxlength: "운영책임자(실무자) 연락처(Tel)는 200자 이하여야 합니다." }
                    , picMoblphon         : {maxlength: "운영책임자(실무자) 연락처(HP)는 40자 이하여야 합니다." }

                    , styNight            : {maxlength: "숙박 밤은 10자 이하여야 합니다."}
                    , styDaytm            : {maxlength: "숙박 낮은 10자 이하여야 합니다."}
                    , insrncRsn           : {maxlength: "보험가입사유는 100자 이하여야 합니다."}
                    , eduNope             : {maxlength: "교육인원은 10자 이하여야 합니다."}
                    , actvtPlc            : {maxlength: "활동장소는 100자 이하여야 합니다."}
                    , etrfee              : {maxlength: "참가비용은 10자 이하여야 합니다."}
                    , eduCnt              : {maxlength: "교육시간(회)는 10자 이하여야 합니다."}
                    , eduHr               : {maxlength: "교육시간(시간)은 10자 이하여야 합니다."}
                    , eduMnt              : {maxlength: "교육시간(분)은 10자 이하여야 합니다."}
                    , issuNocs            : {maxlength: "발겁건수(회)는 10자 이하여야 합니다."}
                    , issuSum             : {maxlength: "발급건수(건)은 10자 이하여야 합니다."}

    	            , prgrmDstnctn : {required: "프로그램우수성을 입력해주십시오", maxlength: "프로그램우수성은 2000자 이하여야 합니다." }
    	            , operMng      : {required: "프로그램 운영관리를 입력해주십시오" , maxlength: "프로그램 운영관리는 입력은 2000자 이하여야 합니다." }
    	            , evl          : {required: "프로그램 평가를 입력해주십시오"          , maxlength: "프로그램 평가는 2000자 이하여야 합니다." }
    	            , qlfcPostng   : {required: "지도자 자격 및 배치를 입력해주십시오"      , maxlength: "지도자 자격 및 배치는 2000자 이하여야 합니다." }
    	            , sftyMng      : {required: "교육활동 환경 안전관리를 입력해주십시오"      , maxlength: "교육활동 환경 안전관리는 2000자 이하여야 합니다." }
    	            , nextYrPrgrm  : {required: "프로그램을 입력해주십시오"      , maxlength: "프로그램은 2000자 이하여야 합니다." }
    	            , nextYrLdr    : {required: "지도자를 입력해주십시오"        , maxlength: "지도자는 1000자 이하여야 합니다." }
    	            , nextYrEduEnv : {required: "교육활동환경을 입력해주십시오"  , maxlength: "교육활동환경은 2000자 이하여야 합니다." }
    	        }
    	    });
    	},

    	//행추가
    	addRow(){
    		var lastRow = $('[id^=prfmncTr]:last');

            if ($('[id^=prfmncTr]').length >= 20) {
                alert("최대 20행까지만 추가 가능합니다.");
                return;
            }

            var newRow = lastRow.clone().attr('id', 'prfmncTr' + (lastRow.index() + 2));

            newRow.find('input').val('');
            newRow.find('input[type=number]').val(0);
            lastRow.after(newRow);

            if($('[id^=prfmncTr]').length==2) $('[id^=prfmncTr]:last button').after('<button type="button" class="btn btn-inverse" onclick="operRsltReg.delRow()">삭제</button>');

    	},

    	//행삭제
    	delRow(){
    		var lastRow = $('[id^=prfmncTr]:last');
            if(lastRow.index() > 0) lastRow.remove();
    	},

    	//저장
    	doSave(){

    		if(!($("#operRsltRegForm").valid())) return false;

            if(!confirm("저장하시겠습니까?")) return;

    		var param={};

            $("#operRsltRegForm input, textarea").each(function(index, item) {

                if("checkbox" == item.type){
                    if(item.checked ) {
                        param[item.id] = "Y";
                    }
                    else{
                        param[item.id] = "N";
                    }
                }else{
                    param[item.id] = item.value;
                }
            });

            $('tr[id^=prfmncTr]').each(function(index, item){
                param["operPrfmncLst[" + index + "].oprtnDe"     ] = $("#"+item.id + ' input[id^=oprtnDe]').val();
                param["operPrfmncLst[" + index + "].trgt"        ] = $("#"+item.id + ' input[id^=trgt]').val();
                param["operPrfmncLst[" + index + "].hr"          ] = $("#"+item.id + ' input[id^=hr]').val();
                param["operPrfmncLst[" + index + "].nope"        ] = $("#"+item.id + ' input[id^=nope]').val();
                param["operPrfmncLst[" + index + "].cnt"         ] = $("#"+item.id + ' input[id^=cnt]').val();
                param["operPrfmncLst[" + index + "].wholHr"      ] = $("#"+item.id + ' input[id^=wholHr]').val();
                param["operPrfmncLst[" + index + "].wholNope"    ] = $("#"+item.id + ' input[id^=wholNope]').val();
                param["operPrfmncLst[" + index + "].ldrPostngRt" ] = $("#"+item.id + ' input[id^=ldrPostngRt]').val();
            });

            param["rsltCyclid"] = $("#cyclid").val();
            param["insrncJoinYn"] = $('[id^=insrncJoinYn]:checked').val();
            param["chgYn"] = $('[id^=chgYn]:checked').val();
            param["issuYn"] = $('[id^=issuYn]:checked').val();
            param["prgrmTypeCd"] = $('[id^=prgrmTypeCd]:checked').val();
            param["styYn"] = $('[id^=styYn]:checked').val();
            param["sftyacdntEnnc"] = $('[id^=sftyacdntEnnc]:checked').val();
            param["sttsCd"] = '128102';    //제출

    		if(displayWorkProgress()){
                $.ajax({
                    url : operRsltReg.insertUrl,
                    type: 'POST',
                    cache : false,
                    dataType: 'json',
                    data : param,
                    success : function (data){
                        if(data.result=="success"){
                            alert(data.msg);
                            gridHelper1.resetListContent();
                        }else{
                            alert(data.msg);
                        }
                        closeWorkProgress();
                    },
                    error : function (error){
                    }
                });
           }
    	}
    };

    $(function () {
    	operRsltReg.init();

    	$('[id^=insrncJoinYn]').on('change',function(e){

            if($(this).val() == "Y") {
                $("#insrncRsn").prop("readonly", true)
                $("#insrncRsn").val("");
            }else if($(this).val() == "N") {
                $("#insrncRsn").prop("readonly", false)
            }
    	});

    	$(document).on('change', 'tr[id^=prfmncTr]', function(e) {

            var nope=0;
            var hr  =0;
            var cnt =0;
            var sumVal=0;
            var sumId="";
            var vVal = e.target.value ?? 0;

            if (vVal.length > 1) {
                vVal = vVal.replace(/(^0+)/, "");

                if (vVal.length == 0) {
                    vVal = 0;
                }
            }

            e.target.value = vVal;

            if(e.target.id == "nope"){
                nope = vVal;
                cnt  = $(this).find('[name=cnt]').val() ?? 0;

                $(this).find('[name=wholNope]').val(cnt*nope);
                sumId = 'sumNope';
            }
            if(e.target.id == "hr"){
                cnt  = $(this).find('[name=cnt]').val() ?? 0;
                hr  = vVal;
                $(this).find('[name=wholHr]').val(cnt*hr);
                sumId = 'wholHr';
            }
            if(e.target.id == "cnt"){

                nope  = $(this).find('[name=nope]').val() ?? 0;
                hr    = $(this).find('[name=hr]').val() ?? 0;
                cnt  = vVal;

                $(this).find('[name=wholHr]').val(cnt*hr);
                $(this).find('[name=wholNope]').val(cnt*nope);
                sumId = 'wholNope';
            }


            $('[name^=cnt]').each(function(){
            	sumVal+=Number($(this).val());
            });
            $('#sumCnt').val(sumVal);
            sumVal=0;
            $('[name^=wholHr]').each(function(){
            	sumVal+=Number($(this).val());
            });
            $('#sumHr').val(sumVal);
            sumVal=0;
            $('[name^=wholNope]').each(function(){
            	sumVal+=Number($(this).val());
            });
            $('#sumNope').val(sumVal);

        });

    });


    $('#multiFileInput').change(function(event) {

        var objFile = document.querySelector('#multiFileInput');
        var formData = new FormData();
        var content = "";
        var uploadFileCnt = 0;
        for( i = 0 ; i < objFile.files.length ; i++) {
            formData.append("files", objFile.files[i]);
            uploadFileCnt++;
        }

        formData.append("filegrpid", $("#filegrpid").val());
        formData.append("filegrpNm", "dsgnPrgrm_file");

        $('#multiFileInput').val("");

        $.ajax({
            url : '/uploadMultipleFiles.do',
            processData : false,
            contentType : false,
            data : formData,
            type : 'POST',
            success : function(response) {
                if(response.result == 'fail'){
                    alert(response.msg);
                }else{
                    if($("#filegrpid").val()=='0' || $("#filegrpid").val()=='' || $("#filegrpid").val()==null){
                        debugger;
                        $("#filegrpid").val( response[0].filegrpid );
                    }

                    for(i = 0 ;i < response.length; i++ ){
                        content = "<div class='label label-inverse' id='"+response[i].fileid+"'><a href=javascript:downloadFileByFileid('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') class='text-white'>"+response[i].orginlFileNm+"&nbsp;&nbsp;</a>";
                        content +="<a href=javascript:fn_deleteFile('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') class='text-white'>X</a></div>";
                        $('#fileListArea').append(content);
                    }
                }
            }
        })
    });

    function fn_deleteFile(fileid, fileIdntfcKey){

        var deleteFileUrl="/deleteFile.do?fileid="+fileid+"&file_idntfc_key=" + fileIdntfcKey;
          $.ajax({
            url : deleteFileUrl,
            type: 'GET',
            cache : false,
            dataType: 'json',
            success : function (data){
                if(data.result=="success"){
                    $("#"+fileid).remove();
                    $('#filegrpid').val(0);
                    $('#multiFileInput').val('');
                    alert("파일삭제가 완료 되었습니다.");
                }else{
                    alert("파일삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
                }
            },
            error : function (error){
            }
         })
    };

</script>
</div>
</body>
</html>