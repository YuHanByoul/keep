<form id="objcInfoFrm">
<input type="hidden" id="cyclid" name="cyclid" th:value="${operRsltInfo.cyclid}">
<input type="hidden" id="srngid" name="srngid" th:value="${operRsltInfo.srngid}">

    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>운영결과서 확인 - 프로그램 개요</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmNm"><strong>프로그램명</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="prgrmNm" id="prgrmNm" placeholder="" th:value="${operRsltInfo.prgrmNm}" readonly="">
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="instNm"><strong>기관명</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="instNm" id="instNm" placeholder="" th:value="${operRsltInfo.instNm}" readonly="">
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>기관유형</strong></div>
                    <div class="col-12">
                        <select id ="instTypeCd" name="instTypeCd" class="form-select form-select-sm form-control-sm" disabled>
                             <option value="">- 선택 -</option>
                             <option th:value="${item.CD}" th:each="item:${typeCdList}" th:selected='${item.CD==operRsltInfo.instTypeCd?selected:""}'><th:block th:text="${item.CD_NM}"/></option>
                         </select>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>지역</strong></div>
                    <div class="col-12">
                        <select id="instRgnCd" name="instRgnCd" class="form-select form-select-sm form-control-sm" disabled>
                            <option value="">- 선택 -</option>
                            <option th:each="item:${sidoList}" th:value="${item.CTPRVN_CD}" th:selected='${item.CTPRVN_CD==operRsltInfo.instRgnCd?selected:""}'><th:block th:text="${item.CTPRVN_NM}" ></th:block></option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprNm"><strong>책임개발자 이름</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprNm" id="snrstfdvlprNm" placeholder="" th:value="${operRsltInfo.snrstfdvlprNm}" >
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprTelno"><strong>책임개발자 연락처(Tel)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprTelno" id="snrstfdvlprTelno" placeholder="" th:value="${operRsltInfo.snrstfdvlprTelno}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprEml"><strong>책임개발자 이메일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprEml" id="snrstfdvlprEml" placeholder="" th:value="${operRsltInfo.snrstfdvlprEml}" >
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="snrstfdvlprMoblphon"><strong>책임개발자 연락처(HP)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="snrstfdvlprMoblphon" id="snrstfdvlprMoblphon" placeholder="" th:value="${operRsltInfo.snrstfdvlprMoblphon}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoWorkerName"><strong>운영책임자(실무자) 이름</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picNm" id="picNm" placeholder="" th:value="${operRsltInfo.picNm}" >
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoWorkerTelNum"><strong>운영책임자(실무자) 연락처(Tel)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picTelno" id="picTelno" placeholder="" th:value="${operRsltInfo.picTelno}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoWorkerEmail"><strong>운영책임자(실무자) 이메일</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picEml" id="picEml" placeholder="" th:value="${operRsltInfo.picEml}" >
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoWorkerPhoneNum"><strong>운영책임자(실무자) 연락처(HP)</strong></label>
                    <div class="col-sm-12">
                        <input type="text" class="form-control form-control-sm" name="picMoblphon" id="picMoblphon" placeholder="" th:value="${operRsltInfo.picMoblphon}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>운영형태</strong></div>
                    <div class="col-12">
                        <div class="form-radio">
                            <span kattr:radio_code="prgrmTypeCd" th:attr="grpCd=120, selectedCd=${operRsltInfo.prgrmTypeCd}" isAdmin="true">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>숙박여부</strong></div>
                    <div class="col-12">
                        <span kattr:radio_yn="styYn" label1="숙박" label2="비숙박" th:attr="defaultVal=${operRsltInfo.styYn== null ? 'N':operRsltInfo.styYn}" isAdmin="true" disabled></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>(실외활동)보험가입여부</strong></div>
                    <div class="col-12 row align-items-center">
                        <div class="col-12 col-lg-auto mb-2 mb-lg-0">
                            <div class="form-radio">
                                <span kattr:radio_yn="insrncJoinYn" label1="가입" label2="미가입" th:attr="defaultVal=${operRsltInfo.insrncJoinYn== null ? 'N':operRsltInfo.insrncJoinYn}" isAdmin="true" disabled></span>
                            </div>
                        </div>
                        <div class="col-12 col-lg-auto">
                            <input type="text" class="form-control form-control-sm" name="insrncRsn" id="insrncRsn" placeholder="" th:value="${operRsltInfo.insrncRsn}">
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>변경여부</strong></div>
                    <div class="col-12">
                        <div class="form-radio">
                            <span kattr:radio_yn="chgYn" label1="변경됨" label2="변경 없음" th:attr="defaultVal=${operRsltInfo.chgYn== null ? 'N':operRsltInfo.chgYn}" isAdmin="true" disabled></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-0 row">
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>교육대상</strong></div>
                    <div class="border-checkbox-section">
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="infnt" id="infnt" th:checked="${operRsltInfo.infnt== 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="infnt"> 유아 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="schboy" id="schboy" th:checked="${operRsltInfo.schboy == 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="schboy"> 초등 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="msklsd" id="msklsd" th:checked="${operRsltInfo.msklsd == 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="msklsd"> 중등 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="hgschst" id="hgschst" th:checked="${operRsltInfo.hgschst == 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="hgschst"> 고등 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="adult" id="adult" th:checked="${operRsltInfo.adult== 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="adult"> 성인 </label>
                        </div>
                        <div class="border-checkbox-group border-checkbox-group-inverse">
                            <input class="border-checkbox" type="checkbox" name="wholAge" id="wholAge" th:checked="${operRsltInfo.wholAge== 'Y'}">
                            <label class="form-label form-label-sm border-checkbox-label" for="wholAge"> 전연령 </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoEduPersonnel"><strong>교육인원 (1회기준)</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" placeholder="교육인원" name="eduNope" id="eduNope" th:value="${operRsltInfo.eduNope}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoActionPlace"><strong>활동장소</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" name="actvtPlc" id="actvtPlc" placeholder="활동장소" th:value="${operRsltInfo.actvtPlc}" >
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoAttendCost"><strong>참가비용</strong></label>
                    <div class="col-12">
                        <input type="text" class="form-control form-control-sm" name="etrfee" id="etrfee" placeholder="참가비용" th:value="${operRsltInfo.etrfee}" >
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 row">
            <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                <div class="mb-0 form-group">
                    <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoEduTime1"><strong>교육시간</strong></label>
                    <div class="col-12 row align-items-center">
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm" name="eduCnt" id="eduCnt" placeholder="" th:value="${operRsltInfo.eduCnt}" style="width: 40px;">
                        </div>
                        <div class="col-auto p-l-0">회</div>
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm" name="eduHr" id="eduHr" placeholder="" th:value="${operRsltInfo.eduHr}" style="width: 40px;">
                        </div>
                        <div class="col-auto p-l-0">시간</div>
                        <div class="col-auto">
                            <input type="text" class="form-control form-control-sm" name="eduMnt" id="eduMnt" placeholder="" th:value="${operRsltInfo.eduMnt}" style="width: 40px;">
                        </div>
                        <div class="col-auto p-l-0">분</div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="mb-0 form-group">
                    <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                        <strong>안전사고유무</strong></div>
                    <div class="col-12">
                        <div class="form-radio">
                            <span kattr:radio_yn="sftyacdntEnnc" label1="있음" label2="없음" th:attr="defaultVal=${operRsltInfo.sftyacdntEnnc== null ? 'N':operRsltInfo.sftyacdntEnnc}" isAdmin="true"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-2 form-group row">
            <div class="form-label col-sm-12 col-form-label p-t-0 pb-1">
                <strong>프로그램운영시기</strong></div>
            <div class="border-checkbox-section">


                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="jan" id="jan" th:checked = "${operRsltInfo.jan=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="jan">1월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="feb" id="feb" th:checked = "${operRsltInfo.feb=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="feb">2월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="mar" id="mar" th:checked = "${operRsltInfo.mar=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="mar">3월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="apr" id="apr" th:checked = "${operRsltInfo.apr=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="apr">4월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="may" id="may" th:checked = "${operRsltInfo.may=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="may">5월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="june" id="june" th:checked = "${operRsltInfo.june=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="june">6월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="july" id="july" th:checked = "${operRsltInfo.july=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="july">7월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="aug" id="aug" th:checked = "${operRsltInfo.aug=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="aug">8월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="sept" id="sept" th:checked = "${operRsltInfo.sept=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="sept">9월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="oct" id="oct" th:checked = "${operRsltInfo.oct=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="oct">10월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="nov" id="nov" th:checked = "${operRsltInfo.nov=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="nov">11월</label>
                </div>
                <div class="border-checkbox-group border-checkbox-group-inverse">
                    <input class="border-checkbox" type="checkbox" name="dcm" id="dcm" th:checked = "${operRsltInfo.dcm=='Y'}">
                    <label class="form-label form-label-sm border-checkbox-label" for="dcm">12월</label>
                </div>
            </div>
        </div>
    </div>
    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>운영결과서 확인 - 프로그램 운영실적</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="col-12 table-border-style">
            <div class="col-12 table-responsive">
                <table class="table table-framed">
                    <thead>
                    <tr>
                        <th colspan="9" class="text-center">교육실적 세부내용</th>
                    </tr>
                    <tr>
                        <th class="text-center v-middle">실시일자</th>
                        <th class="text-center v-middle">대상</th>
                        <th class="text-center v-middle">시간(h)</th>
                        <th class="text-center v-middle">인원(명)</th>
                        <th class="text-center v-middle">횟수(회)</th>
                        <th class="text-center v-middle">총 시간(h)<br/>(시간X횟수)</th>
                        <th class="text-center v-middle">총 인원(명)<br/>(인원X횟수)</th>
                        <th class="text-center v-middle">지도자 배치 비율</th>
                        <th class="text-center" style="width: 117px;">설정
                        </th>
                    </tr>
                    </thead>
                    <tbody >

                    <tr th:id='prfmncTr+${i.count}' th:if="${#lists.size(prfmncList) > 0}" th:each="list, i: ${prfmncList}">
                        <td><input type="date" class="form-control form-control-sm" placeholder="" name="oprtnDe" id="oprtnDe" th:value="${list.oprtnDe}" /></td>
                        <td><input type="text" maxlength="60" title="대상은 60자 이하여야 합니다."           class="form-control form-control-sm" placeholder="" name="trgt" id="trgt" th:value="${list.trgt}" /></td>
                        <td><input type="number" maxlength="8" title="시간은 8자 이하여야 합니다."             class="form-control form-control-sm" placeholder="" name="hr" id="hr" th:value="${list.hr}" /></td>
                        <td><input type="number" maxlength="10" title="인원수는 10자 이하여야 합니다."         class="form-control form-control-sm" placeholder="" name="nope" id="nope" th:value="${list.nope}" /></td>
                        <td><input type="number" maxlength="10" title="횟수는 10자 이하여야 합니다."           class="form-control form-control-sm" placeholder="" name="cnt" id="cnt" th:value="${list.cnt}" /></td>
                        <td><input type="number" maxlength="8" title="전체시간은 8자 이하여야 합니다."         class="form-control form-control-sm" placeholder="" name="wholHr" id="wholHr" th:value="${list.wholHr}" readonly /></td>
                        <td><input type="number" maxlength="10" title="전체인원수는 10자 이하여야 합니다."     class="form-control form-control-sm" placeholder="" name="wholNope" id="wholNope" th:value="${list.wholNope}" readonly /></td>
                        <td><input type="number" maxlength="10" title="지도자배치비율은 10자 이하여야 합니다." class="form-control form-control-sm" placeholder="" name="ldrPostngRt" id="ldrPostngRt" th:value="${list.ldrPostngRt}" /></td>
                        <td>
                            <div class="btn-group-sm">
                                <button type="button" class="btn btn-primary m-r-5" onclick="addRow()">
                                    추가
                                </button>
                                <button type="button" class="btn btn-inverse" th:if="${i.index > 0}" onclick="delRow()">삭제</button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th colspan="4" class="table-active text-center v-middle">합계</th>
                        <td class="text-center v-middle">
                            <div class="col-12 row m-0 align-items-center">
                                <div class="col-10 p-l-0">
                                    <input type="text" class="form-control form-control-sm" name="sumCnt" id="sumCnt" placeholder="" value="0"/>
                                </div>
                                <div class="col-2 p-0">
                                    회
                                </div>
                            </div>
                        </td>
                        <td class="text-center v-middle">
                            <div class="col-12 m-0 row align-items-center">
                                <div class="col-10 p-l-0">
                                    <input type="text" class="form-control form-control-sm" name="sumHr" id="sumHr" placeholder="" value="0">
                                </div>
                                <div class="col-2 p-0">
                                    시간
                                </div>
                            </div>
                        </td>
                        <td colspan="3" class="text-center v-middle">
                            <div class="col-12 row m-0 align-items-center">
                                <div class="col-auto p-l-0">
                                    <input type="text" class="form-control form-control-sm" name="sumNope" id="sumNope" placeholder="" value="0">
                                </div>
                                <div class="col-auto p-0">
                                    명
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th colspan="4" rowspan="2" class="table-active text-center v-middle">활동기록확인서 발급여부<br/>(초·중·고등학생일 경우 발급가능)</th>
                        <th class="table-active text-center v-middle">발급여부</th>
                        <td colspan="4">
                            <div class="mb-0 form-group">
                                <div class="col-12">
                                    <div class="form-radio">
                                        <span kattr:radio_yn="issuYn" label1="발급" label2="미발급" th:attr="selectedCd=${operRsltInfo.issuYn}" isAdmin="true"></span>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <th class="table-active text-center v-middle">발급건수</th>
                        <td colspan="4">
                            <div class="col-12 row m-0 align-items-center">
                                <div class="col-auto p-l-0">
                                    <input type="number" class="form-control form-control-sm" name="issuNocs" id="issuNocs" placeholder="" th:value="${operRsltInfo.issuNocs}" style="max-width: 100px;">
                                </div>
                                <div class="col-auto p-0">
                                    1회 (총
                                </div>
                                <div class="col-auto">
                                    <input type="number" class="form-control form-control-sm" name="issuSum" id="issuSum" placeholder="" th:value="${operRsltInfo.issuSum}" style="max-width: 100px;">
                                    </div>
                                    <div class="col-auto p-0">
                                        건 발급)
                                    </div>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>운영결과서 확인 - 프로그램 운영성과</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="prgrmDstnctn"><strong>프로그램 우수성</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="prgrmDstnctn" name="prgrmDstnctn"><th:block th:text="${operRsltInfo.prgrmDstnctn}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="operMng"><strong>프로그램 운영관리</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="operMng" name="operMng"><th:block th:text="${operRsltInfo.operMng}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="evl"><strong>프로그램 평가</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="evl" name="evl"><th:block th:text="${operRsltInfo.evl}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="qlfcPostng"><strong>지도자 자격 및 배치</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="qlfcPostng" name="qlfcPostng"><th:block th:text="${operRsltInfo.qlfcPostng}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="sftyMng"><strong>교육활동 환경 안전관리</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="sftyMng" name="sftyMng"><th:block th:text="${operRsltInfo.sftyMng}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-0 form-group row">
                <div class="form-label col-12 col-form-label p-t-0 pb-1">
                    <strong>첨부파일</strong></div>
                <div class="col-sm-12">
                    <input id="multiFileInput" type="file" name="files" multiple accept="image/jpeg,image/gif,image/png,application/pdf" class="form-control form-control-sm"/>
                    <input type="hidden" name="filegrpid" id="filegrpid" th:value="${operRsltInfo.filegrpid ==null?0:operRsltInfo.filegrpid }">
                </div>
                <div class="mt-2 row">
                    <div class="col-auto" id="fileListArea">
                        <th:block th:if = "${fileList} != null" >
                            <th:block th:each="item:${fileList}" th:if = "${item.fileid} > 0">
                                <span class ='label label-inverse ' th:id="'file_'+${item.fileid}">
                                    <span class='text-white' href="javascript:void(0)" th:name="${item.fileid}" th:onclick="downloadFileByFileid([[${item.fileid}]],[[${item.fileIdntfcKey}]])"><th:block th:text="${item.orginlFileNm}"></th:block>&nbsp;&nbsp;</a></span>
                                    <a class='text-white' href="javascript:void(0)" th:onclick="fn_deleteFileList([[${item.fileid}]],[[${item.fileIdntfcKey}]])">X</a>
                                </span>
                            </th:block>
                        </th:block>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-header p-t-0 p-b-0">
            <h3 class="sub-title"><strong>운영결과서 확인 - 차년도 운영계획</strong></h3>
        </div>
        <div class="card-block-small p-t-0">
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationProgram"><strong>프로그램</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="nextYrPrgrm" name="nextYrPrgrm"><th:block th:text="${operRsltInfo.nextYrPrgrm}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationLeader"><strong>지도자</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="nextYrLdr" name="nextYrLdr"><th:block th:text="${operRsltInfo.nextYrLdr}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 form-group row required">
                <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationEnvironment"><strong>교육활동환경</strong></label>
                <div class="col-12">
                    <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="" id="nextYrEduEnv" name="nextYrEduEnv"><th:block th:text="${operRsltInfo.nextYrEduEnv}"></th:block></textarea>
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationRequestDate"><strong>등록일</strong></label>
                        <div class="col-sm-12">
                            <input type="text" class="form-control form-control-sm" name="regDt" id="regDt" placeholder=""
                                th:value="${operRsltInfo.regDt != null ? #dates.format(operRsltInfo.regDt, 'yyyy-MM-dd') : #dates.format(#dates.createNow(), 'yyyy-MM-dd')}" readonly />
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationUpdateDate"><strong>최종수정일</strong></label>
                        <div class="col-sm-12">
                            <input type="date" class="form-control form-control-sm" name="mdfcnDt1" id="mdfcnDt1" placeholder=""
                                th:value="${operRsltInfo.mdfcnDt != null ? #dates.format(operRsltInfo.mdfcnDt, 'yyyy-MM-dd') : #dates.format(#dates.createNow(), 'yyyy-MM-dd')}" readonly />
                        </div>
                    </div>
                </div>
            </div>
            <div class="mb-0 row">
                <div class="col-12 col-lg-6 mb-2 mb-lg-0">
                    <div class="mb-0 form-group">
                        <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="objcInfoNextOperationRequestStatus"><strong>제출상태</strong></label>
                        <div class="col-sm-12">
                            <span kattr:select_code="sttsCd" th:attr="grpCd=128, selectedCd=${operRsltInfo.sttsCd}" firstOptTxt="- 선택 -" addClass="form-select form-select-sm form-control-sm" isAdmin="true" disabled>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6">
                    <div class="mb-0 form-group">
                        <div class="form-label col-12 col-form-label p-t-0 pb-1">
                            <strong>지원단 배정</strong></div>
                        <div class="m-0 row">
                            <div class="col-12 row border rounded pt-1 pb-2 m-0">
                                <div class="col-auto" id="mng_main_area" name="mng_main_area">
                                    <th:block th:if='${operRsltInfo.picid}'>
                                        <span class="label label-inverse">[[${operRsltInfo.nm + "("+operRsltInfo.acnt+") | " + operRsltInfo.eml + " | " + operRsltInfo.moblphon}]]
                                        <a href="javascript:void(0)" class="text-white"></a>
                                        </span>
                                    </th:block>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-block-small">
            <button type="button" onclick="gridHelper1.toggleContent()" class="btn btn-inverse m-r-5" id="listBtn">목록</button>
            <button type="button" onclick="deleteBtnObjcInfo()"         class="btn btn-disabled m-r-5" id="delBtn">삭제</button>
            <button type="button" onclick="openSbmsnSttsChgModal()"     class="btn btn-primary m-r-5" >상태변경</button>
            <button type="button" onclick="saveBtnObjcInfo()"           class="btn btn-primary" id="saveBtn">저장</button>
        </div>
</form>

<!-- 제출상태변경 팝업 -->
<div class="modal fade" id="sbmsnSttsChgPopup" aria-hidden="true" data-bs-backdrop="static"></div>

<script th:inline="javascript">



    function initObjcInfo(){
    	$("#instCd").attr("disabled",true);
    	$("#delBtn").prop("disabled",'disabled');

    	if(!$("#sttsCd").val()=="128102"){
    		$("#delBtn").prop("disabled",'disabled');
    	}

    	$("[id^=prgrmTypeCd]").prop("disabled",true);
        $("[id^=styYn]").prop("disabled",true);
    }

    var sbmsnSttsChgModal;
    var openSbmsnSttsChgModal = (rowAplyid) => {

    	var url = "/mng/dsgnPrgrm/sbmsnSttsChgPopup.html";

    	var cyclid = $("#cyclid").val();
    	var sttsCd = $("#sttsCd").val();
    	var srngid = $("#srngid").val();
    	url= url+"?cyclid="+cyclid+"&sttsCd="+sttsCd+"&srngid="+srngid;

        $("#sbmsnSttsChgPopup").load(url, function(response, status, xhr) {
            if (status == "success") {
            	sbmsnSttsChgModal = new bootstrap.Modal($('#sbmsnSttsChgPopup'));
            	sbmsnSttsChgModal.show();

            }
        });
    }

    var validator = $('#objcInfoFrm').validate({
        rules: {
            snrstfdvlprNm       : {maxlength: 60 }
          , snrstfdvlprEml      : {maxlength: 200 }
          , snrstfdvlprTelno    : {maxlength: 40 }
          , snrstfdvlprMoblphon : {maxlength: 40 }

          , picNm               : {maxlength: 60 }
          , picEml              : {maxlength: 200 }
          , picTelno            : {maxlength: 40 }
          , picMoblphon         : {maxlength: 40 }

          , styNight            : {maxlength: 10 }
          , styDaytm            : {maxlength: 10 }
          , insrncRsn           : {maxlength: 100 }
          , eduNope             : {maxlength: 10 }
          , actvtPlc            : {maxlength: 100 }
          , etrfee              : {maxlength: 10 }
          , eduCnt              : {maxlength: 10 }
          , eduHr               : {maxlength: 10 }
          , eduMnt              : {maxlength: 10 }
          , issuNocs            : {maxlength: 10 }
          , issuSum             : {maxlength: 10 }

          , prgrmDstnctn        : {required: true, maxlength: 2000 }
          , operMng             : {required: true, maxlength: 2000 }
          , evl                 : {required: true, maxlength: 2000 }
          , qlfcPostng          : {required: true, maxlength: 2000 }
          , sftyMng             : {required: true, maxlength: 2000 }
          , nextYrPrgrm         : {required: true, maxlength: 2000 }
          , nextYrLdr           : {required: true, maxlength: 1000 }
          , nextYrEduEnv        : {required: true, maxlength: 2000 }
        }
          , messages: {
        	snrstfdvlprNm       : {maxlength: "책임개발자 이름은 60자 이하여야 합니다."}
          , snrstfdvlprEml      : {maxlength: "책임개발자 이메일은 200자 이하여야 합니다."}
          , snrstfdvlprTelno    : {maxlength: "책임개발자 전화번호는 40자 이하여야 합니다."}
          , snrstfdvlprMoblphon : {maxlength: "책임개발자 휴대폰번호는 40자 이하여야 합니다."}

          , picNm               : {maxlength: "운영책임자(실무자) 이름은 60자 이하여야 합니다." }
          , picEml              : {maxlength: "운영책임자(실무자) 이메일은 40자 이하여야 합니다." }
          , picTelno            : {maxlength: "운영책임자(실무자) 연락처(Tel)는 200자 이하여야 합니다." }
          , picMoblphon         : {maxlength: "운영책임자(실무자) 연락처(HP)는 40자 이하여야 합니다." }

          , styNight            : {maxlength: "숙박 밤은 10자 이하여야 합니다."}
          , styDaytm            : {maxlength: "숙박 낮은 10자 이하여야 합니다."}
          , insrncRsn           : {maxlength: "보험가입사유는 100자 이하여야 합니다."}
          , eduNope             : {maxlength: "교육인원은 10자 이하여야 합니다."}
          , actvtPlc            : {maxlength: "활동장소는 100자 이하여야 합니다."}
          , etrfee              : {maxlength: "참가비용은 10자 이하여야 합니다."}
          , eduCnt              : {maxlength: "교육시간(회)는 10자 이하여야 합니다."}
          , eduHr               : {maxlength: "교육시간(시간)은 10자 이하여야 합니다."}
          , eduMnt              : {maxlength: "교육시간(분)은 10자 이하여야 합니다."}
          , issuNocs            : {maxlength: "발겁건수(회)는 10자 이하여야 합니다."}
          , issuSum             : {maxlength: "발급건수(건)은 10자 이하여야 합니다."}

          , prgrmDstnctn        : {required: "프로그램우수성을 입력해주십시오" , maxlength: "프로그램우수성은 2000자 이하여야 합니다." }
          , operMng             : {required: "운영결과를 입력해주십시오"       , maxlength: "운영결과는 입력은 2000자 이하여야 합니다." }
          , evl                 : {required: "평가를 입력해주십시오"           , maxlength: "평가는 2000자 이하여야 합니다." }
          , qlfcPostng          : {required: "자격배치를 입력해주십시오"       , maxlength: "자격배치는 2000자 이하여야 합니다." }
          , sftyMng             : {required: "안전관리를 입력해주십시오"       , maxlength: "안전관리는 2000자 이하여야 합니다." }
          , nextYrPrgrm         : {required: "프로그램을 입력해주십시오"       , maxlength: "프로그램은 2000자 이하여야 합니다." }
          , nextYrLdr           : {required: "지도자를 입력해주십시오"         , maxlength: "지도자는 1000자 이하여야 합니다." }
          , nextYrEduEnv        : {required: "교육활동환경을 입력해주십시오"   , maxlength: "교육활동환경은 2000자 이하여야 합니다." }
        }
    });

    function addRow(){
    	$("[id^=prfmncTr]:last")

        var lastRow = $('[id^="prfmncTr"]:last');
        var idx = lastRow.index() + 2;

        if ($('[id^="prfmncTr"]').length >= 20) {
            alert("최대 20행까지만 추가 가능합니다.");
            return;
        }

        var newRow = lastRow.clone().attr('id', 'prfmncTr' + idx);

        newRow.find('input').val('');
        newRow.find('input[type=number]').val(0);

        lastRow.after(newRow);

        if ($('[id^="prfmncTr"]').length == 2) {
            $('[id^="prfmncTr"] td:last div:last')
                .append(`<button type="button" class="btn btn-inverse"onclick="delRow()">삭제</button>`);
        }
    }

    function delRow(){
    	var lastRow = $('[id^="prfmncTr"]:last');
        if(lastRow.index() > 0) lastRow.remove();
    }

    //삭제 버튼
    function deleteBtnObjcInfo(){

       if(!confirm("삭제하시겠습니까?")) return;

        var data =  $("#objcInfoFrm").serialize() ;

        if(displayWorkProgress()){
            $.ajax({
                url : "/mng/dsgnPrgrm/deleteOperRslt.do",
                type: 'POST',
                cache : false,
                dataType: 'json',
                data : data,
                success : function (data){
                    if(data.result=="success"){
                        alert("삭제가 완료 되었습니다.");
                        gridHelper1.resetListContent();
                    }else{
                        alert("삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
                    }
                    closeWorkProgress();
                },
                error : function (error){
                }
            });
       }

    }

    //저장 버튼
    function saveBtnObjcInfo(){

    	if(!($("#objcInfoFrm").valid())) return false;

    	if(!confirm("저장하시겠습니까?")) return;

        var param = {};

        $("#objcInfoFrm input, textarea").each(function(index, item) {

            if("checkbox" == item.type){
                if(item.checked ) {
                    param[item.id] = "Y";
                }
                else{
                    param[item.id] = "N";
                }
            }else{
                param[item.id] = item.value;
            }
        });

        $('tr[id^="prfmncTr"]').each(function(index, item){
            param["operPrfmncLst[" + index + "].oprtnDe"     ] = $("#"+item.id + ' input[id^=oprtnDe]').val();
            param["operPrfmncLst[" + index + "].trgt"        ] = $("#"+item.id + ' input[id^=trgt]').val();
            param["operPrfmncLst[" + index + "].hr"          ] = $("#"+item.id + ' input[id^=hr]').val();
            param["operPrfmncLst[" + index + "].nope"        ] = $("#"+item.id + ' input[id^=nope]').val();
            param["operPrfmncLst[" + index + "].cnt"         ] = $("#"+item.id + ' input[id^=cnt]').val();
            param["operPrfmncLst[" + index + "].wholHr"      ] = $("#"+item.id + ' input[id^=wholHr]').val();
            param["operPrfmncLst[" + index + "].wholNope"    ] = $("#"+item.id + ' input[id^=wholNope]').val();
            param["operPrfmncLst[" + index + "].ldrPostngRt" ] = $("#"+item.id + ' input[id^=ldrPostngRt]').val();
        });



        param["rsltCyclid"] = $("#cyclid").val();
        param["prgrmTypeCd"] = $('[id^=prgrmTypeCd]:checked').val();
        param["styYn"] = $('[id^=styYn]:checked').val();


    	if(displayWorkProgress()){
            $.ajax({
                url : "/mng/dsgnPrgrm/updateOperRslt.do",
                type: 'POST',
                cache : false,
                dataType: 'json',
//                 contentType: "application/json; charset=utf-8",
                data : param,
                success : function (data){
                    if(data.result=="success"){
                        alert(data.msg);
                        gridHelper1.resetListContent();
                    }else{
                    	alert(data.msg);
                    }
                    closeWorkProgress();
                },
                error : function (error){
                }
            });
       }
    }

    $(function() {

    	initObjcInfo();

    	//보험가입여부
    	$('[id^=insrncJoinYn]').on('change',function(e){

            if($(this).val() == "Y") {
                $("#insrncRsn").prop("readonly", true)
                $("#insrncRsn").val("");
            }else if($(this).val() == "N") {
                $("#insrncRsn").prop("readonly", false)
            }
        });


    	//운영실적 목록
    	$(document).on('change', 'tr[id^=prfmncTr]', function(e) {

            var nope=0;
            var hr  =0;
            var cnt =0;
            var sumVal=0;
            var sumId="";
            var vVal = e.target.value ?? 0;

            if (vVal.length > 1) {
                vVal = vVal.replace(/(^0+)/, "");

                if (vVal.length == 0) {
                    vVal = 0;
                }
            }

            e.target.value = vVal;

            if(e.target.id == "nope"){
                nope = vVal;
                cnt  = $(this).find('[name=cnt]').val() ?? 0;

                $(this).find('[name=wholNope]').val(cnt*nope);
                sumId = 'sumNope';
            }
            if(e.target.id == "hr"){
                cnt  = $(this).find('[name=cnt]').val() ?? 0;
                hr  = vVal;
                $(this).find('[name=wholHr]').val(cnt*hr);
                sumId = 'wholHr';
            }
            if(e.target.id == "cnt"){

                nope  = $(this).find('[name=nope]').val() ?? 0;
                hr    = $(this).find('[name=hr]').val() ?? 0;
                cnt  = vVal;

                $(this).find('[name=wholHr]').val(cnt*hr);
                $(this).find('[name=wholNope]').val(cnt*nope);
                sumId = 'wholNope';
            }


            $('[name^=cnt]').each(function(){
                sumVal+=Number($(this).val());
            });
            $('#sumCnt').val(sumVal);
            sumVal=0;
            $('[name^=wholHr]').each(function(){
                sumVal+=Number($(this).val());
            });
            $('#sumHr').val(sumVal);
            sumVal=0;
            $('[name^=wholNope]').each(function(){
                sumVal+=Number($(this).val());
            });
            $('#sumNope').val(sumVal);

        });
    	$('tr[id^=prfmncTr]').val(0).trigger("change");

    	//첨부파일
        $('#multiFileInput').change(function(event) {

            var objFile = document.querySelector('#multiFileInput');
            var formData = new FormData();
            var content = "";
            var uploadFileCnt = 0;
            for( i = 0 ; i < objFile.files.length ; i++) {
                formData.append("files", objFile.files[i]);
                uploadFileCnt++;
            }

            formData.append("filegrpid", $("#filegrpid").val());
            formData.append("filegrpNm", "dsgnPrgrm_file");

            $('#multiFileInput').val("");

            $.ajax({
                url : '/uploadMultipleFiles.do',
                processData : false,
                contentType : false,
                data : formData,
                type : 'POST',
                success : function(response) {
                    if(response.result == 'fail'){
                        alert(response.msg);
                    }else{
                        if($("#filegrpid").val()=='0' || $("#filegrpid").val()=='' || $("#filegrpid").val()==null){
                            debugger;
                            $("#filegrpid").val( response[0].filegrpid );
                        }

                        for(i = 0 ;i < response.length; i++ ){
                            content = "<div class='label label-inverse text-white' id='"+response[i].fileid+"'><a href=javascript:downloadFileByFileid('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') class='text-white'>"+response[i].orginlFileNm+"&nbsp;&nbsp;</a>";
                            content +="<a href=javascript:fn_deleteFileList('"+response[i].fileid+"','"+response[i].fileIdntfcKey+"') class='text-white'>X</a></div>";
                            $('#fileListArea').append(content);
                        }
                    }
                }
            })

        });
    });

    /* 파일삭제 */
    function fn_deleteFileList(fileid, fileIdntfcKey){
        if(!confirm("파일을 삭제하시겠습니까?")){return;}
        fn_deleteFile(fileid, fileIdntfcKey);
        $("#"+fileid).remove();
        $('#multiFileInput').val('');
    }

    function fn_deleteFile(fileid, fileIdntfcKey){

        var deleteFileUrl="/deleteFile.do?fileid="+fileid+"&file_idntfc_key=" + fileIdntfcKey;
          $.ajax({
            url : deleteFileUrl,
            type: 'GET',
            cache : false,
            dataType: 'json',
            success : function (data){
                if(data.result=="success"){
                    $("#"+fileid).remove();
                    $('#filegrpid').val(0);
                    $('#multiFileInput').val('');
                    alert("파일삭제가 완료 되었습니다.");
                }else{
                    alert("파일삭제중 에러가 발생하였습니다. 관리자에게 문의 부탁드립니다.");
                }
            },
            error : function (error){
            }
         })
    };



</script>
</div>
</body>
</html>