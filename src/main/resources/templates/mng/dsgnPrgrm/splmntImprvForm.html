<form id="splmntDmndFrm">
        <input type="hidden" id="cyclid" name="cyclid" th:value="${splmntDmndInfo.cyclid}">
        <input type="hidden" id="srngid" name="srngid" th:value="${splmntDmndInfo.srngid}">
        <input type="hidden" id="dmndid" name="dmndid" th:value="${splmntDmndInfo.dmndid}">

    <div class="card-header p-t-0 p-b-0">
        <h3 class="sub-title"><strong>보완개선 요청서</strong></h3>
    </div>
    <div class="card-block-small p-t-0">
        <div class="mb-2 form-group row required">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="dmndCn"><strong>보완개선요청</strong></label>
            <div class="col-12">
                <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="보완개선요청 내용 입력" id="dmndCn" name="dmndCn"><th:block th:text="${splmntDmndInfo.dmndCn}"></th:block></textarea>
            </div>
        </div>
        <div class="mb-2 form-group row required">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="implmntIdntySrngComplementaryImprovementRequestDocument"><strong>요청서류</strong></label>
            <div class="col-12">
                <textarea rows="5" cols="5" class="form-control form-control-sm" placeholder="요청서류 내용 입력" id="dmndDcmnt" name="dmndDcmnt"><th:block th:text="${splmntDmndInfo.dmndDcmnt}"></th:block></textarea>
            </div>
        </div>
        <div class="mb-0 form-group row required">
            <label class="form-label col-sm-12 col-form-label p-t-0 pb-1" for="implmntIdntySrngComplementaryImprovementRequestCompleteDate"><strong>보완요청 완료일</strong></label>
            <div class="col-12">
                <input type="date" class="form-control form-control-sm" name="dmndCmptnDe" id="dmndCmptnDe" maxlength="10" th:value=${splmntDmndInfo.dmndCmptnDe}  />
            </div>
        </div>
    </div>
    <div class="card-block-small">
        <button type="button" class="btn btn-inverse m-r-5" onclick="implmntSrngGridHelper.resetListContent()">목록</button>
        <button type="button" class="btn btn-primary" id="saveSplmntDmndBtn" onclick="splmntDmnd.doSave()">저장</button>
    </div>
    </div>
</form>

<script th:inline="javascript">

    var splmntDmnd = {

        init : function() {

            this.setValid();
        },
        doSave: function() {

            if(!($('#dtlTabFrm').valid())) return;
            if(!($("#splmntDmndFrm").valid())) return;

            if(!confirm("저장 하시겠습니까?")){return;}


            var url ="/mng/dsgnPrgrm/";
            var keyid = $("#dmndid").val();

            if("" == keyid || null == keyid) {
                url +="insertSplmntImprv.do";
            }else{
                url +="updateSplmntImprv.do";
            }

            var param = $("#splmntDmndFrm").serialize();
            var hr= $("#vstHr").val();
            var mnt= $("#vstMnt").val();
            param+= "&vstDe="+$("#vstDe").val() + "&vstHr="+hr+"&vstMnt="+mnt;

            if(displayWorkProgress()) {
                $.ajax({
                    url : url,
                    type: "POST",
                    cache: false,
                    dataType: "json",
                    data: param,
                    success: function(response) {
                        if(response.result == "success") {

                            alert(response.msg);
                            gridHelper1.resetListContent();

                        } else {
                            alert(response.msg);
                        }
                        closeWorkProgress();
                    }
                });
            }
        },

        setValid: function() {

            var validator = $('#splmntDmndFrm').validate({
                rules: {
                    dmndCn      : {required: true, maxlength: 1000},
                    dmndDcmnt   : {required: true, maxlength: 1000},
                    dmndCmptnDe : {required: true}
                },
                messages: {
                    dmndCn      : {required: "보완개선요청을 입력해주세요.", maxlength: "보완개선요청은 1000자 이하여야 합니다."},
                    dmndDcmnt   : {required: "요청서류를 입력해주세요."    , maxlength: "요청서류는 1000자 이하여야 합니다."},
                    dmndCmptnDe : {required: "보완요청 완료일을입력해주세요."}
                }
            });
        }
    };

    $(function() {
    	splmntDmnd.init();
    });



</script>