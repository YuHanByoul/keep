<form id="dsgnPrgrmOutlPopupFrm">
    <input type="hidden" id="prgrmid" name="prgrmid" th:value="${dsgnPrgrmOutl.prgrmid}">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content type_2">
            <div class="modal-header">
                <h4 class="modal-title">지정프로그램 개요보기</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card m-b-10">
                    <div class="card-block-small">
                        <div class="mb-2 row btn-group-sm justify-content-end">
                            <button type="button" class="col-auto btn btn-primary" onclick="popPrint()">인쇄</button>
                        </div>
                        <div class="mb-0 row">
                            <div class="table-border-style">
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th colspan="6" class="table-active text-center v-middle">프로그램 개요</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th colspan="2" rowspan="2" class="table-active text-center v-middle">프로그램명</th>
                                                <td rowspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.prgrmNm}"></th:block></td>
                                                <th rowspan="2" class="table-active text-center v-middle">최종심사점수</th>
                                                <td rowspan="2" class="text-center v-middle"><strong class="text-info"><th:block th:text="${dsgnPrgrmOutl.finalScr}" />점</strong></td>
                                                <td class="text-center v-middle">서류심사 : <th:block th:text="${dsgnPrgrmOutl.dcmntSrngSrc}" /></td>
                                            </tr>
                                            <tr>
                                                <td class="text-center v-middle">현장점검 : <span class="text-danger"><th:block th:text="${dsgnPrgrmOutl.vstChkSrc}" /></span></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">교육인원</th>
                                                <td class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.eduNope}"></th:block>명</td>
                                                <th class="table-active text-center v-middle">교육시간</th>
                                                <td colspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.eduCnt}" />회
                                                                                             <th:block th:text="${dsgnPrgrmOutl.eduHr}" />시간
                                                                                             <th:block th:text="${dsgnPrgrmOutl.eduMnt}" />분</td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">숙박여부</th>
                                                <td class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.styYn == 'Y' ? '숙박' : '비숙박'}"></td>
                                                <th class="table-active text-center v-middle">운영형태</th>
                                                <td colspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.operFrmNm}"></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">교육주제</th>
                                                <td class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.eduSbjctNmLst}"></td>
                                                <th class="table-active text-center v-middle">교육대상</th>
                                                <td colspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.eduTarget}"></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">운영예산</th>
                                                <td class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.etrfee}">
                                                                                 <th:block th:text="${dsgnPrgrmOutl.slfpy}">
                                                                                 <th:block th:text="${dsgnPrgrmOutl.etcIncm}">
                                                <th class="table-active text-center v-middle">교육장소</th>
                                                <td colspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.eduPlc}"></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">기관명</th>
                                                <td class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.instNm}"></td>
                                                <th class="table-active text-center v-middle">기관유형</th>
                                                <td colspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.instTypeCdNm}"></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">보유지정프로그램</th>
                                                <td class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.hstryCnt}"></td>
                                                <th class="table-active text-center v-middle">지정번호</th>
<!--                                                 <td colspan="2" class="text-center v-middle"><th:block th:text="${dsgnPrgrmOutl.grpDsgnNo}"></td> -->
                                                <td colspan="2" class="text-center v-middle"><th:block th:utext="${#strings.replace(dsgnPrgrmOutl.grpDsgnNo, ',', '&lt;br /&gt;')}"></td>
                                            </tr>
                                            <tr>
                                                <th rowspan="4" class="table-active text-center v-middle" style="width: 100px;">프로그램<br/>개요</th>
                                                <th class="table-active text-center v-middle" style="width: 80px;">교육목적</th>
                                                <td colspan="4" class="v-middle"><th:block th:text="${dsgnPrgrmOutl.eduPrps}"></td>
                                            </tr>
                                            <tr>
                                                <th class="table-active text-center v-middle">적절성</th>
                                                <td colspan="4" class="v-middle"><th:block th:text="${dsgnPrgrmOutl.appro}"></td>
                                            </tr>
                                            <tr>
                                                <th class="table-active text-center v-middle">우수성</th>
                                                <td colspan="4" class="v-middle"><th:block th:text="${dsgnPrgrmOutl.dstnctn}"></td>
                                            </tr>
                                            <tr>
                                                <th class="table-active text-center v-middle">교육내용</th>
                                                <td colspan="4" class="v-middle"><th:block th:text="${dsgnPrgrmOutl.eduCn}"></td>
                                            </tr>
                                            <tr>
                                                <th colspan="6" class="table-active text-center v-middle">현장점검 총평</th>
                                            </tr>
                                            <tr>
                                                <td colspan="6" ><th:block th:text="${dsgnPrgrmOutl.chklstRsltCn}"></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">구분</th>
                                                <th class="table-active text-center v-middle">자가진단 체크리스트</th>
                                                <th colspan="3" class="table-active text-center v-middle">지원단 현장점검 결과</th>
                                            </tr>
                                            <tr id="chkListTr" th:if='${chkList}' th:each='list :${chkList}'>
                                                <th th:if='${list.sbmsnSeCd == "242101"}' colspan="2" class="bg-light text-center v-middle">[[${list.cdNm}]]</th>
                                                <td th:id="selfScr" th:name="selfScr" th:if='${list.sbmsnSeCd == "242101"}' class="text-center v-middle">[[${list.scr}]]</td>
                                                <td th:id="srngScr" th:name="srngScr" th:if='${list.sbmsnSeCd == "242102"}' colspan="3" class="text-center v-middle"><strong class="text-danger">[[${list.scr}]]</td>
                                            </tr>
                                            <!--
                                            <tr>
                                                <th colspan="2" class="bg-light text-center v-middle">프로그램 운영예산</th>
                                                <td class="text-center v-middle">5</td>
                                                <td colspan="3" class="text-center v-middle"><strong class="text-danger">3</strong></td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="bg-light text-center v-middle">장소 및 시설교구</th>
                                                <td class="text-center v-middle">5</td>
                                                <td colspan="3" class="text-center v-middle">5</td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="bg-light text-center v-middle">홍보 참여방안</th>
                                                <td class="text-center v-middle">5</td>
                                                <td colspan="3" class="text-center v-middle">5</td>
                                            </tr>
                                            <tr>
                                                <th colspan="2" class="bg-light text-center v-middle">안전교육</th>
                                                <td class="text-center v-middle">5</td>
                                                <td colspan="3" class="text-center v-middle">5</td>
                                            </tr>
                                             -->
                                            <tr>
                                                <th colspan="2" class="table-active text-center v-middle">합계</th>
                                                <td class="table-active text-center v-middle" id="sumScrSelf" >30</td>
                                                <td colspan="3" class="table-active text-center v-middle" id="sumScrSrng" ><strong class="text-danger"></strong></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<script th:inline="javascript">

var vPrint = "";
function popPrint(){
    var id = $("#dsgnPrgrmOutlPopupFrm #prgrmid").val();
    debugger;
    var popUrl = "/cmm/reporting/dsgnPrgrmOutl.html?id="+id;

    var popupOption="scrollbars=yes,top=300, left=900,width=1000, height=600";
    vPrint = window.open(popUrl, "_blank", popupOption);
}

function setSumScr(){
	var selfScrSum=0;
	var srngScrSum=0;
	$('[name^=selfScr]').each(function(idx, item){
		var scr = Number(this.innerText);
		selfScrSum+=scr;
	});

	$("#sumScrSelf").prop("innerText", selfScrSum);

	$('[name^=srngScr]').each(function(idx, item){
		var scr = Number(this.innerText);
		srngScrSum+=scr;
    });
	$("#sumScrSrng").prop("innerText", srngScrSum);
}

$(function() {
	setSumScr();
});


</script>
